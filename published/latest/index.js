(()=>{var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};(()=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function r(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}e.d(t,{default:()=>$g});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"feedbackButton",null),r(this,"injectedFeedbackButton",!1),r(this,"buttonHidden",null),r(this,"lastButtonIcon",null)}var t,n,i;return t=e,i=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"destroy",value:function(){this.feedbackButton&&(this.feedbackButton.remove(),this.feedbackButton=null),this.buttonHidden=null,this.lastButtonIcon=null,this.injectedFeedbackButton=!1,this.instance=null}},{key:"toggleFeedbackButton",value:function(t){this.buttonHidden=!t,e.getInstance().updateFeedbackButtonState(),Bh.getInstance().updateContainerStyle()}},{key:"feedbackButtonPressed",value:function(){var e=Qt.getInstance();e.isOpened()?e.hideWidget():(e.setAppMode("widget"),e.showWidget())}},{key:"injectFeedbackButton",value:function(){var e=this;if(!this.injectedFeedbackButton){this.injectedFeedbackButton=!0;var t=document.createElement("div");t.addEventListener("click",(function(){e.feedbackButtonPressed()})),document.body.appendChild(t),this.feedbackButton=t,this.updateFeedbackButtonState()}}},{key:"updateNotificationBadge",value:function(e){var t=document.querySelector(".bb-notification-bubble");if(t){var n="bb-notification-bubble--hidden";e>0&&!Qt.getInstance().isOpened()?(t.classList.remove(n),t.innerText=e):t.classList.add(n)}}},{key:"refresh",value:function(){document.querySelector(".bb-feedback-button")?(this.updateFeedbackButtonText(),this.updateFeedbackButtonState()):(this.injectedFeedbackButton=!1,this.feedbackButton=null,this.buttonHidden=null,this.lastButtonIcon=null,this.injectFeedbackButton())}},{key:"updateFeedbackButtonText",value:function(){var t=ht.getInstance().getFlowConfig();if(t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC||t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC_BOTTOM||t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC_LEFT){var n=document.querySelector(".bb-feedback-button-classic");n&&(n.innerText=t.widgetButtonText)}}},{key:"updateFeedbackButtonState",value:function(){if(qh.getInstance().updateUIVisibility(),null!==this.feedbackButton){var t=ht.getInstance().getFlowConfig(),n="";n=t.buttonLogo?'<img class="bb-logo-logo" src="'.concat(t.buttonLogo,'" alt="Feedback Button" />'):p("button","#fff"),this.feedbackButton.className="bb-feedback-button gleap-font gl-block",this.feedbackButton.setAttribute("dir",Sh.getInstance().isRTLLayout?"rtl":"ltr"),t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC||t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC_BOTTOM||t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC_LEFT?(this.feedbackButton.classList.add("bb-feedback-button--classic-button-style"),this.feedbackButton.innerHTML='<div class="bb-feedback-button-classic '.concat(t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC_LEFT?"bb-feedback-button-classic--left":"").concat(t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC_BOTTOM?"bb-feedback-button-classic--bottom":"",'">').concat(t.widgetButtonText,"</div>")):n!==this.lastButtonIcon&&(this.feedbackButton.innerHTML='<div class="bb-feedback-button-icon">'.concat(n).concat(p("arrowdown","#fff"),'</div><div class="bb-notification-bubble bb-notification-bubble--hidden"></div>')),this.lastButtonIcon=n;var o=!1;null===e.getInstance().buttonHidden?t.feedbackButtonPosition===e.FEEDBACK_BUTTON_NONE&&(o=!0):e.getInstance().buttonHidden&&(o=!0),o&&this.feedbackButton.classList.add("bb-feedback-button--disabled"),t.feedbackButtonPosition===e.FEEDBACK_BUTTON_BOTTOM_LEFT&&this.feedbackButton.classList.add("bb-feedback-button--bottomleft"),Qt.getInstance().isOpened()&&this.feedbackButton.classList.add("bb-feedback-button--open");var r=Qt.getInstance().appMode;"survey"!==r&&"survey_full"!==r&&"survey_web"!==r||this.feedbackButton.classList.add("bb-feedback-button--survey"),!0!==t.hideForGuests||nt.getInstance().isUser()||this.feedbackButton.classList.add("bb-feedback-button--hidden")}}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=i.call(n)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}r(a,"FEEDBACK_BUTTON_BOTTOM_RIGHT","BOTTOM_RIGHT"),r(a,"FEEDBACK_BUTTON_BOTTOM_LEFT","BOTTOM_LEFT"),r(a,"FEEDBACK_BUTTON_CLASSIC","BUTTON_CLASSIC"),r(a,"FEEDBACK_BUTTON_CLASSIC_LEFT","BUTTON_CLASSIC_LEFT"),r(a,"FEEDBACK_BUTTON_CLASSIC_BOTTOM","BUTTON_CLASSIC_BOTTOM"),r(a,"FEEDBACK_BUTTON_NONE","BUTTON_NONE"),r(a,"instance",void 0);var u=function(e,t){3===(e=e.replace(/^#/,"")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var n=l(e.match(/.{2}/g),3),o=n[0],r=n[1],i=n[2],a=[parseInt(o,16)+t,parseInt(r,16)+t,parseInt(i,16)+t];o=a[0],r=a[1],i=a[2],o=Math.max(Math.min(255,o),0).toString(16),r=Math.max(Math.min(255,r),0).toString(16),i=Math.max(Math.min(255,i),0).toString(16);var s=(o.length<2?"0":"")+o,c=(r.length<2?"0":"")+r,u=(i.length<2?"0":"")+i;return"#".concat(s).concat(c).concat(u)},d=function(e){return(299*parseInt(e.substr(1,2),16)+587*parseInt(e.substr(3,2),16)+114*parseInt(e.substr(5,2),16))/1e3>=160?"#000000":"#ffffff"},p=function(e,t){return"button"===e?'<svg class="bb-logo-logo bb-logo-logo--default" width="145" height="144" viewBox="0 0 145 144" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M38.9534 15H105.047C113.857 15 121 22.1426 121 30.9534L121 89.5238L121 96.015L121 125.541C121 128.759 117.393 130.66 114.739 128.84L90.1188 111.968H38.9534C30.1426 111.968 23 104.826 23 96.015V30.9534C23 22.1426 30.1426 15 38.9534 15Z" fill="white"/>\n    </svg>':"drag"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512">\x3c!--!Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2025 Fonticons, Inc.--\x3e<path d="M64 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm0 160a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM96 416a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96-288a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm32 128a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM192 448a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"/></svg>':"unmute"===e?'<svg id="tooltip-svg-unmute" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path id="tooltip-svg-unmute-path" d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.1 386.2C556.7 352 576 306.3 576 256c0-60.1-27.7-113.8-70.9-149c-10.3-8.4-25.4-6.8-33.8 3.5s-6.8 25.4 3.5 33.8C507.3 170.7 528 210.9 528 256c0 39.1-15.6 74.5-40.9 100.5L449 326.6c19-17.5 31-42.7 31-70.6c0-30.1-13.9-56.9-35.4-74.5c-10.3-8.4-25.4-6.8-33.8 3.5s-6.8 25.4 3.5 33.8C425.1 227.6 432 241 432 256s-6.9 28.4-17.7 37.3c-1.3 1-2.4 2.2-3.4 3.4L352 250.6V64c0-12.6-7.4-24-18.9-29.2s-25-3.1-34.4 5.3L197.8 129.8 38.8 5.1zM352 373.3L82.9 161.3C53.8 167.4 32 193.1 32 224v64c0 35.3 28.7 64 64 64h67.8L298.7 471.9c9.4 8.4 22.9 10.4 34.4 5.3S352 460.6 352 448V373.3z"/></svg>':"mute"===e?'<svg id="tooltip-svg-mute" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path id="tooltip-svg-mute-path" d="M533.6 32.5C598.5 85.3 640 165.8 640 256s-41.5 170.8-106.4 223.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C557.5 398.2 592 331.2 592 256s-34.5-142.2-88.7-186.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM473.1 107c43.2 35.2 70.9 88.9 70.9 149s-27.7 113.8-70.9 149c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C475.3 341.3 496 301.1 496 256s-20.7-85.3-53.2-111.8c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zm-60.5 74.5C434.1 199.1 448 225.9 448 256s-13.9 56.9-35.4 74.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C393.1 284.4 400 271 400 256s-6.9-28.4-17.7-37.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3z"/></svg>':"replay"===e?'<svg id="tooltip-svg-replay" width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path id="tooltip-svg-replay-path" d="M48.5 224H40C26.7 224 16 213.3 16 200V72C16 62.3 21.8 53.5 30.8 49.8C39.8 46.1 50.1 48.1 57 55L98.6 96.6C186.2 10.1 327.3 10.4 414.4 97.6C501.9 185.1 501.9 326.9 414.4 414.4C326.9 501.9 185.1 501.9 97.6 414.4C85.1 401.9 85.1 381.6 97.6 369.1C110.1 356.6 130.4 356.6 142.9 369.1C205.4 431.6 306.7 431.6 369.2 369.1C431.7 306.6 431.7 205.3 369.2 142.8C307 80.6 206.5 80.3 143.9 141.8L185 183C191.9 189.9 193.9 200.2 190.2 209.2C186.5 218.2 177.7 224 168 224H48.5Z" />\n    </svg>':"dismiss"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M294.6 166.6L317.3 144 272 98.7l-22.6 22.6L160 210.7 70.6 121.4 48 98.7 2.7 144l22.6 22.6L114.7 256 25.4 345.4 2.7 368 48 413.3l22.6-22.6L160 301.3l89.4 89.4L272 413.3 317.3 368l-22.6-22.6L205.3 256l89.4-89.4z"/></svg>':"blur"===e?'<svg width="1200pt" height="1200pt" version="1.1" viewBox="0 0 1200 1200" xmlns="http://www.w3.org/2000/svg">\n <path class="bb-svg-path" d="m602.25 1200c238.2 0 435.95-193.26 435.95-435.95 0-269.66-220.23-615.73-435.95-764.05-220.23 161.8-440.45 485.39-440.45 764.05 0 242.7 197.75 435.95 440.45 435.95zm-260.68-382.02c0 112.36 89.887 206.74 206.74 206.74v62.922c-148.32 0-274.16-121.35-274.16-269.66z" fill="#333"/>\n</svg>':"pen"===e?'<svg width="1072px" height="1034px" viewBox="0 0 1072 1034" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(-907.000000, -217.000000)" fill-rule="nonzero">\n            <g transform="translate(907.268457, 217.009827)">\n                <g transform="translate(132.335119, 0.000000)" fill="#000" class="bb-svg-path">\n                    <path d="M20.3764235,730.530173 L10.1884235,720.342173 C-0.791576454,709.362173 -3.16357645,692.432173 4.37592355,678.858173 L83.1809235,537.018173 C71.7589235,502.979173 82.3098335,463.998173 112.254924,440.706173 L655.334924,18.3161733 C689.951924,-8.6058267 739.197924,-5.5388267 770.214924,25.4684733 L913.774924,169.028473 C944.782924,200.040473 947.848924,249.286473 920.927224,283.908473 L498.537224,826.988473 C496.322424,829.836173 493.935624,832.543173 491.384924,835.090073 C467.271924,859.207073 432.513924,866.195073 402.232924,856.063073 L260.382924,934.868073 C246.804924,942.407173 229.874924,940.036073 218.894924,929.055573 L208.706924,918.867573 L20.3764235,730.530173 Z M866.006424,241.190173 C871.393124,234.264373 870.779824,224.417173 864.576724,218.213173 L721.016724,74.6531733 C714.813624,68.4500733 704.965724,67.8367733 698.043724,73.2234733 L154.963724,495.613473 C147.381724,501.507973 146.018424,512.433473 151.912924,520.015473 C152.358234,520.585783 152.834804,521.128773 153.346524,521.636573 L417.586524,785.886573 C424.379524,792.675673 435.391524,792.675673 442.180524,785.886573 C442.692244,785.374853 443.168804,784.831873 443.610224,784.265473 L866.006424,241.190173 Z M342.796424,809.480173 L129.746424,596.430173 L77.9264235,689.707173 L249.516424,861.297173 L342.796424,809.480173 Z"></path>\n                </g>\n                <g transform="translate(-0.000000, 755.530173)" fill="#EB144C">\n                    <path d="M124.711543,0 L313.042043,188.3374 L233.288043,268.0914 C222.003043,279.3764 204.483043,281.5324 190.800043,273.3219 L16.8900429,168.9719 C-2.51595711,157.3309 -5.80895711,130.5499 10.1908429,114.5499 L124.711543,0 Z" class="bb-pen-tip"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>':"rect"===e?'<svg width="339px" height="241px" viewBox="0 0 339 241" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(-0.000865, 0.000000)" fill-rule="nonzero">\n            <g transform="translate(0.000865, 0.000000)" fill="#000000" class="bb-svg-path">\n                <path d="M339,0 L339,241 L0,241 L0,0 L339,0 Z M312.826351,26.168387 L26.1855674,26.168387 L26.1855674,214.41156 L312.826351,214.41156 L312.826351,26.168387 Z"></path>\n            </g>\n            <g transform="translate(0.000000, 83.206095)" fill="#EB144C" class="bb-pen-tip">\n                <path d="M0,0 L26.186,26.186 L26.1864325,131.205465 L131.204,131.205 L157.792,157.793 L0.000865118243,157.793905 L0,0 Z"></path>\n            </g>\n        </g>\n    </g>\n</svg>':"pointer"===e?'<svg width="1200pt" height="1200pt" version="1.1" viewBox="0 0 1200 1200" xmlns="http://www.w3.org/2000/svg">\n    <path d="m1050.7 508.95-225.94 157.5 160.31 160.31c4.4531 4.4531 6.9141 10.43 6.9141 16.758s-2.4609 12.305-6.9141 16.758l-126.09 126.09c-4.4531 4.4531-10.43 6.9141-16.758 6.9141-6.3281 0-12.188-2.4609-16.758-6.9141l-160.2-160.43-157.62 225.94c-3.3984 4.9219-9.0234 7.8516-14.883 7.8516-0.70313 0-1.5234 0-2.2266-0.11719-6.7969-0.82031-12.422-5.2734-14.766-11.719l-333.16-880.55c-2.5781-6.6797-0.9375-14.297 4.2188-19.336 5.0391-5.0391 12.656-6.6797 19.336-4.2188l880.66 333.05c6.3281 2.3438 10.781 8.0859 11.602 14.766 0.82031 6.7969-2.1094 13.359-7.7344 17.344z" fill="#333"/>\n   </svg>':"clip"===e?'<svg width="600px" height="1126px" viewBox="0 0 600 1126" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(-0.002000, 0.501000)" fill="#333333" fill-rule="nonzero">\n            <path d="M225.002,1124.999 C165.33,1124.999 108.102,1101.292 65.902,1059.097 C23.707,1016.902 5.68434189e-14,959.671 5.68434189e-14,899.997 L5.68434189e-14,299.997 C5.68434189e-14,220.431 31.605,144.127 87.867,87.867 C144.129,31.605 220.437,-4.26325641e-14 299.997,-4.26325641e-14 C379.557,-4.26325641e-14 455.867,31.605 512.127,87.867 C568.389,144.129 599.994,220.437 599.994,299.997 L599.994,1012.497 C599.994,1025.895 592.8456,1038.274 581.244,1044.974 C569.642,1051.6732 555.346,1051.6732 543.744,1044.974 C532.142,1038.2748 524.994,1025.896 524.994,1012.497 L524.994,299.997 C524.994,240.325 501.287,183.097 459.092,140.897 C416.897,98.702 359.666,74.995 299.992,74.995 C240.318,74.995 183.092,98.702 140.892,140.897 C98.697,183.092 74.99,240.323 74.99,299.997 L74.99,899.997 C74.99,953.587 103.58,1003.107 149.99,1029.897 C196.4,1056.694 253.58,1056.694 299.99,1029.897 C346.4,1003.104 374.99,953.585 374.99,899.997 L374.99,337.497 C374.99,310.704 360.697,285.942 337.49,272.544 C314.283,259.149 285.697,259.149 262.49,272.544 C239.283,285.942 224.99,310.704 224.99,337.497 L224.99,824.997 C224.99,838.395 217.8416,850.774 206.24,857.474 C194.638,864.1732 180.342,864.1732 168.74,857.474 C157.138,850.7748 149.99,838.396 149.99,824.997 L149.99,337.497 C149.99,283.907 178.58,234.387 224.99,207.597 C271.4,180.8 328.58,180.8 374.99,207.597 C421.4,234.39 449.99,283.909 449.99,337.497 L449.99,899.997 C449.99,959.669 426.283,1016.897 384.088,1059.097 C341.893,1101.292 284.662,1124.999 224.988,1124.999 L225.002,1124.999 Z" id="Path"></path>\n        </g>\n    </g>\n</svg>':"mic"===e?'<svg\n    width="1200pt"\n    height="1200pt"\n    version="1.1"\n    viewBox="0 0 1200 1200"\n    xmlns="http://www.w3.org/2000/svg"\n  >\n    <g class="bb-svg-path">\n      <path\n        d="m600 862.5c144.75 0 262.5-117.75 262.5-262.5v-300c0-144.75-117.75-262.5-262.5-262.5s-262.5 117.75-262.5 262.5v300c0 144.75 117.75 262.5 262.5 262.5z"\n      />\n      <path\n        d="m1012.5 600c0-20.707-16.793-37.5-37.5-37.5s-37.5 16.793-37.5 37.5c0 186.11-151.41 337.5-337.5 337.5s-337.5-151.39-337.5-337.5c0-20.707-16.793-37.5-37.5-37.5s-37.5 16.793-37.5 37.5c0 214.8 165.08 391.57 375 410.6v114.4c0 20.727 16.793 37.5 37.5 37.5s37.5-16.773 37.5-37.5v-114.4c209.92-19.031 375-195.8 375-410.6z"\n      />\n    </g>\n  </svg>':"camera"===e?'<svg width="1155px" height="1004px" viewBox="0 0 1155 1004" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g fill="#333333" fill-rule="nonzero">\n            <g transform="translate(128.324095, 0.000000)">\n                <path d="M42.7803063,0.00413459787 C31.4357421,0.00413459787 20.5549853,4.41399115 12.5336107,12.2572687 C4.51223664,20.1005462 0.00420584816,30.741831 0.00420584816,41.8370305 L0.00420584816,251.00151 C-0.156199045,262.200455 4.27736739,272.989996 12.315738,280.963903 C20.3585574,288.938257 31.3288589,293.431222 42.7803063,293.431222 C54.2317532,293.431222 65.2018267,288.938592 73.2448746,280.963903 C81.2832452,272.989549 85.7172445,262.200455 85.5564062,251.00151 L85.5564062,83.6699265 L256.660808,83.6699265 C268.112255,83.8267939 279.145066,79.4909873 287.298762,71.6298611 C295.452913,63.7643845 300.04718,53.0359758 300.04718,41.8370305 C300.04718,30.6380854 295.453255,19.9098998 287.298762,12.0441998 C279.144611,4.18307356 268.112255,-0.153157091 256.660808,0.00413459787 L42.7803063,0.00413459787 Z"></path>\n                <path d="M983.227131,710.59444 C971.895913,710.764382 961.099907,715.326799 953.20401,723.279287 C945.312674,731.227538 940.964345,741.91668 941.119476,752.99849 L941.119476,920.330075 L770.015075,920.330075 C758.563631,920.173205 747.530815,924.509015 739.377123,932.370139 C731.222968,940.235615 726.628705,950.964028 726.628705,962.16297 C726.628705,973.361918 731.222627,984.090105 739.377123,991.955802 C747.531272,999.816926 758.563631,1004.15316 770.015075,1003.99587 L983.895579,1003.99587 C995.24014,1003.99587 1006.1209,999.586011 1014.14227,991.742733 C1022.16365,983.899455 1026.67168,973.258169 1026.67168,962.16297 L1026.67168,752.99849 C1026.83208,741.690223 1022.30053,730.801401 1014.11489,722.812989 C1005.93394,714.825472 994.790363,710.415949 983.227131,710.59444 L983.227131,710.59444 Z"></path>\n                <path d="M983.227131,375.93127 C971.895913,376.101212 961.099907,380.66363 953.20401,388.61612 C945.312674,396.56437 940.964345,407.253512 941.119476,418.335325 L941.119476,585.66691 C940.959072,596.865853 945.39264,607.655394 953.431008,615.629303 C961.47383,623.603658 972.444131,628.096618 983.895579,628.096618 C995.347023,628.096618 1006.3171,623.603989 1014.36015,615.629303 C1022.39852,607.654947 1026.83251,596.865853 1026.67168,585.66691 L1026.67168,418.335325 C1026.83208,407.027056 1022.30053,396.138232 1014.11489,388.149822 C1005.93394,380.162305 994.790363,375.752783 983.227131,375.93127 L983.227131,375.93127 Z"></path>\n                <path d="M769.974012,0.00413459787 C758.522563,-0.152733184 747.489752,4.18307356 739.336055,12.0441998 C731.181906,19.9096767 726.587637,30.6380854 726.587637,41.8370305 C726.587637,53.0359758 731.181564,63.7641611 739.336055,71.6298611 C747.490209,79.4909873 758.522563,83.8272181 769.974012,83.6699265 L941.078414,83.6699265 L941.078414,251.00151 C940.918009,262.200455 945.351572,272.989996 953.389945,280.963903 C961.432763,288.938257 972.403063,293.431222 983.854512,293.431222 C995.30596,293.431222 1006.27603,288.938592 1014.31908,280.963903 C1022.35745,272.989549 1026.79145,262.200455 1026.63061,251.00151 L1026.63061,41.8370305 C1026.63061,30.7426118 1022.12133,20.1017733 1014.10121,12.2572687 C1006.08109,4.41276405 995.199876,0.00413459787 983.854512,0.00413459787 L769.974012,0.00413459787 Z"></path>\n                <path d="M427.765208,0.00413459787 C416.31376,-0.152733184 405.280949,4.18307356 397.127256,12.0441998 C388.973102,19.9096767 384.378838,30.6380854 384.378838,41.8370305 C384.378838,53.0359758 388.972761,63.7641611 397.127256,71.6298611 C405.281406,79.4909873 416.31376,83.8272181 427.765208,83.6699265 L598.86961,83.6699265 C610.321058,83.8267939 621.35387,79.4909873 629.507562,71.6298611 C637.661716,63.7643845 642.255985,53.0359758 642.255985,41.8370305 C642.255985,30.6380854 637.662058,19.9098998 629.507562,12.0441998 C621.353413,4.18307356 610.321058,-0.153157091 598.86961,0.00413459787 L427.765208,0.00413459787 Z"></path>\n            </g>\n            <g transform="translate(0.000000, 427.000000)">\n                <path d="M768.516184,22.1826583 C752.659627,13.73125 732.573775,13.73125 717.773442,24.29375 L562.379192,124.6375 L562.379192,31.6875 C562.379192,13.7330104 548.635081,0 530.666079,0 L31.7131123,0 C13.7441105,0 0,13.7330104 0,31.6875 L0,475.3125 C0,493.26699 13.7441105,507 31.7131123,507 L530.666079,507 C548.635081,507 562.379192,493.26699 562.379192,475.3125 L562.379192,382.3625 L717.773442,482.70625 C726.231681,487.9875 735.742444,491.157658 745.257258,491.157658 C753.715498,491.157658 761.113815,489.046567 769.572406,484.820862 C786.485185,475.313732 796,458.414612 796,439.400352 L796,68.6566021 C794.943601,48.5869719 785.428963,31.6878521 768.516184,22.1807219 L768.516184,22.1826583 Z"></path>\n            </g>\n        </g>\n    </g>\n</svg>':"recorderon"===e?'<svg width="1251px" height="1251px" viewBox="0 0 1251 1251" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g>\n            <circle fill="#E31810" cx="625.5" cy="625.5" r="625.5"></circle>\n            <circle fill="#F71008" cx="625" cy="625" r="507"></circle>\n            <g transform="translate(175.000000, 449.000000)" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M0,347.097493 L0,4.90250696 L135.528311,4.90250696 C161.471024,4.90250696 183.639743,9.49741034 202.034469,18.6872171 C220.429194,27.8770239 234.46286,40.8541449 244.135466,57.6185803 C253.808072,74.3830156 258.644376,94.0714804 258.644376,116.683975 C258.644376,139.40786 253.724206,158.929238 243.883867,175.248107 C234.043527,191.566976 219.814173,204.070682 201.195803,212.759227 C182.577434,221.447772 160.073248,225.792044 133.683247,225.792044 L42.9396629,225.792044 L42.9396629,167.64563 L121.941933,167.64563 C135.807866,167.64563 147.325536,165.751973 156.494943,161.964659 C165.66435,158.177344 172.51345,152.496373 177.042243,144.921744 C181.571035,137.347116 183.835432,127.934526 183.835432,116.683975 C183.835432,105.322032 181.571035,95.7423543 177.042243,87.9449425 C172.51345,80.1475308 165.636395,74.2159282 156.411077,70.1501349 C147.185759,66.0843416 135.584222,64.051445 121.606467,64.051445 L72.6284142,64.051445 L72.6284142,347.097493 L0,347.097493 Z M185.512762,191.37204 L270.888889,347.097493 L190.712487,347.097493 L107.181424,191.37204 L185.512762,191.37204 Z"></path>\n                <polygon points="309.166667 347.097493 309.166667 4.90250696 540.126846 4.90250696 540.126846 64.5527072 381.634607 64.5527072 381.634607 146.091356 528.244113 146.091356 528.244113 205.741556 381.634607 205.741556 381.634607 287.447293 540.796296 287.447293 540.796296 347.097493"></polygon>\n                <path d="M901,124.638783 L827.757943,124.638783 C826.420189,115.158428 823.68894,106.709759 819.564197,99.2927757 C815.439454,91.8757921 810.144176,85.5462611 803.678363,80.3041825 C797.212549,75.0621039 789.77129,71.0468948 781.354585,68.2585551 C772.93788,65.4702155 763.824427,64.0760456 754.014228,64.0760456 C736.288981,64.0760456 720.849065,68.4537389 707.69448,77.2091255 C694.539894,85.964512 684.339516,98.6793409 677.093346,115.353612 C669.847176,132.027883 666.224091,152.243346 666.224091,176 C666.224091,200.425856 669.875046,220.948035 677.176956,237.56654 C684.478866,254.185044 694.707113,266.732573 707.861699,275.209125 C721.016285,283.685678 736.233242,287.923954 753.51257,287.923954 C763.21129,287.923954 772.213263,286.641318 780.518488,284.076046 C788.823714,281.510773 796.209233,277.746515 802.675047,272.78327 C809.14086,267.820025 814.519748,261.769328 818.81171,254.631179 C823.103672,247.493029 826.08575,239.351077 827.757943,230.205323 L901,230.539924 C899.104848,246.26616 894.394837,261.406844 886.869968,275.961977 C879.3451,290.51711 869.256201,303.510773 856.603274,314.942966 C843.950346,326.375158 828.900608,335.409379 811.45406,342.045627 C794.007513,348.681876 774.303504,352 752.342035,352 C721.796641,352 694.512024,345.084918 670.488184,331.254753 C646.464343,317.424588 627.512821,297.404309 613.633619,271.193916 C599.754416,244.983523 592.814815,213.252218 592.814815,176 C592.814815,138.636248 599.838026,106.849176 613.884448,80.6387833 C627.93087,54.4283904 646.993871,34.4359949 671.073451,20.661597 C695.153031,6.88719899 722.242559,0 752.342035,0 C772.185393,0 790.607387,2.78833967 807.608016,8.36501901 C824.608646,13.9416984 839.686254,22.0557668 852.840839,32.7072243 C865.995425,43.3586819 876.72533,56.3802281 885.030556,71.7718631 C893.335782,87.1634981 898.65893,104.785805 901,124.638783 Z"></path>\n            </g>\n        </g>\n    </g>\n</svg>':"recorderoff"===e?'<svg width="1251px" height="1251px" viewBox="0 0 1251 1251" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g class="bb-rec-on-circle" fill="#EEEEEE" fill-rule="nonzero">\n              <path d="M625.5,0 C970.954111,0 1251,280.045889 1251,625.5 C1251,970.954111 970.954111,1251 625.5,1251 C280.045889,1251 0,970.954111 0,625.5 C0,280.045889 280.045889,0 625.5,0 Z M626,124 C348.753056,124 124,348.753056 124,626 C124,903.246944 348.753056,1128 626,1128 C903.246944,1128 1128,903.246944 1128,626 C1128,348.753056 903.246944,124 626,124 Z"></path>\n          </g>\n          <g class="bb-rec-on-cont" fill="#E31810" transform="translate(86.000000, 86.000000)" fill-rule="nonzero">\n              <path d="M540,0 C241.2,0 0,241.2 0,540 C0,838.8 241.2,1080 540,1080 C838.8,1080 1080,838.8 1080,540 C1080,241.2 838.8,0 540,0 Z M777.6,741.6 C777.6,761.998 761.998,777.6 741.6,777.6 L338.4,777.6 C318.002,777.6 302.4,761.998 302.4,741.6 L302.4,338.4 C302.4,318.002 318.002,302.4 338.4,302.4 L741.6,302.4 C761.998,302.4 777.6,318.002 777.6,338.4 L777.6,741.6 Z"></path>\n          </g>\n      </g>\n  </svg>':"arrowdown"===e?'<svg class="bb-logo-arrowdown" fill="'.concat(t,'" width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n    <path d="m50 77.637c-1.3477 0-2.6953-0.51562-3.7266-1.543l-44.73-44.73c-2.0586-2.0586-2.0586-5.3945 0-7.4531 2.0586-2.0586 5.3945-2.0586 7.4531 0l41.004 41 41.004-41c2.0586-2.0586 5.3945-2.0586 7.4531 0 2.0586 2.0586 2.0586 5.3945 0 7.4531l-44.73 44.727c-1.0312 1.0312-2.3789 1.5469-3.7266 1.5469z"/>\n   </svg>'):"arrowleft"===e?'<svg fill="'.concat(t,'" width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n    <path d="m70.988 1.6211c2.1875-2.168 5.7344-2.168 7.9297 0 2.1836 2.168 2.1836 5.7227 0 7.8906l-46.016 40.445 46.016 40.5c2.1836 2.168 2.1836 5.668 0 7.8906-2.1953 2.168-5.7383 2.168-7.9297 0l-50.039-44.109c-1.168-1.168-1.668-2.7227-1.5898-4.2773-0.078125-1.5 0.42188-3.0547 1.5898-4.2227l50.039-44.109z" fill-rule="evenodd"/>\n   </svg>'):"close"===e?'<svg fill="'.concat(t,'" width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n    <path d="m72.812 33.02l-5.832-5.832-16.98 16.875-16.98-16.875-5.832 5.832 16.875 16.98-16.875 16.98 5.832 5.832 16.98-16.875 16.98 16.875 5.832-5.832-16.875-16.98z"/>\n   </svg>'):"undo"===e?'<svg width="62px" height="60px" viewBox="0 0 62 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n      <g class="bb-svg-path" transform="translate(-0.000500, 0.001926)" fill-rule="nonzero">\n        <path d="M28.0005,51.6270739 C24.9653,51.0684839 22.0825,49.8731739 19.5396,48.1192739 L13.8208,53.8380739 C17.9536,57.0060739 22.8403,59.0333739 28.0008,59.7286739 L28.0005,51.6270739 Z" id="Path"></path>\n        <path d="M2.2705,33.9980739 C2.96581,39.1582739 4.9932,44.0450739 8.1611,48.1780739 L13.8799,42.4592739 C12.126,39.9162739 10.9307,37.0334739 10.3721,33.9983739 L2.2705,33.9980739 Z" id="Path"></path>\n        <path d="M61.7305,33.9980739 L53.6289,33.9980739 C53.07031,37.0332739 51.875,39.9160739 50.1211,42.4589739 L55.8399,48.1777739 C59.0079,44.0449739 61.0352,39.1582739 61.7305,33.9977739 L61.7305,33.9980739 Z" id="Path"></path>\n        <path d="M4.0005,24.9980739 L24.0005,24.9980739 L24.0005,16.9980739 L14.27,16.9980739 C17.6762,12.3613739 22.7622,9.24417393 28.442,8.31057393 C34.1178,7.38088393 39.934,8.70901393 44.645,12.0175739 C49.352,15.3222739 52.5786,20.3417739 53.6294,25.9975739 L61.731,25.9975739 C60.6646,18.0834739 56.4888,10.9235739 50.129,6.09957393 C43.7657,1.27147393 35.746,-0.818426068 27.836,0.290973932 C19.9298,1.39647393 12.793,5.61127393 8,11.9979739 L8,0.997973932 L-3.55271368e-15,0.997973932 L-3.55271368e-15,20.9979739 C-3.55271368e-15,22.0604739 0.42188,23.0760739 1.1719,23.8260739 C1.92192,24.5760739 2.9375,24.9979739 4,24.9979739 L4.0005,24.9980739 Z" id="Path"></path>\n        <path d="M36.0005,51.6270739 L36.0005,59.7286739 C41.1607,59.0333639 46.0475,57.0059739 50.1805,53.8380739 L44.4617,48.1192739 C41.9187,49.8731739 39.0359,51.0684739 36.0008,51.6270739 L36.0005,51.6270739 Z" id="Path"></path>\n      </g>\n    </g>\n  </svg>':"circle-dot"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="'.concat(t,'" d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256-96a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>'):"circle-question"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="'.concat(t,'" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24V250.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1H222.6c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/></svg>'):"circle-info"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="'.concat(t,'" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216 192V224h24 48 24v24 88h8 24v48H296 216 192V336h24zm72-144H224V128h64v64z"/></svg>'):"circle-exclamation"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="'.concat(t,'" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm24-384v24V264v24H232V264 152 128h48zM232 368V320h48v48H232z"/></svg>'):"circle-up"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="'.concat(t,'" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM384 256H304V384H208V256H128V224L256 96 384 224v32z"/></svg>'):"circle-right"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="'.concat(t,'" d="M0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM256 384l0-80-128 0 0-96 128 0 0-80 32 0L416 256 288 384l-32 0z"/></svg>'):""};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,m(o.key),o)}}function g(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=h(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:String(t)}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"startTimestamp",Date.now()),g(this,"requestId",0),g(this,"requests",{}),g(this,"externalRequests",[]),g(this,"maxRequests",30),g(this,"filters",[]),g(this,"defaultBlacklist",["gleap.io"]),g(this,"blacklist",[]),g(this,"initialized",!1),g(this,"stopped",!1),g(this,"loadAllResources",!1)}var t,n,o;return t=e,n=[{key:"setLoadAllResources",value:function(e){this.loadAllResources=e}},{key:"isContentTypeSupported",value:function(e){if("string"!=typeof e)return!1;if(""===e)return!0;e=e.toLocaleLowerCase();for(var t=["text/","xml","json"],n=0;n<t.length;n++)if(e.includes(t[n]))return!0;return!1}},{key:"getRequests",value:function(){var e=JSON.parse(JSON.stringify(Object.values(this.requests)));if(this.externalRequests&&this.externalRequests.length>0&&(e=e.concat(this.externalRequests)),this.filters&&this.filters.length>0)for(var t=0;t<e.length;t++){var n=e[t];if(n&&n.request&&n.request.headers)for(var o=0;o<this.filters.length;o++)delete n.request.headers[this.filters[o]];if(n&&n.request&&n.request.payload){var r=n.request.payload;try{r=JSON.parse(n.request.payload)}catch(c){}if(r){for(o=0;o<this.filters.length;o++)delete r[this.filters[o]];n.request.payload=JSON.stringify(r)}}if(n&&n.response&&n.response.responseText)try{var i=JSON.parse(n.response.responseText);for(o=0;o<this.filters.length;o++)delete i[this.filters[o]];n.response.responseText=JSON.stringify(i)}catch(c){}}try{if("undefined"!=typeof window&&window.performance){var a=window.performance.getEntriesByType("resource");for(t=0;t<a.length;t++){var s=a[t];s&&s.name&&(this.loadAllResources||["xmlhttprequest","fetch"].indexOf(s.initiatorType)>-1)&&!e.find((function(e){return e.url===s.name}))&&e.push({type:"RESOURCE",date:new Date(this.startTimestamp+s.startTime),url:s.name,duration:Math.round(s.duration),initiatorType:s.initiatorType})}}}catch(u){}var l=this.blacklist.concat(this.defaultBlacklist);if(l&&l.length>0)try{e=e.filter((function(e){for(var t=0;t<l.length;t++)if(e&&e.url&&e.url.includes(l[t]))return!1;return!0}))}catch(u){}return e}},{key:"setMaxRequests",value:function(e){e>70&&(e=70),this.maxRequests=e}},{key:"setStopped",value:function(e){this.stopped=e}},{key:"setFilters",value:function(e){this.filters=this.filters.concat(e||[])}},{key:"setBlacklist",value:function(e){this.blacklist=this.blacklist.concat(e||[])}},{key:"cleanRequests",value:function(){var e=Object.keys(this.requests);if(e.length>this.maxRequests)for(var t=e.slice(0,e.length-this.maxRequests),n=0;n<t.length;n++)delete this.requests[t[n]]}},{key:"calcRequestTime",value:function(e){if(e&&this.requests&&this.requests[e]){var t=this.requests[e].date;t&&(this.requests[e].duration=(new Date).getTime()-t.getTime())}}},{key:"getTextContentSize",value:function(e){var t=0;try{t=(new TextEncoder).encode(e).length}catch(n){try{t=encodeURI(s).split(/%..|./).length-1}catch(n){try{t=new Blob([e]).size}catch(n){t=e.length}}}return t/1024/1024}},{key:"cleanupContentSize",value:function(e){return this.getTextContentSize(e)>.15?"<content_too_large>":e}},{key:"cleanupPayload",value:function(e){if(null==e)return"{}";try{if(void 0!==("undefined"==typeof TextDecoder?"undefined":h(TextDecoder))&&ArrayBuffer.isView(e))return(new TextDecoder).decode(e)}catch(t){}return e}},{key:"preparePayload",value:function(e){var t=this.cleanupPayload(e);return this.cleanupContentSize(t)}},{key:"start",value:function(){var e=this;if(!this.initialized){this.initialized=!0;var t=this;this.interceptNetworkRequests({onFetch:function(n,o){if(!e.stopped&&o&&e.requests){if(n.length>0&&void 0!==n[0]&&void 0!==n[0].url)e.requests[o]={url:n[0].url,date:new Date,request:{payload:"",headers:void 0!==n[0].headers?Object.fromEntries(n[0].headers.entries()):{}},type:void 0!==n[0].method?n[0].method:""};else if(n.length>=2&&n[1]){var r=n[1]&&n[1].method?n[1].method:"GET";e.requests[o]={request:{payload:t.preparePayload(n[1].body),headers:n[1].headers},type:r,url:n[0],date:new Date}}else e.requests[o]={url:n[0],date:new Date};e.cleanRequests()}},onFetchLoad:function(n,o){if(!e.stopped&&o&&e.requests&&e.requests[o]){try{e.requests[o].success=!0,e.requests[o].response={status:n.status,statusText:"",responseText:"<request_still_open>"},e.calcRequestTime(o)}catch(i){}try{var r="";n.headers&&void 0!==n.headers.get&&(r=n.headers.get("content-type")),e.isContentTypeSupported(r)?n.text().then((function(r){e.requests[o]&&(e.requests[o].success=!0,e.requests[o].response={status:n.status,statusText:n.statusText,responseText:t.cleanupContentSize(r)}),e.calcRequestTime(o),e.cleanRequests()})).catch((function(t){e.cleanRequests()})):(e.requests[o]&&(e.requests[o].success=!0,e.requests[o].response={status:n.status,statusText:n.statusText,responseText:"<content_type_not_supported>"}),e.calcRequestTime(o),e.cleanRequests())}catch(i){}}},onFetchFailed:function(t,n){!e.stopped&&n&&e.requests&&e.requests[n]&&(e.requests[n].success=!1,e.calcRequestTime(n),e.cleanRequests())},onOpen:function(t,n){e.stopped||(t&&t.bbRequestId&&n.length>=2&&e.requests&&(e.requests[t.bbRequestId]={type:n[0],url:n[1],date:new Date}),e.cleanRequests())},onSend:function(t,n){e.stopped||(t&&t.bbRequestId&&e.requests&&e.requests[t.bbRequestId]&&(e.requests[t.bbRequestId].request={payload:e.preparePayload(n.length>0?n[0]:"{}"),headers:t.requestHeaders}),e.cleanRequests())},onError:function(t,n){!e.stopped&&e.requests&&t&&t.currentTarget&&t.currentTarget.bbRequestId&&e.requests[t.currentTarget.bbRequestId]&&(e.requests[t.currentTarget.bbRequestId].success=!1,e.calcRequestTime(t.bbRequestId)),e.cleanRequests()},onLoad:function(t,n){if(!e.stopped){if(t&&t.currentTarget&&t.currentTarget.bbRequestId&&e.requests&&e.requests[t.currentTarget.bbRequestId]){var o=t.currentTarget,r=o.responseType,i="<"+r+">";""!==r&&"text"!==r||(i=e.cleanupContentSize(o.responseText)),e.requests[o.bbRequestId].success=!0,e.requests[o.bbRequestId].response={status:o.status,statusText:o.statusText,responseText:i},e.calcRequestTime(o.bbRequestId)}e.cleanRequests()}}})}}},{key:"interceptNetworkRequests",value:function(e){var t,n=this,o=XMLHttpRequest.prototype.open,r=XMLHttpRequest.prototype.send;return void 0===XMLHttpRequest.prototype.gleapSetRequestHeader&&(XMLHttpRequest.prototype.gleapSetRequestHeader=XMLHttpRequest.prototype.setRequestHeader),XMLHttpRequest.prototype.gleapSetRequestHeader&&(XMLHttpRequest.prototype.setRequestHeader=function(e,t){this.requestHeaders||(this.requestHeaders={}),this.requestHeaders&&this.requestHeaders.hasOwnProperty(e)||(this.requestHeaders[e]||(this.requestHeaders[e]=[]),this.requestHeaders[e].push(t),this.gleapSetRequestHeader(e,t))}),XMLHttpRequest.prototype.open=function(){return this.bbRequestId=++n.requestId,e.onOpen&&e.onOpen(this,arguments),e.onLoad&&this.addEventListener("load",e.onLoad.bind(e)),e.onError&&this.addEventListener("error",e.onError.bind(e)),o.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){return e.onSend&&e.onSend(this,arguments),r.apply(this,arguments)},window.fetch&&(t=window.fetch,window.fetch=function(){var o=++n.requestId;return e.onFetch(arguments,o),t.apply(this,arguments).then((function(t){if(t&&"function"==typeof t.clone){var n=t.clone();e.onFetchLoad(n,o)}return t})).catch((function(t){throw e.onFetchFailed(t,o),t}))}),e}},{key:"blobToTextPromise",value:function(e){return new Promise((function(t,n){var o=new FileReader;o.onload=function(e){e&&e.target&&e.target.result?t(e.target.result):n()},o.onerror=function(e){n(e)},o.readAsText(e)}))}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&f(t.prototype,n),o&&f(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();g(v,"instance",void 0);const y=v;var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400;return new Promise((function(o,r){var i=0===e.indexOf("data:image/jpeg"),a=new Image;a.src=e,a.onerror=function(){r()},a.onload=function(){var e=document.createElement("canvas"),r=t,s=n;t>a.width/1.5&&(r=a.width/1.5),n>a.height/1.5&&(s=a.height/1.5);var l=a.width,c=a.height;l>c?l>r&&(c*=r/l,l=r):c>s&&(l*=s/c,c=s),e.width=l,e.height=c,e.getContext("2d").drawImage(a,0,0,l,c),o(i?e.toDataURL("image/jpeg",.7):e.toDataURL())}}))},w=/(android|iphone|ipod|ipad|blackberry|iemobile|opera mini|webos)/i,k=function(){return x()?"mobile":"desktop"},x=function(){if("undefined"==typeof window)return!1;try{var e="undefined"!=typeof navigator?navigator:void 0;if(null!=e&&e.userAgentData&&"boolean"==typeof e.userAgentData.mobile&&null!==e.userAgentData.mobile)return e.userAgentData.mobile;if(e&&w.test(e.userAgent||e.vendor||""))return!0;if((null==e?void 0:e.maxTouchPoints)>1&&window.matchMedia){var t=window.matchMedia("(hover: none) and (pointer: coarse)");if(null!=t&&t.matches)return!0}}catch(n){}return!1},S=function(e){if(!e)return{};if("string"==typeof e||e instanceof String)try{return JSON.parse(e)}catch(t){return{}}return e},C=function(e,t){return e.length>t?e.slice(0,t)+"...":e},I=function(e){try{var t=e.split("."),n=!1,o=t[t.length-2];return"co"!==o&&"com"!==o&&"gv"!==o&&"ac"!==o&&"edu"!==o&&"gov"!==o&&"mil"!==o&&"net"!==o&&"org"!==o||(n=!0),(t=t.slice(n?-3:-2)).join(".")}catch(r){}return e},E=function(e){try{var t=localStorage.getItem("gleap-widget-".concat(e));if(t)return JSON.parse(t)}catch(n){}return null},T=function(e,t){var n="gleap-widget-".concat(e);if(t)try{localStorage.setItem(n,JSON.stringify(t))}catch(o){}else localStorage.removeItem(n)},L=function(e){"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("DOMContentLoaded",(function(){e()}))};function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,R(o.key),o)}}function M(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=O(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:String(t)}var P="success",D="error",N=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),M(this,"validationRequests",new Map),M(this,"validationCache",new Map),M(this,"fetchRequests",new Map),M(this,"fetchCache",new Map),e.instance)return e.instance;e.instance=this}var t,n,o;return t=e,n=[{key:"clearCache",value:function(){this.validationCache.clear(),this.fetchCache.clear(),this.validationRequests.clear(),this.fetchRequests.clear()}},{key:"_getQueryParams",value:function(){var e=nt.getInstance(),t=null==e?void 0:e.session,n=Sh.getInstance().getActiveLanguage()||"en";return"gleapId=".concat((null==t?void 0:t.gleapId)||"","&gleapHash=").concat((null==t?void 0:t.gleapHash)||"","&lang=").concat(n)}},{key:"_getApiUrl",value:function(){var e=nt.getInstance();return(null==e?void 0:e.apiUrl)||null}},{key:"_makeRequest",value:function(e,t,n){return new Promise((function(o,r){var i=new XMLHttpRequest;i.open(e,t);var a=nt.getInstance();null==a||a.injectSession(i),n&&i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=function(){if(4===i.readyState)if(i.status>=200&&i.status<300)try{var e=i.responseText?JSON.parse(i.responseText):null;o(e)}catch(t){r({status:i.status,statusText:"JSON Parse Error",responseText:i.responseText,error:t})}else r({status:i.status,statusText:i.statusText,responseText:i.responseText})},i.onerror=function(){r({status:0,statusText:"Network Error",responseText:null})},i.send(n?JSON.stringify(n):null)}))}},{key:"_createCacheKey",value:function(e,t){return t?"".concat(e,"::").concat(t):e}},{key:"validateChecklist",value:function(e,t){var n=this,o=this._createCacheKey(e,t),r=this.validationCache.get(o);if(r)return r.status===P?Promise.resolve(r.internalId):Promise.reject(r.error);if(this.validationRequests.has(o))return this.validationRequests.get(o);var i=this._getApiUrl();if(!i){var a=new Error("ChecklistNetworkManager: Gleap API URL not configured.");return this.validationCache.set(o,{status:D,error:a}),Promise.reject(a)}var s="".concat(i,"/outbound/checklists?").concat(this._getQueryParams()),l=this._makeRequest("POST",s,{outboundId:e,sharedKey:t}).then((function(e){if(e&&e.id)return n.validationCache.set(o,{status:P,internalId:e.id}),e.id;var t=new Error("Validation response missing checklist ID.");throw n.validationCache.set(o,{status:D,error:e||t}),t})).catch((function(e){throw n.validationCache.set(o,{status:D,error:e}),e})).finally((function(){n.validationRequests.delete(o)}));return this.validationRequests.set(o,l),l}},{key:"fetchChecklist",value:function(e){var t=this,n=this.fetchCache.get(e);if(n)return n.status===P?Promise.resolve(JSON.parse(JSON.stringify(n.data))):Promise.reject(n.error);if(this.fetchRequests.has(e))return this.fetchRequests.get(e).then((function(e){return JSON.parse(JSON.stringify(e))}));var o=this._getApiUrl();if(!o){var r=new Error("ChecklistNetworkManager: Gleap API URL not configured.");return this.fetchCache.set(e,{status:D,error:r}),Promise.reject(r)}var i="".concat(o,"/outbound/checklists/").concat(e,"?convertTipTap=true&").concat(this._getQueryParams()),a=this._makeRequest("GET",i,null).then((function(n){if(n)return t.fetchCache.set(e,{status:P,data:n}),JSON.parse(JSON.stringify(n));var o=new Error("Empty response received for checklist fetch.");throw t.fetchCache.set(e,{status:D,error:n||o}),o})).catch((function(n){throw t.fetchCache.set(e,{status:D,error:n}),n})).finally((function(){t.fetchRequests.delete(e)}));return this.fetchRequests.set(e,a),a.then((function(e){return JSON.parse(JSON.stringify(e))}))}}],o=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],n&&A(t.prototype,n),o&&A(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();M(N,"instance",null);const j=N,F=Math.min,B=Math.max,_=Math.round,U=Math.floor,H=e=>({x:e,y:e}),z={left:"right",right:"left",bottom:"top",top:"bottom"},q={start:"end",end:"start"};function W(e,t,n){return B(e,F(t,n))}function V(e,t){return"function"==typeof e?e(t):e}function G(e){return e.split("-")[0]}function Y(e){return e.split("-")[1]}function X(e){return"x"===e?"y":"x"}function K(e){return"y"===e?"height":"width"}function J(e){return["top","bottom"].includes(G(e))?"y":"x"}function Z(e){return X(J(e))}function $(e){return e.replace(/start|end/g,(e=>q[e]))}function Q(e){return e.replace(/left|right|bottom|top/g,(e=>z[e]))}function ee(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function te(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function ne(e,t,n){let{reference:o,floating:r}=e;const i=J(t),a=Z(t),s=K(a),l=G(t),c="y"===i,u=o.x+o.width/2-r.width/2,d=o.y+o.height/2-r.height/2,p=o[s]/2-r[s]/2;let h;switch(l){case"top":h={x:u,y:o.y-r.height};break;case"bottom":h={x:u,y:o.y+o.height};break;case"right":h={x:o.x+o.width,y:d};break;case"left":h={x:o.x-r.width,y:d};break;default:h={x:o.x,y:o.y}}switch(Y(t)){case"start":h[a]-=p*(n&&c?-1:1);break;case"end":h[a]+=p*(n&&c?-1:1)}return h}async function oe(e,t){var n;void 0===t&&(t={});const{x:o,y:r,platform:i,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=V(t,e),f=ee(h),g=s[p?"floating"===d?"reference":"floating":d],m=te(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(g)))||n?g:g.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{...a.floating,x:o,y:r}:a.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},w=te(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:v,offsetParent:y,strategy:l}):v);return{top:(m.top-w.top+f.top)/b.y,bottom:(w.bottom-m.bottom+f.bottom)/b.y,left:(m.left-w.left+f.left)/b.x,right:(w.right-m.right+f.right)/b.x}}const re=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:r,y:i,placement:a,middlewareData:s}=t,l=await async function(e,t){const{placement:n,platform:o,elements:r}=e,i=await(null==o.isRTL?void 0:o.isRTL(r.floating)),a=G(n),s=Y(n),l="y"===J(n),c=["left","top"].includes(a)?-1:1,u=i&&l?-1:1,d=V(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&"number"==typeof f&&(h="end"===s?-1*f:f),l?{x:h*u,y:p*c}:{x:p*c,y:h*u}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(o=s.arrow)&&o.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:a}}}}};function ie(e){return le(e)?(e.nodeName||"").toLowerCase():"#document"}function ae(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function se(e){var t;return null==(t=(le(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function le(e){return e instanceof Node||e instanceof ae(e).Node}function ce(e){return e instanceof Element||e instanceof ae(e).Element}function ue(e){return e instanceof HTMLElement||e instanceof ae(e).HTMLElement}function de(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof ae(e).ShadowRoot)}function pe(e){const{overflow:t,overflowX:n,overflowY:o,display:r}=ve(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(r)}function he(e){return["table","td","th"].includes(ie(e))}function fe(e){const t=ge(),n=ve(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function ge(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function me(e){return["html","body","#document"].includes(ie(e))}function ve(e){return ae(e).getComputedStyle(e)}function ye(e){return ce(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function be(e){if("html"===ie(e))return e;const t=e.assignedSlot||e.parentNode||de(e)&&e.host||se(e);return de(t)?t.host:t}function we(e){const t=be(e);return me(t)?e.ownerDocument?e.ownerDocument.body:e.body:ue(t)&&pe(t)?t:we(t)}function ke(e,t,n){var o;void 0===t&&(t=[]),void 0===n&&(n=!0);const r=we(e),i=r===(null==(o=e.ownerDocument)?void 0:o.body),a=ae(r);return i?t.concat(a,a.visualViewport||[],pe(r)?r:[],a.frameElement&&n?ke(a.frameElement):[]):t.concat(r,ke(r,[],n))}function xe(e){const t=ve(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=ue(e),i=r?e.offsetWidth:n,a=r?e.offsetHeight:o,s=_(n)!==i||_(o)!==a;return s&&(n=i,o=a),{width:n,height:o,$:s}}function Se(e){return ce(e)?e:e.contextElement}function Ce(e){const t=Se(e);if(!ue(t))return H(1);const n=t.getBoundingClientRect(),{width:o,height:r,$:i}=xe(t);let a=(i?_(n.width):n.width)/o,s=(i?_(n.height):n.height)/r;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const Ie=H(0);function Ee(e){const t=ae(e);return ge()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Ie}function Te(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=e.getBoundingClientRect(),i=Se(e);let a=H(1);t&&(o?ce(o)&&(a=Ce(o)):a=Ce(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==ae(e))&&t}(i,n,o)?Ee(i):H(0);let l=(r.left+s.x)/a.x,c=(r.top+s.y)/a.y,u=r.width/a.x,d=r.height/a.y;if(i){const e=ae(i),t=o&&ce(o)?ae(o):o;let n=e,r=n.frameElement;for(;r&&o&&t!==n;){const e=Ce(r),t=r.getBoundingClientRect(),o=ve(r),i=t.left+(r.clientLeft+parseFloat(o.paddingLeft))*e.x,a=t.top+(r.clientTop+parseFloat(o.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=i,c+=a,n=ae(r),r=n.frameElement}}return te({width:u,height:d,x:l,y:c})}const Le=[":popover-open",":modal"];function Oe(e){return Le.some((t=>{try{return e.matches(t)}catch(n){return!1}}))}function Ae(e){return Te(se(e)).left+ye(e).scrollLeft}function Me(e,t,n){let o;if("viewport"===t)o=function(e,t){const n=ae(e),o=se(e),r=n.visualViewport;let i=o.clientWidth,a=o.clientHeight,s=0,l=0;if(r){i=r.width,a=r.height;const e=ge();(!e||e&&"fixed"===t)&&(s=r.offsetLeft,l=r.offsetTop)}return{width:i,height:a,x:s,y:l}}(e,n);else if("document"===t)o=function(e){const t=se(e),n=ye(e),o=e.ownerDocument.body,r=B(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),i=B(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let a=-n.scrollLeft+Ae(e);const s=-n.scrollTop;return"rtl"===ve(o).direction&&(a+=B(t.clientWidth,o.clientWidth)-r),{width:r,height:i,x:a,y:s}}(se(e));else if(ce(t))o=function(e,t){const n=Te(e,!0,"fixed"===t),o=n.top+e.clientTop,r=n.left+e.clientLeft,i=ue(e)?Ce(e):H(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:r*i.x,y:o*i.y}}(t,n);else{const n=Ee(e);o={...t,x:t.x-n.x,y:t.y-n.y}}return te(o)}function Re(e,t){const n=be(e);return!(n===t||!ce(n)||me(n))&&("fixed"===ve(n).position||Re(n,t))}function Pe(e,t,n){const o=ue(t),r=se(t),i="fixed"===n,a=Te(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=H(0);if(o||!o&&!i)if(("body"!==ie(t)||pe(r))&&(s=ye(t)),o){const e=Te(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&(l.x=Ae(r));return{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function De(e,t){return ue(e)&&"fixed"!==ve(e).position?t?t(e):e.offsetParent:null}function Ne(e,t){const n=ae(e);if(!ue(e)||Oe(e))return n;let o=De(e,t);for(;o&&he(o)&&"static"===ve(o).position;)o=De(o,t);return o&&("html"===ie(o)||"body"===ie(o)&&"static"===ve(o).position&&!fe(o))?n:o||function(e){let t=be(e);for(;ue(t)&&!me(t);){if(fe(t))return t;t=be(t)}return null}(e)||n}const je={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:o,strategy:r}=e;const i="fixed"===r,a=se(o),s=!!t&&Oe(t.floating);if(o===a||s&&i)return n;let l={scrollLeft:0,scrollTop:0},c=H(1);const u=H(0),d=ue(o);if((d||!d&&!i)&&(("body"!==ie(o)||pe(a))&&(l=ye(o)),ue(o))){const e=Te(o);c=Ce(o),u.x=e.x+o.clientLeft,u.y=e.y+o.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}},getDocumentElement:se,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:r}=e;const i="clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let o=ke(e,[],!1).filter((e=>ce(e)&&"body"!==ie(e))),r=null;const i="fixed"===ve(e).position;let a=i?be(e):e;for(;ce(a)&&!me(a);){const t=ve(a),n=fe(a);n||"fixed"!==t.position||(r=null),(i?!n&&!r:!n&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||pe(a)&&!n&&Re(e,a))?o=o.filter((e=>e!==a)):r=t,a=be(a)}return t.set(e,o),o}(t,this._c):[].concat(n),a=[...i,o],s=a[0],l=a.reduce(((e,n)=>{const o=Me(t,n,r);return e.top=B(o.top,e.top),e.right=F(o.right,e.right),e.bottom=F(o.bottom,e.bottom),e.left=B(o.left,e.left),e}),Me(t,s,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:Ne,getElementRects:async function(e){const t=this.getOffsetParent||Ne,n=this.getDimensions;return{reference:Pe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=xe(e);return{width:t,height:n}},getScale:Ce,isElement:ce,isRTL:function(e){return"rtl"===ve(e).direction}};function Fe(e,t,n,o){void 0===o&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=o,c=Se(e),u=r||i?[...c?ke(c):[],...ke(t)]:[];u.forEach((e=>{r&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const d=c&&s?function(e,t){let n,o=null;const r=se(e);function i(){var e;clearTimeout(n),null==(e=o)||e.disconnect(),o=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),i();const{left:c,top:u,width:d,height:p}=e.getBoundingClientRect();if(s||t(),!d||!p)return;const h={rootMargin:-U(u)+"px "+-U(r.clientWidth-(c+d))+"px "+-U(r.clientHeight-(u+p))+"px "+-U(c)+"px",threshold:B(0,F(1,l))||1};let f=!0;function g(e){const t=e[0].intersectionRatio;if(t!==l){if(!f)return a();t?a(!1,t):n=setTimeout((()=>{a(!1,1e-7)}),100)}f=!1}try{o=new IntersectionObserver(g,{...h,root:r.ownerDocument})}catch(m){o=new IntersectionObserver(g,h)}o.observe(e)}(!0),i}(c,n):null;let p,h=-1,f=null;a&&(f=new ResizeObserver((e=>{let[o]=e;o&&o.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),n()})),c&&!l&&f.observe(c),f.observe(t));let g=l?Te(e):null;return l&&function t(){const o=Te(e);!g||o.x===g.x&&o.y===g.y&&o.width===g.width&&o.height===g.height||n();g=o,p=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{r&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const Be=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:r}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=V(e,t),c={x:n,y:o},u=await oe(t,l),d=J(G(r)),p=X(d);let h=c[p],f=c[d];if(i){const e="y"===p?"bottom":"right";h=W(h+u["y"===p?"top":"left"],h,h-u[e])}if(a){const e="y"===d?"bottom":"right";f=W(f+u["y"===d?"top":"left"],f,f-u[e])}const g=s.fn({...t,[p]:h,[d]:f});return{...g,data:{x:g.x-n,y:g.y-o}}}}},_e=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:r,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0,...m}=V(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const v=G(r),y=G(s)===s,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=p||(y||!g?[Q(s)]:function(e){const t=Q(e);return[$(e),t,$(t)]}(s));p||"none"===f||w.push(...function(e,t,n,o){const r=Y(e);let i=function(e,t,n){const o=["left","right"],r=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:o:t?o:r;case"left":case"right":return t?i:a;default:return[]}}(G(e),"start"===n,o);return r&&(i=i.map((e=>e+"-"+r)),t&&(i=i.concat(i.map($)))),i}(s,g,f,b));const k=[s,...w],x=await oe(t,m),S=[];let C=(null==(o=i.flip)?void 0:o.overflows)||[];if(u&&S.push(x[v]),d){const e=function(e,t,n){void 0===n&&(n=!1);const o=Y(e),r=Z(e),i=K(r);let a="x"===r?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=Q(a)),[a,Q(a)]}(r,a,b);S.push(x[e[0]],x[e[1]])}if(C=[...C,{placement:r,overflows:S}],!S.every((e=>e<=0))){var I,E;const e=((null==(I=i.flip)?void 0:I.index)||0)+1,t=k[e];if(t)return{data:{index:e,overflows:C},reset:{placement:t}};let n=null==(E=C.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:E.placement;if(!n)switch(h){case"bestFit":{var T;const e=null==(T=C.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:T[0];e&&(n=e);break}case"initialPlacement":n=s}if(r!==n)return{reset:{placement:n}}}return{}}}},Ue=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:r,rects:i,platform:a,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=V(e,t)||{};if(null==c)return{};const d=ee(u),p={x:n,y:o},h=Z(r),f=K(h),g=await a.getDimensions(c),m="y"===h,v=m?"top":"left",y=m?"bottom":"right",b=m?"clientHeight":"clientWidth",w=i.reference[f]+i.reference[h]-p[h]-i.floating[f],k=p[h]-i.reference[h],x=await(null==a.getOffsetParent?void 0:a.getOffsetParent(c));let S=x?x[b]:0;S&&await(null==a.isElement?void 0:a.isElement(x))||(S=s.floating[b]||i.floating[f]);const C=w/2-k/2,I=S/2-g[f]/2-1,E=F(d[v],I),T=F(d[y],I),L=E,O=S-g[f]-T,A=S/2-g[f]/2+C,M=W(L,A,O),R=!l.arrow&&null!=Y(r)&&A!==M&&i.reference[f]/2-(A<L?E:T)-g[f]/2<0,P=R?A<L?A-L:A-O:0;return{[h]:p[h]+P,data:{[h]:M,centerOffset:A-M-P,...R&&{alignmentOffset:P}},reset:R}}}),He=(e,t,n)=>{const o=new Map,r={platform:je,...n},i={...r.platform,_c:o};return(async(e,t,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=ne(c,o,l),p=o,h={},f=0;for(let g=0;g<s.length;g++){const{name:n,fn:i}=s[g],{x:m,y:v,data:y,reset:b}=await i({x:u,y:d,initialPlacement:o,placement:p,strategy:r,middlewareData:h,rects:c,platform:a,elements:{reference:e,floating:t}});u=null!=m?m:u,d=null!=v?v:d,h={...h,[n]:{...h[n],...y}},b&&f<=50&&(f++,"object"==typeof b&&(b.placement&&(p=b.placement),b.rects&&(c=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:r}):b.rects),({x:u,y:d}=ne(c,p,l))),g=-1)}return{x:u,y:d,placement:p,strategy:r,middlewareData:h}})(e,t,{...r,platform:i})};var ze=function(e,t,n){if(!e||!t||!n)return!0;var o=function(e){return e.replace(/\/$/,"")},r=function(e,t){if(!e||!t)return!1;try{if(e.includes(t))return!0}catch(o){}var n=function(e){if(!e)return null;try{e.startsWith("/")&&(e=e.substring(1));var t=e.replace(/{\w+}/g,"___PLACEHOLDER___");return t=(t=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).replace(/___PLACEHOLDER___/g,"[^&?]+"),new RegExp(t,"i")}catch(o){return null}}(t);if(!n)return!1;try{return n.test(e)}catch(o){return!1}},i=!1;switch(n){case"is":i=o(e)===o(t);break;case"isnot":i=o(e)!==o(t);break;case"contains":i=r(e,t);break;case"startswith":i=e.startsWith(t);break;case"endswith":i=e.endsWith(t);break;case"notcontains":i=!r(e,t);break;default:i=!1}return i};function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function We(e){return function(e){if(Array.isArray(e))return Ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Ge(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Xe(o.key),o)}}function Ye(e,t,n){return(t=Xe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(e){var t=function(e,t){if("object"!=qe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=qe(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qe(t)?t:String(t)}var Ke=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ye(this,"tooltips",[]),Ye(this,"filteredTooltips",[]),Ye(this,"lastUrl",null),Ye(this,"elementToFloatingUIMap",new WeakMap),Ye(this,"elementToTooltipMap",new WeakMap),Ye(this,"nextId",0),Ye(this,"linkTooltip",(function(e,n){if(!e.hasAttribute("data-gleap-tooltip")){var o=t.nextId++;if(e.setAttribute("data-gleap-tooltip",o),e){var r=null;if("hotspot"===n.mode){var i=document.createElement("div");i.setAttribute("data-gleap-tooltip-anchor",o),i.classList.add("gleap-tooltip-anchor"),e.setAttribute("data-gleap-tooltip-mode","hotspot"),t.canEmbed(e)?e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i):e.parentNode.insertBefore(i,e.nextSibling);var a=document.createElement("div");a.classList.add("gleap-tooltip-hotspot"),a.setAttribute("data-gleap-tooltip-hotspot",o),a.innerHTML="".concat(p(n.icon,n.color)).concat(n.animated?'<div style="background-color: '.concat(n.color,'" class="gleap-tooltip-hotspot-animation"></div>'):""),i.appendChild(a),t.repositionHotspot(e,n),r=a,t.elementToTooltipMap.set(e,n)}else r=e;var s=t.createTooltip(r,n.html,n);t.elementToFloatingUIMap.set(e,s)}}})),Ye(this,"updateFilteredTooltips",(function(){t.filteredTooltips=t.getFilteredTooltips(),t.checkForTooltips()})),Ye(this,"getFilteredTooltips",(function(){if(!t.tooltips)return[];var e=window.location.href;return t.tooltips.filter((function(t){return!t.page||0===t.page.length||!!ze(e,t.page,t.pageType)}))})),Ye(this,"checkForTooltips",(function(){for(var e=0;e<t.filteredTooltips.length;e++){var n=t.filteredTooltips[e];try{for(var o=document.querySelectorAll(n.selector),r=0;r<o.length;r++){var i=o[r];i&&t.linkTooltip(i,n)}}catch(a){}}})),Ye(this,"load",(function(){var e=t,n=nt.getInstance(),o=new XMLHttpRequest;o.open("GET",n.apiUrl+"/config/"+n.sdkKey+"/tooltips"),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("Api-Token",n.sdkKey);try{o.setRequestHeader("Gleap-Id",n.session.gleapId),o.setRequestHeader("Gleap-Hash",n.session.gleapHash)}catch(r){}o.onerror=function(){console.error("Failed to fetch tooltips")},o.onreadystatechange=function(t){if(4===o.readyState&&200===o.status)try{e.tooltips=JSON.parse(o.responseText),e.updateFilteredTooltips()}catch(r){console.error("Failed to parse tooltips",r)}},o.send()}))}var t,n,o;return t=e,n=[{key:"processNodeInsertion",value:function(e){var t=this;e.nodeType===Node.ELEMENT_NODE&&(this.checkNodeTooltip(e),e.childNodes&&e.childNodes.forEach((function(e){t.processNodeInsertion(e)})))}},{key:"checkNodeTooltip",value:function(e){var t=this;this.filteredTooltips.length>0&&this.filteredTooltips.forEach((function(n){n.selector&&e.matches(n.selector)&&t.linkTooltip(e,n)}))}},{key:"start",value:function(){var e=this,t=this;if(window){var n,o,r,i=(n=t.updateHotspotPositions.bind(t),o=250,r=null,function(){if(!r){var e=this,t=arguments;r=setTimeout((function(){n.call.apply(n,[e].concat(We(t))),r=null}),o)}});window.addEventListener("resize",i),window.requestAnimationFrame((function(){e.observer=new MutationObserver((function(n){t.lastUrl!==window.location.href&&(t.lastUrl=window.location.href,t.filteredTooltips=t.getFilteredTooltips()),n.forEach((function(n){if("attributes"===n.type){var o=n.target;o.nodeType===Node.ELEMENT_NODE&&(o.querySelector("[data-gleap-tooltip-hotspot]")||o.hasAttribute("data-gleap-tooltip-mode")||o.hasAttribute("data-gleap-tooltip"))&&t.updateHotspotPositions()}n.addedNodes.forEach((function(e){e.nodeType===Node.ELEMENT_NODE&&t.processNodeInsertion(e)})),n.removedNodes.forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE&&e.elementToFloatingUIMap.has(t)){var n=e.elementToFloatingUIMap.get(t);n&&(n.tooltip&&n.tooltip.remove(),n.cleanup(),e.elementToFloatingUIMap.delete(t))}e.elementToTooltipMap.has(t)&&e.elementToTooltipMap.delete(t)}))}))})),e.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]})}))}}},{key:"updateHotspotPositions",value:function(){var e=this;document.querySelectorAll("[data-gleap-tooltip-mode='hotspot']").forEach((function(t){var n=e.elementToTooltipMap.get(t);n&&e.repositionHotspot(t,n)}))}},{key:"createTooltip",value:function(e,t,n){var o=document.createElement("div");o.className="gleap-tooltip",o.innerHTML='<div class="gleap-tooltip-inner">\n            '.concat(t,'\n            <div class="gleap-tooltip-arrow">\n                <svg width="116" height="56" viewBox="0 0 116 56" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M57.75 0.74998L115.5 0.680177L66.8726 49.3076C61.7958 54.3844 53.5646 54.3844 48.4878 49.3076L4.05618e-05 0.819784L57.75 0.74998Z" fill="white"/>\n                </svg>\n            </div>\n        </div>'),document.body.appendChild(o);var r,i=o.querySelector(".gleap-tooltip-arrow"),a=Fe(e,o,(function(){He(e,o,{placement:"left"===n.posX?"left":"right",middleware:[re(10),_e(),Be(),Ue({element:i})]}).then((function(e){var t=e.x,n=e.y,r=e.middlewareData,a=e.placement;try{if(Object.assign(o.style,{left:"".concat(t,"px"),top:"".concat(n,"px")}),r.arrow){var s={left:"",top:"",transform:""};null!=r.arrow.x&&(s.left="".concat(r.arrow.x,"px"),"bottom"===a?(s.transform="translateY(-7px) rotate(180deg)",s.top="".concat(-20,"px")):"top"===a&&(s.transform="translateY(7px) rotate(0deg)",s.top="100%")),null!=r.arrow.y&&(s.top="".concat(r.arrow.y,"px"),"right"===a?(s.transform="translateX(-7px) rotate(90deg)",s.left="".concat(-20,"px")):"left"===a&&(s.transform="translateX(7px) rotate(270deg)",s.left="100%")),Object.assign(i.style,s)}}catch(l){}}))}));function s(){clearTimeout(r),o.style.visibility="visible",o.style.opacity="1",o.style.pointerEvents="auto"}function l(){r=setTimeout((function(){o.style.opacity="0",setTimeout((function(){o.style.visibility="hidden",o.style.pointerEvents="none"}),200)}),500)}return e.addEventListener("mouseenter",s),e.addEventListener("mouseleave",l),o.addEventListener("mouseenter",s),o.addEventListener("mouseleave",l),{cleanup:a,tooltip:o}}},{key:"canEmbed",value:function(e){var t=new Set(["area","base","br","embed","hr","img","input","source","track","wbr","canvas"]);return e&&!t.has(e.tagName.toLowerCase())}},{key:"destroy",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null),document.querySelectorAll(".gleap-tooltip").forEach((function(e){return e.remove()})),document.querySelectorAll("[data-gleap-tooltip-anchor]").forEach((function(e){return e.remove()})),document.querySelectorAll("[data-gleap-tooltip-hotspot]").forEach((function(e){return e.remove()})),document.querySelectorAll("[data-gleap-tooltip]").forEach((function(e){return e.removeAttribute("data-gleap-tooltip")})),document.querySelectorAll("[data-gleap-tooltip-mode]").forEach((function(e){return e.removeAttribute("data-gleap-tooltip-mode")})),this.elementToFloatingUIMap=new WeakMap,this.elementToTooltipMap=new WeakMap,this.tooltips=[],this.filteredTooltips=[]}},{key:"repositionHotspot",value:function(e,t){if(e&&t){var n=e.getAttribute("data-gleap-tooltip");if(n){var o=document.querySelector('[data-gleap-tooltip-hotspot="'.concat(n,'"]'));if(o){t.posX||(t.posX="right"),t.posY||(t.posY="center"),t.offsetX||(t.offsetX=4),t.offsetY||(t.offsetY=0);var r=e.getBoundingClientRect();try{var i=document.createRange();i.selectNodeContents(e);var a=window.getComputedStyle(e),s=i.getBoundingClientRect().width+parseFloat(a.paddingLeft);s<r.width&&(r.width=s)}catch(h){}var l=document.querySelector('[data-gleap-tooltip-anchor="'.concat(n,'"]')).getBoundingClientRect(),c=l.left-r.left,u=l.top-r.top,d=0,p=0;switch(t.posX){case"left":p=-1*(t.offsetX+17);break;case"right":p=r.width+t.offsetX}switch(t.posY){case"top":d=0+t.offsetY;break;case"bottom":d=r.height-17+t.offsetY;break;case"center":d=r.height/2-8.5+t.offsetY}o&&(o.style.position="absolute",o.style.top=d-u+"px",o.style.left=p-c+"px")}}}}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e,this.instance.start()),this.instance}}],n&&Ge(t.prototype,n),o&&Ge(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,tt(o.key),o)}}function et(e,t,n){return(t=tt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e){var t=function(e,t){if("object"!=Je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Je(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Je(t)?t:String(t)}Ye(Ke,"instance",void 0);var nt=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),et(this,"apiUrl","https://api.gleap.io"),et(this,"wsApiUrl","wss://ws.gleap.io"),et(this,"sdkKey",null),et(this,"updatingSession",!1),et(this,"useCookies",!1),et(this,"session",{gleapId:null,gleapHash:null,name:"",email:"",userId:"",phone:"",value:0}),et(this,"ready",!1),et(this,"onSessionReadyListener",[]),et(this,"setOnSessionReady",(function(e){t.ready?e():t.onSessionReadyListener.push(e)})),et(this,"injectSession",(function(e){e&&t.session&&(e.setRequestHeader("Api-Token",t.sdkKey),e.setRequestHeader("Gleap-Id",t.session.gleapId),e.setRequestHeader("Gleap-Hash",t.session.gleapHash))})),et(this,"clearSession",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.session&&t.session.gleapHash&&On.notifyEvent("unregister-pushmessage-group","gleapuser-".concat(t.session.gleapHash));try{T("session-".concat(t.sdkKey),null)}catch(r){}if(t.useCookies)try{!function(e){try{var t=I(window.location.host.split(":")[0]);document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; Domain="+t}catch(r){}}("session-".concat(t.sdkKey))}catch(r){}if(t.ready=!1,t.session={gleapId:null,gleapHash:null,name:"",email:"",userId:"",phone:"",value:0},Qt.getInstance().sendMessage({name:"session-cleared"},!0),Bh.getInstance().clearAllNotifications(!1),Bh.getInstance().setNotificationCount(0),Jh.getInstance().removeBannerUI(),of.getInstance().hideModal(),n&&!isNaN(e)){var o=10*Math.pow(e,2);setTimeout((function(){t.startSession(e+1)}),1e3*o)}})),et(this,"validateSession",(function(e){var n;if(e&&e.gleapId){var o=!1;(null===(n=t.session)||void 0===n?void 0:n.gleapId)!==(null==e?void 0:e.gleapId)&&(o=!0),t.session&&t.session.gleapHash&&On.notifyEvent("unregister-pushmessage-group","gleapuser-".concat(t.session.gleapHash)),T("session-".concat(t.sdkKey),e),t.useCookies&&function(e,t,n){try{var o="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),o="; expires="+r.toUTCString()}var i=I(window.location.host.split(":")[0]);document.cookie=e+"="+(t||"")+o+"; path=/; domain="+i}catch(a){}}("session-".concat(t.sdkKey),encodeURIComponent(JSON.stringify(e)),365),t.session=e,t.ready=!0,t.session&&t.session.gleapHash&&On.notifyEvent("register-pushmessage-group","gleapuser-".concat(t.session.gleapHash)),o&&(setTimeout((function(){j.getInstance().clearCache(),st.getInstance().restart();var e=Ke.getInstance();if(e){try{e.destroy()}catch(t){}e.load()}}),0),"function"==typeof window.dispatchEvent&&window.dispatchEvent(new CustomEvent("session-updated"))),t.notifySessionReady()}})),et(this,"startSession",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{if(t.useCookies){var n=function(e){try{for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}}catch(i){}return null}("session-".concat(t.sdkKey));if(n){var o=JSON.parse(decodeURIComponent(n));t.validateSession(o)}}}catch(s){}if(!(t.session&&t.session.gleapId&&t.session.gleapId.length>0)){var r=E("session-".concat(t.sdkKey));r&&t.validateSession(r)}var i=t,a=new XMLHttpRequest;a.open("POST",i.apiUrl+"/sessions"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Api-Token",i.sdkKey);try{t.session&&t.session.gleapId&&t.session.gleapHash&&(a.setRequestHeader("Gleap-Id",t.session.gleapId),a.setRequestHeader("Gleap-Hash",t.session.gleapHash))}catch(s){}a.onreadystatechange=function(t){if(4===a.readyState)if(200===a.status||201===a.status)try{var n=JSON.parse(a.responseText);i.validateSession(n)}catch(s){}else 429!==a.status&&i.clearSession(e,!0)},a.send(JSON.stringify({lang:Sh.getInstance().getActiveLanguage(),deviceType:k(),platform:"web"}))})),et(this,"checkIfSessionNeedsUpdate",(function(e,n){if(!t.session||!t.session.userId||!e)return!0;try{if(t.session.userId.toString()!==e.toString())return!0}catch(o){}return t.checkIfSessionDataNeedsUpdate(n)})),et(this,"checkIfSessionDataNeedsUpdate",(function(e){if(e)for(var n=Object.keys(e),o=0;o<n.length;o++){var r=n[o];if(JSON.stringify(t.session[r])!==JSON.stringify(e[r])&&(!t.session.customData||JSON.stringify(t.session.customData[r])!==JSON.stringify(e[r])))return!0}return!1})),et(this,"updateSession",(function(e){if(t.checkIfSessionDataNeedsUpdate(e)){var n=t;return new Promise((function(o,r){t.setOnSessionReady((function(){if(!n.session.gleapId||!n.session.gleapHash)return r("Session not ready yet.");var t=new XMLHttpRequest;t.open("POST",n.apiUrl+"/sessions/partialupdate"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.setRequestHeader("Api-Token",n.sdkKey);try{t.setRequestHeader("Gleap-Id",n.session.gleapId),t.setRequestHeader("Gleap-Hash",n.session.gleapHash)}catch(i){}t.onerror=function(){r()},t.onreadystatechange=function(e){if(4===t.readyState)if(200===t.status||201===t.status)try{var a=JSON.parse(t.responseText);n.validateSession(a),o(a)}catch(i){r(i)}else r()},t.send(JSON.stringify({data:$e($e({},e),{},{lang:Sh.getInstance().getActiveLanguage(),deviceType:k(),platform:"web"}),type:"js",sdkVersion:"15.1.0",ws:!0}))}))}))}})),et(this,"identifySession",(function(e,n,o){if(t.checkIfSessionNeedsUpdate(e,n)){var r=t;return new Promise((function(i,a){t.setOnSessionReady((function(){if(!r.session.gleapId||!r.session.gleapHash)return a("Session not ready yet.");var t=new XMLHttpRequest;t.open("POST",r.apiUrl+"/sessions/identify"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.setRequestHeader("Api-Token",r.sdkKey);try{t.setRequestHeader("Gleap-Id",r.session.gleapId),t.setRequestHeader("Gleap-Hash",r.session.gleapHash)}catch(l){}t.onerror=function(){a()},t.onreadystatechange=function(e){if(4===t.readyState)if(200===t.status||201===t.status)try{var n=JSON.parse(t.responseText);r.validateSession(n),i(n)}catch(l){a(l)}else a()};var s=$e({},n);n.customData&&(delete s.customData,s=$e($e({},s),n.customData)),t.send(JSON.stringify($e($e({},s),{},{userId:e,userHash:o,lang:Sh.getInstance().getActiveLanguage(),deviceType:k(),platform:"web"})))}))}))}})),et(this,"startProductTourConfig",(function(e){var n=t;return new Promise((function(o,r){t.setOnSessionReady((function(){if(!n.session.gleapId||!n.session.gleapHash)return r("Session not ready yet.");var t=new XMLHttpRequest;t.open("POST",n.apiUrl+"/outbound/producttours"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.setRequestHeader("Api-Token",n.sdkKey);try{t.setRequestHeader("Gleap-Id",n.session.gleapId),t.setRequestHeader("Gleap-Hash",n.session.gleapHash)}catch(i){}t.onerror=function(){r()},t.onreadystatechange=function(e){if(4===t.readyState)if(200===t.status||201===t.status)try{var n=JSON.parse(t.responseText);n&&n.config&&o(n.config)}catch(i){r(i)}else r()},t.send(JSON.stringify({outboundId:e}))}))}))})),et(this,"validateProductTour",(function(e){var n=t;return new Promise((function(o,r){t.setOnSessionReady((function(){var t;if(!n.session.gleapId||!n.session.gleapHash)return r("Session not ready yet.");var i=new XMLHttpRequest;i.open("POST",n.apiUrl+"/outbound/producttourvalidation"),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("Api-Token",n.sdkKey);try{i.setRequestHeader("Gleap-Id",n.session.gleapId),i.setRequestHeader("Gleap-Hash",n.session.gleapHash)}catch(a){}i.onerror=function(){r()},i.onreadystatechange=function(e){if(4===i.readyState)if(200===i.status||201===i.status)try{var t=JSON.parse(i.responseText);t&&"live"===t.status&&t.passedPageFilter?o(t.config):r()}catch(a){r(a)}else r()},i.send(JSON.stringify({outboundId:e,currentUrl:null===(t=window)||void 0===t||null===(t=t.location)||void 0===t?void 0:t.href}))}))}))}))}var t,n,o;return t=e,n=[{key:"getName",value:function(){try{return this.session.name?this.session.name.split(" ")[0].split("@")[0].split(".")[0].split("+")[0]:""}catch(e){return this.session.name}}},{key:"getSession",value:function(){return this.session}},{key:"getGleapId",value:function(){return this.session&&this.session.gleapId?this.session.gleapId:null}},{key:"isUser",value:function(){return!(!this.session||!this.session.userId)}},{key:"notifySessionReady",value:function(){if(this.onSessionReadyListener.length>0)for(var e=0;e<this.onSessionReadyListener.length;e++)this.onSessionReadyListener[e]();this.onSessionReadyListener=[],Qt.getInstance().sendSessionUpdate()}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&Qe(t.prototype,n),o&&Qe(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function rt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,at(o.key),o)}}function it(e,t,n){return(t=at(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e){var t=function(e,t){if("object"!=ot(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=ot(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ot(t)?t:String(t)}et(nt,"instance",void 0);var st=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),it(this,"eventArray",[]),it(this,"streamedEventArray",[]),it(this,"eventMaxLength",500),it(this,"errorCount",0),it(this,"streamingEvents",!1),it(this,"lastUrl",void 0),it(this,"mainLoopTimeout",null),it(this,"socket",null),it(this,"connectedWebSocketGleapId",null),it(this,"connectionTimeout",null),it(this,"pingWS",null),it(this,"handleOpenBound",null),it(this,"handleErrorBound",null),it(this,"handleMessageBound",null),it(this,"handleCloseBound",null),it(this,"runEventStreamLoop",(function(){var e=t;t.streamEvents(),t.mainLoopTimeout=setTimeout((function(){e.runEventStreamLoop()}),2500)})),it(this,"streamEvents",(function(){if(!(!nt.getInstance().ready||t.streamingEvents||t.errorCount>2)&&0!==t.streamedEventArray.length&&t.socket&&t.socket.readyState===t.socket.OPEN){var e=t;t.streamingEvents=!0;var n=new XMLHttpRequest;n.open("POST",nt.getInstance().apiUrl+"/sessions/events"),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),nt.getInstance().injectSession(n),n.onerror=function(){e.errorCount++,e.streamingEvents=!1},n.onreadystatechange=function(t){4===n.readyState&&(200===n.status||201===n.status?e.errorCount=0:e.errorCount++,e.streamingEvents=!1)};var o=rn.getInstance().getSessionDuration();n.send(JSON.stringify({time:o,events:t.streamedEventArray,opened:Qt.getInstance().isOpened(),type:"js",sdkVersion:"15.1.0",ws:!0})),t.streamedEventArray=[]}})),this.handleOpenBound=this.handleOpen.bind(this),this.handleErrorBound=this.handleError.bind(this),this.handleMessageBound=this.handleMessage.bind(this),this.handleCloseBound=this.handleClose.bind(this)}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"cleanupWebSocket",value:function(){this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.pingWS&&clearInterval(this.pingWS),this.socket&&(this.socket.removeEventListener("open",this.handleOpenBound),this.socket.removeEventListener("error",this.handleErrorBound),this.socket.removeEventListener("message",this.handleMessageBound),this.socket.removeEventListener("close",this.handleCloseBound),this.socket.close(),this.socket=null)}},{key:"initWebSocket",value:function(){this.cleanupWebSocket(),this.connectedWebSocketGleapId=nt.getInstance().session.gleapId,nt.getInstance().session&&nt.getInstance().sdkKey&&(this.socket=new WebSocket("".concat(nt.getInstance().wsApiUrl,"?gleapId=").concat(nt.getInstance().session.gleapId,"&gleapHash=").concat(nt.getInstance().session.gleapHash,"&apiKey=").concat(nt.getInstance().sdkKey,"&sdkVersion=").concat("15.1.0")),this.socket.addEventListener("open",this.handleOpenBound),this.socket.addEventListener("message",this.handleMessageBound),this.socket.addEventListener("error",this.handleErrorBound),this.socket.addEventListener("close",this.handleCloseBound))}},{key:"handleOpen",value:function(e){var t=this;this.pingWS=setInterval((function(){t.socket.readyState===t.socket.OPEN&&(t.socket.send("PING"),t.socket.send(9))}),1e4),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null)}},{key:"handleMessage",value:function(e){this.processMessage(JSON.parse(e.data))}},{key:"handleError",value:function(e){}},{key:"handleClose",value:function(e){var t=this;setTimeout((function(){t.initWebSocket()}),5e3)}},{key:"processMessage",value:function(e){try{if(Qf.getInstance().initialized)return;if("update"===e.name){var t,n=e.data,o=n.a,r=n.u,i=n.ai,a=Qt.getInstance().isOpened();if(o){var s=["banner","modal"],l=o.filter((function(e){var t;return!a||s.includes(null==e||null===(t=e.actionType)||void 0===t?void 0:t.toLowerCase())}));Zg.getInstance().performActions(l)}i&&qh.getInstance().setConfig({enabled:null!==(t=i.e)&&void 0!==t&&t,placeholder:i.p,quickActions:i.a,style:i.s}),null!=r&&Bh.getInstance().setNotificationCount(r)}"checklist"===e.name&&null!=e&&e.data&&window&&"function"==typeof window.dispatchEvent&&window.dispatchEvent(new CustomEvent("checkListUpdate",{detail:e.data}))}catch(c){}}},{key:"getEventArray",value:function(){return this.eventArray}},{key:"stop",value:function(){this.cleanupMainLoop()}},{key:"resetErrorCountLoop",value:function(){var e=this;setInterval((function(){e.errorCount=0}),6e4)}},{key:"cleanupMainLoop",value:function(){this.mainLoopTimeout&&(clearInterval(this.mainLoopTimeout),this.mainLoopTimeout=null)}},{key:"restart",value:function(){this.connectedWebSocketGleapId!==nt.getInstance().session.gleapId&&this.initWebSocket(),this.cleanupMainLoop(),this.trackInitialEvents(),this.runEventStreamLoop()}},{key:"start",value:function(){this.startPageListener(),this.resetErrorCountLoop()}},{key:"trackInitialEvents",value:function(){e.getInstance().logEvent("sessionStarted"),e.getInstance().logCurrentPage()}},{key:"logCurrentPage",value:function(){if(!Zg.getInstance().disablePageTracking){var e=window.location.href;e&&e!==this.lastUrl&&(this.lastUrl=e,this.logEvent("pageView",{page:e}))}}},{key:"startPageListener",value:function(){var e=this;setInterval((function(){e.logCurrentPage()}),1e3)}},{key:"logEvent",value:function(e,t){var n={name:e,date:new Date};t&&(n.data=S(t)),this.eventArray.push(n),this.streamedEventArray.push(n),this.eventArray.length>this.eventMaxLength&&this.eventArray.shift(),this.streamedEventArray.length>this.eventMaxLength&&this.streamedEventArray.shift()}}])&&rt(t.prototype,n),o&&rt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ct(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,dt(o.key),o)}}function ut(e,t,n){return(t=dt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dt(e){var t=function(e,t){if("object"!=lt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=lt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lt(t)?t:String(t)}it(st,"instance",void 0);var pt=function(e,t){var n=parseInt(e);return isNaN(n)?t:n},ht=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ut(this,"flowConfig",null),ut(this,"projectActions",null),ut(this,"onConfigLoadedListener",[]),ut(this,"aiTools",[]),ut(this,"onConfigLoaded",(function(e){null!==t.flowConfig?e():t.onConfigLoadedListener.push(e)})),ut(this,"setAiTools",(function(e){t.aiTools=e,Qt.getInstance().sendConfigUpdate()})),ut(this,"getAiTools",(function(){return t.aiTools})),ut(this,"start",(function(){var e=nt.getInstance(),n=E("config-".concat(e.sdkKey,"-").concat(Sh.getInstance().getActiveLanguage()));return n?(t.applyConfig(n),t.loadConfigFromServer().catch((function(e){})),Promise.resolve()):t.loadConfigFromServer()})),ut(this,"loadConfigFromServer",(function(){var e=t;return new Promise((function(t,n){var o=nt.getInstance(),r=new XMLHttpRequest,i=Sh.getInstance().getActiveLanguage();r.open("GET",o.apiUrl+"/config/"+o.sdkKey+"?lang="+i),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.injectSession(r),r.onerror=function(){n()},r.onreadystatechange=function(a){if(4===r.readyState){if(403===r.status&&(!function(e){try{var t="gleap-widget-".concat(e);localStorage.removeItem(t)}catch(n){}}("config-".concat(o.sdkKey,"-").concat(i)),Zg.destroy()),200===r.status||201===r.status)try{var s=JSON.parse(r.responseText);try{T("config-".concat(o.sdkKey,"-").concat(i),s)}catch(l){}return e.applyConfig(s),t()}catch(a){}n()}},r.send()}))}))}var t,n,o;return t=e,n=[{key:"getFlowConfig",value:function(){return this.flowConfig}},{key:"applyStylesFromConfig",value:function(){var e=this.flowConfig;Zg.setStyles(e.color?e.color:"#485BFF",e.headerColor?e.headerColor:"#485BFF",e.buttonColor?e.buttonColor:"#485BFF",e.backgroundColor?e.backgroundColor:"#FFFFFF",pt(e.borderRadius,20),pt(e.buttonX,20),pt(e.buttonY,20),e.feedbackButtonPosition)}},{key:"notifyConfigLoaded",value:function(){if(this.onConfigLoadedListener.length>0)for(var e=0;e<this.onConfigLoadedListener.length;e++)this.onConfigLoadedListener[e]();this.onConfigLoadedListener=[]}},{key:"applyConfig",value:function(e){try{var t=e.flowConfig;this.flowConfig=t,this.applyStylesFromConfig(),Qt.getInstance().sendConfigUpdate(),a.getInstance().updateFeedbackButtonState(),Bh.getInstance().updateContainerStyle(),t.enableWebReplays?oh.getInstance().start():oh.getInstance().stop(),t.enableNetworkLogs&&y.getInstance().start(),y.getInstance().setLoadAllResources(!!t.sendNetworkResources),t.networkLogPropsToIgnore&&y.getInstance().setFilters(t.networkLogPropsToIgnore),t.networkLogBlacklist&&y.getInstance().setBlacklist(t.networkLogBlacklist),Sh.getInstance().updateRTLSupport(),Zg.enableShortcuts(!!t.enableShortcuts),e.aiBar&&qh.getInstance().setConfig(e.aiBar),this.notifyConfigLoaded()}catch(n){}}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&ct(t.prototype,n),o&&ct(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();ut(ht,"instance",void 0);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function gt(){gt=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new A(o||[]);return r(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",h="suspendedYield",f="executing",g="completed",m={};function v(){}function y(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&o.call(x,a)&&(w=x);var S=b.prototype=v.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(r,i,a,s){var l=d(e[r],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==ft(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function E(t,n,o){var r=p;return function(i,a){if(r===f)throw new Error("Generator is already running");if(r===g){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var l=T(s,o);if(l){if(l===m)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===p)throw r=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=f;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?g:h,c.arg===m)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=g,o.method="throw",o.arg=c.arg)}}}function T(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ft(t)+" is not iterable")}return y.prototype=b,r(S,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},C(I.prototype),c(I.prototype,s,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new I(u(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=M,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:M(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),m}},t}function mt(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(o,r)}function vt(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){mt(i,o,r,a,s,"next",e)}function s(e){mt(i,o,r,a,s,"throw",e)}a(void 0)}))}}var yt=function(e){var t="",n=window.document.doctype;if(n&&(t="<!DOCTYPE "+n.name+(n.publicId?' PUBLIC "'+n.publicId+'"':"")+(!n.publicId&&n.systemId?" SYSTEM":"")+(n.systemId?' "'+n.systemId+'"':"")+">"),e&&e.childNodes&&e.childNodes.length>0)for(var o=0;o<e.childNodes.length;o++)e.childNodes[o]&&(t+=e.childNodes[o].outerHTML);return t},bt=function(e,t,n){return o=e,r=/url\((.*?)\)/g,i=function(e){return new Promise((function(o,r){if(!e)return o(e);var i=e.substr(4,e.length-5).replaceAll("'","").replaceAll('"',"");if(0===i.indexOf("http")||0===i.indexOf("//")||0===i.indexOf("data"))return o(e);try{var a=i;return t&&(a=new URL(i,t+"/").href),n?o("url("+a+")"):wt(a).then((function(e){return o("url("+e+")")}))}catch(s){return o(e)}}))},new Promise((function(e,t){var n=[];o.replace(r,(function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];var a=i.apply(void 0,[e].concat(o));n.push(a)})),Promise.all(n).then((function(t){e(o.replace(r,(function(){return t.shift()})))})).catch((function(){t()}))}));var o,r,i},wt=function(e){return new Promise((function(t,n){if(e){var o=new XMLHttpRequest;o.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.onerror=function(){n()},e.readAsDataURL(o.response)},o.onerror=function(e){t()},o.open("GET",e),o.responseType="blob",o.send()}else t()}))},kt=function(e){return new Promise((function(t,n){if(e&&e.src){if(function(e){var t=["//fonts.googleapis.com","//cdn.jsdelivr.net","//cdnjs.cloudflare.com","//ajax.googleapis.com","//use.typekit.net",".amazonaws.com","//jssdk.gleap.io",".gstatic.com"];if(!e)return!1;for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1}(e.src))return t();var o=new XMLHttpRequest;o.onload=function(){var n=new FileReader;n.onloadend=function(){!function(e,t,n,o){b(e,500,500).then((function(e){t.src=e,n()})).catch((function(){console.warn("BB: Image resize failed."),n()}))}(n.result,e,t)},n.onerror=function(){t()},n.readAsDataURL(o.response)},o.onerror=function(e){t()};var r=e.src;o.open("GET",r),o.responseType="blob",o.send()}else t()}))},xt=function(e,t,n,o){var r=null;t.ownerNode&&(r=e.querySelector('[bb-styleid="'+o+'"]'));try{if(r){var i=null;if(""!=n){var a=e.querySelector("head"),s=window.document.createElement("style");a.appendChild(s),s.type="text/css",s.styleSheet?s.styleSheet.cssText=n:s.appendChild(window.document.createTextNode(n)),i=s}else{var l=window.document.createElement("link");l.rel="stylesheet",l.type=t.type,l.href=t.href,l.media=t.media,i=l}i&&(r.parentNode.insertBefore(i,r),r.remove())}}catch(c){}},St=function(e){var t=null;try{e.cssRules?t=e.cssRules:e.rules&&(t=e.rules)}catch(r){}var n="";if(t)for(var o in t)t[o].cssText&&(n+=t[o].cssText);return n},Ct=function(e,t){for(var n,o=[],r=function(){var e=document.styleSheets[i];if(e.media&&"print"===e.media.mediaText)return 1;var r=St(e);if(e&&e.ownerNode)if(""!=r){var a=document.getElementsByTagName("base");n=a.length?a[0].href.substr(location.origin.length,999):window.location.href.split(/[?#]/)[0],e.href&&(n=e.href);var s=n.substring(0,n.lastIndexOf("/"));o.push(bt(r,s,t).then((function(t){return{styletext:t,stylesheet:e,styleId:e.ownerNode.getAttribute("bb-styleid")}})))}else o.push(Promise.resolve({styletext:r,stylesheet:e,styleId:e.ownerNode.getAttribute("bb-styleid")}))},i=0;i<document.styleSheets.length;i++)r();return Promise.all(o).then((function(t){if(t)for(var n=0;n<t.length;n++)xt(e,t[n].stylesheet,t[n].styletext,t[n].styleId);return!0}))},It=function(e,t){return new Promise((function(n,o){return t?Ct(e,t).then((function(){n()})).catch((function(){n()})):function(e){for(var t=e.querySelectorAll("img"),n=[],o=0;o<t.length;o++){var r=t[o];n.push(kt(r))}return Promise.all(n)}(e).then((function(){return Ct(e,t).then((function(){n()}))})).catch((function(){console.warn("Gleap: Failed with resolving local resources. Please contact the Gleap support team."),n()}))}))},Et=function(e,t,n){if(void 0!==e.adoptedStyleSheets)for(var o=0;o<e.adoptedStyleSheets.length;o++){var r=e.adoptedStyleSheets[o],i=St(r),a=window.document.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=i:a.appendChild(window.document.createTextNode(i)),n&&a.setAttribute("bb-shadow-child",n),t.insertBefore(a,t.firstElementChild)}},Tt=function(e){if(e&&"function"==typeof e.getAnimations){var t=e.getAnimations(),n={};return t.forEach((function(t){var o,r=(null===(o=t.effect)||void 0===o?void 0:o.getKeyframes())||[],i=r[r.length-1]||{};Object.keys(i).forEach((function(t){"offset"!==t&&(n[t]=getComputedStyle(e)[t])}))})),0===Object.keys(n).length?null:JSON.stringify(n)}return null},Lt=function(){var e=vt(gt().mark((function e(t){var n,o,r,i;return gt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1,o=function(){var e=vt(gt().mark((function e(t,r,i){var a,s,l,c,u,d,p,h,f;return gt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){var e=vt(gt().mark((function e(t,n,r){return gt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,o(t,n,r);case 3:t=!t.nextElementSibling||t.nextElementSibling.nextSibling!==t.nextSibling&&null!==t.nextSibling?t.nextSibling:t.nextElementSibling,e.next=0;break;case 6:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),s=t.cloneNode(),null!=(l=Tt(t))&&s.setAttribute("bb-web-animations",l),void 0===s.setAttribute){e.next=20;break}if(i&&s.setAttribute("bb-shadow-child",i),!(t instanceof HTMLCanvasElement)){e.next=20;break}return e.prev=7,c=t.getBoundingClientRect(),e.next=11,b(t.toDataURL(),1400,1400);case 11:u=e.sent,s.setAttribute("bb-canvas-data",u),s.setAttribute("bb-canvas-height",c.height),s.setAttribute("bb-canvas-width",c.width),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),console.warn("Gleap: Failed to clone canvas data.",e.t0);case 20:if(t.nodeType==Node.ELEMENT_NODE&&("IFRAME"!=(d=t.tagName?t.tagName.toUpperCase():t.tagName)&&"VIDEO"!=d&&"EMBED"!=d&&"IMG"!=d&&"SVG"!=d||(p=t.getBoundingClientRect(),s.setAttribute("bb-element",!0),s.setAttribute("bb-height",p.height),s.setAttribute("bb-width",p.width)),(t.scrollTop>0||t.scrollLeft>0)&&(s.setAttribute("bb-scrollpos",!0),s.setAttribute("bb-scrolltop",t.scrollTop),s.setAttribute("bb-scrollleft",t.scrollLeft)),"SELECT"!==d&&"TEXTAREA"!==d&&"INPUT"!==d||(h=t.value,("value"===t.getAttribute("gleap-ignore")||t.classList.contains("gl-mask"))&&(h=new Array(h.length+1).join("*")),s.setAttribute("bb-data-value",h),"checkbox"!==t.type&&"radio"!==t.type||!t.checked||s.setAttribute("bb-data-checked",!0))),r.appendChild(s),!t.shadowRoot){e.next=29;break}return f=n,n++,e.next=27,a(t.shadowRoot.firstChild,s,f);case 27:Et(t.shadowRoot,s,f),void 0!==s.setAttribute&&s.setAttribute("bb-shadow-parent",f);case 29:return e.next=31,a(t.firstChild,s);case 31:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t,n,o){return e.apply(this,arguments)}}(),r=document.createDocumentFragment(),e.next=5,o(t,r);case 5:return(i=r.querySelector("head"))||(i=r),Et(window.document,i),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ot=function(e){return new Promise(function(){var t=vt(gt().mark((function t(n,o){var r,i,a,s,l,c,u,d,p,h,f,g,m,v,y;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=window.document.querySelectorAll("style, link"),i=0;i<r.length;++i)r[i].setAttribute("bb-styleid",i);return t.next=4,Lt(window.document.documentElement);case 4:for(a=t.sent,s=a.querySelectorAll("link[rel=import]"),i=0;i<s.length;++i)if((l=s[i])&&l.childNodes&&l.childNodes.length>0){for(c=l.childNodes;c.length>0;)l.parentNode.insertBefore(c[0],l);l.remove()}for(u=a.querySelectorAll("script, noscript"),i=0;i<u.length;++i)u[i].remove();for(d="",p=a.querySelectorAll("base"),i=0;i<p.length;++i)p[i].href&&(d=p[i].href),p[i].remove();for(h=window.location.href.substring(0,window.location.href.lastIndexOf("/")),f=h+"/",d&&(d.startsWith("http")?f=d:(f=h+d).endsWith("/")||(f+="/")),(g=window.document.createElement("base")).href=f,(m=a.querySelector("head")).insertBefore(g,m.firstChild),v=a.querySelectorAll(".bb-feedback-dialog-container, .bb-capture-editor-borderlayer"),i=0;i<v.length;++i)v[i].remove();for(y=a.querySelectorAll("[bb-element=true]"),i=0;i<y.length;++i)y[i]&&(y[i].style.height=y[i].getAttribute("bb-height")+"px");It(a,e).then((function(){var e=yt(a);n({html:e,baseUrl:h,width:window.innerWidth,height:window.innerHeight,isMobile:x()})}));case 24:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())};function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}function Mt(){Mt=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new A(o||[]);return r(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",h="suspendedYield",f="executing",g="completed",m={};function v(){}function y(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&o.call(x,a)&&(w=x);var S=b.prototype=v.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(r,i,a,s){var l=d(e[r],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==At(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function E(t,n,o){var r=p;return function(i,a){if(r===f)throw new Error("Generator is already running");if(r===g){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var l=T(s,o);if(l){if(l===m)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===p)throw r=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=f;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?g:h,c.arg===m)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=g,o.method="throw",o.arg=c.arg)}}}function T(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(At(t)+" is not iterable")}return y.prototype=b,r(S,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},C(I.prototype),c(I.prototype,s,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new I(u(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=M,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:M(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),m}},t}function Rt(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(o,r)}function Pt(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){Rt(i,o,r,a,s,"next",e)}function s(e){Rt(i,o,r,a,s,"throw",e)}a(void 0)}))}}function Dt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function jt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Bt(o.key),o)}}function Ft(e,t,n){return(t=Bt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e){var t=function(e,t){if("object"!=At(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=At(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==At(t)?t:String(t)}var _t=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ft(this,"rerender",void 0),Ft(this,"stream",void 0),Ft(this,"mediaRecorder",void 0),Ft(this,"audioMuted",!1),Ft(this,"audioAvailable",!0),Ft(this,"available",!0),Ft(this,"isRecording",!1),Ft(this,"file",null),Ft(this,"maxRecordTime",e.MAX_RECORD_TIME),Ft(this,"recordTime",0),Ft(this,"recordingTimer",null),Ft(this,"permissionErrorText",""),Ft(this,"_displayVideoTrack",null),Ft(this,"_displayStream",null),Ft(this,"_micStream",null),this.rerender=t,this.permissionErrorText=n,navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia||(this.available=!1),setTimeout((function(){o.rerender()}),e.RERENDER_DELAY)}var t,n,o,r,i,a;return t=e,n=[{key:"getSupportedMimeType",value:function(){var t,n=Dt(e.MIME_TYPES);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(window.MediaRecorder&&MediaRecorder.isTypeSupported(o))return o}}catch(r){n.e(r)}finally{n.f()}return"video/webm"}},{key:"formatTime",value:function(e){return(e-(e%=60))/60+(9<e?":":":0")+e}},{key:"stopStreamTracks",value:function(e){if(e)try{e.getTracks().forEach((function(e){return e.stop()}))}catch(t){}}},{key:"createMediaStream",value:function(e){var t=e.filter((function(e){return null!==e}));return new MediaStream(t)}},{key:"getFirstVideoTrack",value:function(e){if(!e)return null;var t=e.getVideoTracks();return t.length>0?t[0]:null}},{key:"getFirstAudioTrack",value:function(e){if(!e)return null;var t=e.getAudioTracks();return t.length>0?t[0]:null}},{key:"startScreenRecording",value:(a=Pt(Mt().mark((function t(){var n,o;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&!this.isRecording){t.next=4;break}return this.available=!1,this.rerender(),t.abrupt("return");case 4:return t.prev=4,t.next=7,navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:Math.min(window.screen.width,e.MAX_WIDTH)},height:{ideal:Math.min(window.screen.height,e.MAX_HEIGHT)},frameRate:{ideal:e.IDEAL_FRAME_RATE,max:e.MAX_FRAME_RATE},displaySurface:"monitor"},audio:!1,selfBrowserSurface:"include"});case 7:if(n=t.sent,this._displayStream=n,this._displayVideoTrack=this.getFirstVideoTrack(n),this.audioMuted){t.next=15;break}return t.next=13,this.startAudioRecording();case 13:t.next=19;break;case 15:this.audioAvailable=!1,o=this.createMediaStream([this._displayVideoTrack]),this.stream=o,this.handleRecord({stream:o});case 19:this.rerender(),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(4),window.alert(this.permissionErrorText),this.rerender();case 26:case"end":return t.stop()}}),t,this,[[4,22]])}))),function(){return a.apply(this,arguments)})},{key:"stopScreenRecording",value:function(){if(this.mediaRecorder&&this.stream&&this.isRecording){this.recordingTimer&&(clearInterval(this.recordingTimer),this.recordingTimer=null);try{this.mediaRecorder.stop()}catch(e){}this.stopStreamTracks(this.stream),this._displayStream&&(this.stopStreamTracks(this._displayStream),this._displayStream=null),this._micStream&&(this.stopStreamTracks(this._micStream),this._micStream=null),this._displayVideoTrack=null,this.rerender()}}},{key:"startAudioRecording",value:(i=Pt(Mt().mark((function e(){var t,n,o,r;return Mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._displayVideoTrack){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1});case 5:t=e.sent,this._micStream=t,n=this.getFirstAudioTrack(t),this.audioMuted=!1,this.audioAvailable=!!n,o=this.createMediaStream([this._displayVideoTrack,n]),this.stream=o,this.handleRecord({stream:o}),this.rerender(),e.next=23;break;case 16:e.prev=16,e.t0=e.catch(2),this.audioAvailable=!1,r=this.createMediaStream([this._displayVideoTrack]),this.stream=r,this.handleRecord({stream:r}),this.rerender();case 23:case"end":return e.stop()}}),e,this,[[2,16]])}))),function(){return i.apply(this,arguments)})},{key:"toggleAudio",value:function(){if(this.audioMuted=!this.audioMuted,this.rerender(),this.stream)for(var e=this.stream.getAudioTracks(),t=0;t<e.length;t++)e[t].enabled=!this.audioMuted}},{key:"clearPreview",value:function(){var t=document.querySelector(e.SELECTORS.PREVIEW_VIDEO);t&&(t.src=null),this.file=null,this.rerender()}},{key:"handleRecord",value:function(t){var n=t.stream,o=this,r=[];this.mediaRecorder=new MediaRecorder(n,{mimeType:this.getSupportedMimeType()}),this.isRecording=!0,this.recordTime=0;var i=document.querySelector(e.SELECTORS.TIMER_LABEL);this.recordingTimer&&(clearInterval(this.recordingTimer),this.recordingTimer=null),this.recordingTimer=setInterval((function(){o.recordTime++;var e=o.maxRecordTime-o.recordTime;i?e>0?i.innerHTML=o.formatTime(e):(i.innerHTML="2:00",o.stopScreenRecording()):e<=0&&o.stopScreenRecording()}),e.TIMER_UPDATE_INTERVAL),this.mediaRecorder.ondataavailable=function(e){e.data&&e.data.size>0&&r.push(e.data)};var a=this.getFirstVideoTrack(n);a&&(a.onended=function(){o.prepareRecording(r)}),this.mediaRecorder.onstop=function(){o.prepareRecording(r)},this.mediaRecorder.start(e.CHUNK_INTERVAL),o.rerender()}},{key:"prepareRecording",value:function(t){var n=this.getSupportedMimeType(),o=new Blob(t,{type:n}),r=n.includes("mp4")?"mp4":"webm";this.file=new File([o],"screen-recording.".concat(r),{type:n});var i=document.querySelector(e.SELECTORS.PREVIEW_VIDEO);i&&(i.src=URL.createObjectURL(o),this.audioAvailable=this.stream?this.stream.getAudioTracks().length>0:this.audioAvailable,this.isRecording=!1,this.rerender())}}],o=[{key:"uploadScreenRecording",value:(r=Pt(Mt().mark((function e(t){return Mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",new Promise((function(e,n){var o=new XMLHttpRequest;o.open("POST",nt.getInstance().apiUrl+"/uploads/sdk"),nt.getInstance().injectSession(o);var r=new FormData;r.append("file",t),o.onerror=function(){n(new Error("Network error during file upload"))},o.onreadystatechange=function(){4==o.readyState&&(200==o.status?e(JSON.parse(o.response).fileUrl):n(new Error("Upload failed with status ".concat(o.status))))},o.send(r)})));case 3:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})}],n&&jt(t.prototype,n),o&&jt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){Wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Vt(o.key),o)}}function Wt(e,t,n){return(t=Vt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(e){var t=function(e,t){if("object"!=Ut(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Ut(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ut(t)?t:String(t)}Ft(_t,"MAX_RECORD_TIME",120),Ft(_t,"MAX_WIDTH",3072),Ft(_t,"MAX_HEIGHT",1728),Ft(_t,"IDEAL_FRAME_RATE",10),Ft(_t,"MAX_FRAME_RATE",24),Ft(_t,"CHUNK_INTERVAL",200),Ft(_t,"TIMER_UPDATE_INTERVAL",1e3),Ft(_t,"RERENDER_DELAY",100),Ft(_t,"MIME_TYPES",["video/webm;codecs=vp9,opus","video/webm;codecs=vp8,opus","video/webm;codecs=vp9","video/webm;codecs=vp8","video/webm","video/mp4"]),Ft(_t,"SELECTORS",{PREVIEW_VIDEO:".bb-capture-preview video",TIMER_LABEL:".bb-capture-toolbar-item-timer"});var Gt=function(){function e(t,n,o,r,i,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wt(this,"excludeData",{}),Wt(this,"type","BUG"),Wt(this,"priority","LOW"),Wt(this,"customData",{}),Wt(this,"ticketAttributes",{}),Wt(this,"metaData",{}),Wt(this,"consoleLog",[]),Wt(this,"networkLogs",[]),Wt(this,"customEventLog",[]),Wt(this,"formData",{}),Wt(this,"isSilent",!1),Wt(this,"outboundId",void 0),Wt(this,"screenshotData",void 0),Wt(this,"webReplay",void 0),Wt(this,"screenRecordingUrl",void 0),Wt(this,"spamToken",void 0),this.type=t,this.priority=n,this.formData=o,this.isSilent=r,this.excludeData=i,this.outboundId=a,this.spamToken=s}var t,n,o;return t=e,n=[{key:"takeSnapshot",value:function(){var e=this,t=Zg.getInstance();this.customData=Cn.getInstance().getCustomData(),this.metaData=rn.getInstance().getMetaData(),this.consoleLog=pn.getInstance().getLogs(),this.networkLogs=y.getInstance().getRequests(),this.customEventLog=st.getInstance().getEventArray(),this.ticketAttributes=Cn.getInstance().getTicketAttributes();var n=[],o=t.getGlobalDataItem("webReplay");null!==o&&(this.webReplay=o);var r,i=t.getGlobalDataItem("screenRecordingData");if(null!=i){var a=_t.uploadScreenRecording(i).then((function(t){t&&(e.screenRecordingUrl=t)}));n.push(a)}if(!this.excludeData||!this.excludeData.screenshot){var s=(r=t.isLiveMode(),Ot(r)).then((function(n){if(n){var o=t.getGlobalDataItem("snapshotPosition");n.x=o.x,n.y=o.y,e.screenshotData=n}}));n.push(s)}return Promise.all(n)}},{key:"getData",value:function(){var e={type:this.type,priority:this.priority,customData:this.customData,metaData:this.metaData,consoleLog:this.consoleLog,networkLogs:this.networkLogs,customEventLog:this.customEventLog,formData:zt(zt({},this.ticketAttributes),this.formData),isSilent:this.isSilent,outbound:this.outboundId,screenshotData:this.screenshotData,webReplay:this.webReplay,screenRecordingUrl:this.screenRecordingUrl,spamToken:this.spamToken},t=ff.getInstance().getTags();if(t&&t.length>0&&(e.tags=t),this.excludeData)for(var n=Object.keys(this.excludeData),o=0;o<n.length;o++){var r=n[o];!0===this.excludeData[r]&&(e[r]&&delete e[r],"screenshot"===r&&delete e.screenshotData,"replays"===r&&delete e.webReplay)}return e}},{key:"getTicketData",value:function(){var e=this;return new Promise((function(t,n){e.takeSnapshot().then((function(){var n=e.getData();t(n)})).catch((function(e){console.log("Failed to take snapshot",e),n()}))}))}},{key:"sendFeedback",value:function(){var e=this;return new Promise((function(t,n){e.takeSnapshot().then((function(){var o=e.getData(),r=new XMLHttpRequest;r.open("POST",nt.getInstance().apiUrl+"/bugs/v2"),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),nt.getInstance().injectSession(r),r.onerror=function(e){n()},r.onreadystatechange=function(e){if(4===r.readyState)if(200===r.status||201===r.status)try{var o=JSON.parse(r.responseText);t(o)}catch(i){n()}else n()},r.send(JSON.stringify(o))})).catch((function(e){console.log("Failed to take snapshot",e),n()}))}))}}],n&&qt(t.prototype,n),o&&qt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Xt(e){return function(e){if(Array.isArray(e))return Kt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Jt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,$t(o.key),o)}}function Zt(e,t,n){return(t=$t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $t(e){var t=function(e,t){if("object"!=Yt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Yt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yt(t)?t:String(t)}var Qt=function(){function e(){var t=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Zt(this,"frameUrl","https://messenger-app.gleap.io"),Zt(this,"gleapFrameContainer",null),Zt(this,"gleapFrame",null),Zt(this,"comReady",!1),Zt(this,"injectedFrame",!1),Zt(this,"widgetOpened",!1),Zt(this,"listeners",[]),Zt(this,"appMode","widget"),Zt(this,"markerManager",void 0),Zt(this,"escListener",void 0),Zt(this,"frameHeight",0),Zt(this,"sendingFeedback",!1),Zt(this,"queue",[]),Zt(this,"urlHandler",(function(e,t){if(e&&e.length>0)if(t){var n=window.open(e,"_blank");n&&n.focus()}else window.location.href=e})),Zt(this,"autoWhiteListCookieManager",(function(){window&&window.cmp_block_ignoredomains&&window.cmp_block_ignoredomains.concat(["messenger-app.gleap.io"])})),Zt(this,"injectFrame",(function(){t.injectedFrame||(t.injectedFrame=!0,t.autoWhiteListCookieManager(),L((function(){ht.getInstance().onConfigLoaded((function(){ht.getInstance().applyStylesFromConfig();var e=document.createElement("div");e.className="gleap-frame-container gleap-frame-container--hidden gl-block",e.innerHTML='<div class="gleap-frame-container-inner"><iframe src="'.concat(t.frameUrl,'" class="gleap-frame" scrolling="yes" allow="autoplay; encrypted-media; fullscreen; microphone *; display-capture *; camera *;" frameborder="0"></iframe></div>'),document.body.appendChild(e),t.gleapFrameContainer=e,t.gleapFrame=document.querySelector(".gleap-frame"),t.updateFrameStyle(),"widget"===t.appMode&&t.showFrameContainer(!0)}))})))})),Zt(this,"showImage",(function(e){L((function(){var t=document.createElement("div");t.className="gleap-image-view",t.innerHTML='<div class="gleap-image-view-close">\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm97.9-320l-17 17-47 47 47 47 17 17L320 353.9l-17-17-47-47-47 47-17 17L158.1 320l17-17 47-47-47-47-17-17L192 158.1l17 17 47 47 47-47 17-17L353.9 192z"/></svg>\n      </div><img class="gleap-image-view-image" src="'.concat(e,'" />'),document.body.appendChild(t);var n=function(){t.remove()};t.querySelector(".gleap-image-view-close").addEventListener("click",(function(){n()})),t.addEventListener("click",(function(e){e.target===t&&n()}))}))})),Zt(this,"updateFrameStyle",(function(){if(t.gleapFrameContainer){for(var e="gleap-frame-container--survey",n="gleap-frame-container--extended",o="gleap-frame-container--survey-full",r="gleap-frame-container--classic",i="gleap-frame-container--classic-left",s="gleap-frame-container--modern-left",l="gleap-frame-container--no-button",c=[r,i,n,s,l,e,o],u=0;u<c.length;u++)t.gleapFrameContainer.classList.remove(c[u]);var d=void 0,p=ht.getInstance().getFlowConfig();p.feedbackButtonPosition!==a.FEEDBACK_BUTTON_CLASSIC&&p.feedbackButtonPosition!==a.FEEDBACK_BUTTON_CLASSIC_BOTTOM||(d=r),p.feedbackButtonPosition===a.FEEDBACK_BUTTON_CLASSIC_LEFT&&(d=i),p.feedbackButtonPosition===a.FEEDBACK_BUTTON_BOTTOM_LEFT&&(d=s),null===a.getInstance().buttonHidden?p.feedbackButtonPosition===a.FEEDBACK_BUTTON_NONE&&(d=l):a.getInstance().buttonHidden&&(d=l),d&&t.gleapFrameContainer.classList.add(d),"survey"===t.appMode&&t.gleapFrameContainer.classList.add(e),"survey_full"!==t.appMode&&"survey_web"!==t.appMode||t.gleapFrameContainer.classList.add(o),"extended"===t.appMode&&t.gleapFrameContainer.classList.add(n),t.gleapFrameContainer.setAttribute("dir",Sh.getInstance().isRTLLayout?"rtl":"ltr")}})),this.startCommunication(),"undefined"!=typeof window){var n=function(){try{document.documentElement.style.setProperty("--glvh",.01*window.innerHeight+"px")}catch(e){}};try{window.addEventListener("resize",n),n()}catch(o){}}}var t,n,o;return t=e,n=[{key:"setUrlHandler",value:function(e){this.urlHandler=e}},{key:"isSurvey",value:function(){return"survey"===this.appMode||"survey_full"===this.appMode||"survey_web"===this.appMode}},{key:"setAppMode",value:function(e){this.appMode=e,this.updateFrameStyle();var t=document.querySelector(".gleap-frame-container-inner");"widget"!==this.appMode&&"survey_full"!==this.appMode&&"survey_web"!==this.appMode||!t||(t.style.maxHeight="".concat(700,"px"))}},{key:"registerEscListener",value:function(){var e=this;this.escListener||(this.escListener=function(t){"Escape"===(t=t||window.event).key&&e.hideWidget()},document.addEventListener("keydown",this.escListener))}},{key:"unregisterEscListener",value:function(){this.escListener&&(document.removeEventListener("keydown",this.escListener),this.escListener=null)}},{key:"destroy",value:function(){this.gleapFrame&&this.gleapFrame.remove(),this.gleapFrameContainer&&this.gleapFrameContainer.remove(),this.injectedFrame=!1,this.widgetOpened=!1,this.markerManager=void 0,this.gleapFrameContainer=null,this.gleapFrame=null}},{key:"isOpened",value:function(){return this.widgetOpened||null!=this.markerManager}},{key:"showFrameContainer",value:function(e){var t=this;if(this.gleapFrameContainer){var n=ht.getInstance().getFlowConfig(),o="gleap-frame-container--loading";this.gleapFrameContainer.classList&&(this.gleapFrameContainer.classList.remove("gleap-frame-container--hidden"),e?(this.gleapFrameContainer.classList.add(o),n&&n.disableBGFade&&this.gleapFrameContainer.classList.add("gleap-frame-container--loading-nofade"),n&&n.disableBGGradient&&this.gleapFrameContainer.classList.add("gleap-frame-container--loading-nogradient")):this.gleapFrameContainer.classList.remove(o),setTimeout((function(){t.gleapFrameContainer.classList.add("gleap-frame-container--animate")}),500)),this.widgetOpened=!0,this.updateUI()}}},{key:"runWidgetShouldOpenCallback",value:function(){this.gleapFrameContainer&&(this.workThroughQueue(),Zg.getInstance().setGlobalDataItem("snapshotPosition",{x:window.scrollX,y:window.scrollY}),this.showFrameContainer(!1),this.updateWidgetStatus(),On.notifyEvent("open"),this.registerEscListener())}},{key:"updateUI",value:function(){Bh.getInstance().clearAllNotifications(this.isSurvey()),a.getInstance().updateNotificationBadge(0),a.getInstance().updateFeedbackButtonState()}},{key:"showWidget",value:function(){var t=this;setTimeout((function(){t.gleapFrameContainer?t.runWidgetShouldOpenCallback():e.getInstance().injectFrame(),t.updateUI()}),0)}},{key:"updateWidgetStatus",value:function(){this.sendMessage({name:"widget-status-update",data:{isWidgetOpen:this.widgetOpened}})}},{key:"hideMarkerManager",value:function(){this.markerManager&&(this.markerManager.clear(),this.markerManager=null)}},{key:"hideWidget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"survey_web"!==this.appMode&&(this.hideMarkerManager(),this.gleapFrameContainer&&(this.gleapFrameContainer.classList.add("gleap-frame-container--hidden"),this.gleapFrameContainer.classList.remove("gleap-frame-container--animate")),e&&this.sendMessage({name:"reset-routes",data:{}}),this.widgetOpened=!1,this.updateWidgetStatus(),a.getInstance().updateFeedbackButtonState(),On.notifyEvent("close"),Bh.getInstance().reloadNotificationsFromCache(),this.unregisterEscListener(),"undefined"!=typeof window&&void 0!==window.focus&&window.focus())}},{key:"sendMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{this.gleapFrame=document.querySelector(".gleap-frame"),this.comReady&&this.gleapFrame&&this.gleapFrame.contentWindow?this.gleapFrame.contentWindow.postMessage(JSON.stringify(e),"*"):t&&this.queue.push(e)}catch(n){}}},{key:"sendSessionUpdate",value:function(){this.sendMessage({name:"session-update",data:{sessionData:nt.getInstance().getSession(),apiUrl:nt.getInstance().apiUrl,sdkKey:nt.getInstance().sdkKey}})}},{key:"sendConfigUpdate",value:function(){this.comReady&&(this.sendMessage({name:"config-update",data:{config:ht.getInstance().getFlowConfig(),aiTools:ht.getInstance().getAiTools(),overrideLanguage:Sh.getInstance().getOverrideLanguage()}}),this.updateFrameStyle())}},{key:"showDrawingScreen",value:function(e){var t=this;this.hideWidget(),this.markerManager=new yh(e),this.markerManager.show((function(e){e||t.hideMarkerManager(),t.showWidget()}))}},{key:"workThroughQueue",value:function(){var e=Xt(this.queue);this.queue=[];for(var t=0;t<e.length;t++)this.sendMessage(e[t],!0)}},{key:"startCommunication",value:function(){var e=this;this.addMessageListener((function(t){if("ping"===t.name&&(e.comReady=!0,e.sendConfigUpdate(),e.sendSessionUpdate(),e.workThroughQueue(),setTimeout((function(){e.runWidgetShouldOpenCallback()}),300)),"play-ping"===t.name&&cf.ping(),"open-image"===t.name&&e.showImage(t.data.url),"page-changed"===t.name&&(!t.data||"newsdetails"!==t.data.name&&"appextended"!==t.data.name?"extended"===e.appMode&&e.setAppMode("widget"):e.setAppMode("extended")),"collect-ticket-data"===t.name){var n={customData:Cn.getInstance().getCustomData(),metaData:rn.getInstance().getMetaData(),consoleLog:pn.getInstance().getLogs(),networkLogs:y.getInstance().getRequests(),customEventLog:st.getInstance().getEventArray(),formData:Cn.getInstance().getTicketAttributes()},o=ff.getInstance().getTags();o&&o.length>0&&(n.tags=o),e.sendMessage({name:"collect-ticket-data",data:n})}if("height-update"===t.name){e.frameHeight=t.data;var r=document.querySelector(".gleap-frame-container-inner");"survey"!==e.appMode&&"survey_full"!==e.appMode&&"survey_web"!==e.appMode||!r||(r.style.maxHeight="".concat(e.frameHeight,"px"))}if("notify-event"===t.name&&On.notifyEvent(t.data.type,t.data.data),"cleanup-drawings"===t.name&&e.hideMarkerManager(),"open-url"===t.name){var i=t.data,a=!!t.newTab;e.urlHandler(i,a)}var s;if("start-product-tour"===t.name&&Zg.startProductTour(null===(s=t.data)||void 0===s?void 0:s.tourId,!0),"run-custom-action"===t.name&&jn.triggerCustomAction(t.data,{shareToken:t.shareToken}),"close-widget"===t.name&&e.hideWidget(),"tool-execution"===t.name&&On.notifyEvent("tool-execution",t.data),"send-feedback"===t.name){if(e.sendingFeedback)return;e.sendingFeedback=!0;var l=t.data.formData,c=t.data.action,u=t.data.outboundId,d=t.data.spamToken;new Gt(c.feedbackType,"MEDIUM",l,!1,c.excludeData,u,d).sendFeedback().then((function(t){if(setTimeout((function(){e.sendingFeedback=!1}),1e3),e.sendMessage({name:"feedback-sent",data:t}),On.notifyEvent("feedback-sent",l),u&&u.length>0){On.notifyEvent("outbound-sent",{outboundId:u,outbound:c,formData:l});try{delete l.reportedBy}catch(n){}Zg.trackEvent("outbound-".concat(u,"-submitted"),l)}})).catch((function(t){setTimeout((function(){e.sendingFeedback=!1,e.sendMessage({name:"feedback-sending-failed",data:"Something went wrong, please try again."}),On.notifyEvent("error-while-sending")}),1e3)}))}"start-screen-drawing"===t.name&&e.showDrawingScreen(t.data)})),window.addEventListener("message",(function(t){if(t.origin===e.frameUrl||t.origin===Jh.getInstance().bannerUrl)try{for(var n=JSON.parse(t.data),o=0;o<e.listeners.length;o++)e.listeners[o]&&e.listeners[o](n)}catch(r){}}))}},{key:"addMessageListener",value:function(e){this.listeners.push(e)}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&Jt(t.prototype,n),o&&Jt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,on(o.key),o)}}function nn(e,t,n){return(t=on(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(e){var t=function(e,t){if("object"!=en(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=en(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==en(t)?t:String(t)}Zt(Qt,"instance",void 0);var rn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),nn(this,"sessionStart",new Date),nn(this,"appBuildNumber",""),nn(this,"appVersionCode",""),nn(this,"environment","prod")}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"setAppVersionCode",value:function(e){this.getInstance().appVersionCode=e}},{key:"setAppBuildNumber",value:function(e){this.getInstance().appBuildNumber=e}}],(n=[{key:"getSessionDuration",value:function(){var e=new Date;return Math.round((e.getTime()-this.sessionStart.getTime())/1e3)}},{key:"getMetaData",value:function(){var e,t,n,o=navigator.userAgent,r=navigator.appName,i=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10);-1!==(t=o.indexOf("Opera"))?(r="Opera",i=o.substring(t+6),-1!==(t=o.indexOf("Version"))&&(i=o.substring(t+8))):-1!==(t=o.indexOf("MSIE"))?(r="Microsoft Internet Explorer",i=o.substring(t+5)):-1!==(t=o.indexOf("Chrome"))?(r="Chrome",i=o.substring(t+7)):-1!==(t=o.indexOf("Safari"))?(r="Safari",i=o.substring(t+7),-1!==(t=o.indexOf("Version"))&&(i=o.substring(t+8))):-1!==(t=o.indexOf("Firefox"))?(r="Firefox",i=o.substring(t+8)):(e=o.lastIndexOf(" ")+1)<(t=o.lastIndexOf("/"))&&(r=o.substring(e,t),i=o.substring(t+1),r.toLowerCase()===r.toUpperCase()&&(r=navigator.appName)),-1!==(n=i.indexOf(";"))&&(i=i.substring(0,n)),-1!==(n=i.indexOf(" "))&&(i=i.substring(0,n)),a=parseInt(""+i,10),isNaN(a)&&(i=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10));var s="Unknown OS";return-1!==navigator.appVersion.indexOf("Win")&&(s="Windows"),-1!==navigator.appVersion.indexOf("Mac")&&(s="MacOS"),-1!==navigator.appVersion.indexOf("X11")&&(s="UNIX"),-1!==navigator.appVersion.indexOf("Linux")&&(s="Linux"),-1!==navigator.appVersion.indexOf("iPad")&&(s="iPad"),-1!==navigator.appVersion.indexOf("iPhone")&&(s="iPhone"),-1!==navigator.appVersion.indexOf("Android")&&(s="Android"),{browserName:r+"("+i+")",userAgent:o,browser:r,systemName:s,buildVersionNumber:this.appBuildNumber,releaseVersionNumber:this.appVersionCode,sessionDuration:this.getSessionDuration(),devicePixelRatio:window.devicePixelRatio,screenWidth:window.screen.width,screenHeight:window.screen.height,innerWidth:window.innerWidth,innerHeight:window.innerHeight,currentUrl:window.location.href,language:navigator.language||navigator.userLanguage,mobile:x(),sdkVersion:"15.1.0",sdkType:"javascript",environment:this.environment}}}])&&tn(t.prototype,n),o&&tn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,dn(o.key),o)}}function un(e,t,n){return(t=dn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dn(e){var t=function(e,t){if("object"!=an(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=an(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==an(t)?t:String(t)}nn(rn,"instance",void 0);var pn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),un(this,"logArray",[]),un(this,"disabled",!1),un(this,"originalConsoleLog",void 0),un(this,"logMaxLength",500)}var t,n,o;return t=e,n=[{key:"getLogs",value:function(){return this.logArray}},{key:"stop",value:function(){this.disabled=!0,this.originalConsoleLog&&(window.console=this.originalConsoleLog)}},{key:"addLog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INFO";!e||e.length<=0||(this.logArray.push({log:C(e,1e3),date:new Date,priority:t}),this.logArray.length>this.logMaxLength&&this.logArray.shift())}},{key:"addLogWithArgs",value:function(e,t){if(e&&!(e.length<=0)){var n="";try{for(var o=0;o<e.length;o++)n+=e[o]+" "}catch(r){}this.addLog(n,t)}}},{key:"start",value:function(){if(!this.disabled){var e,t=this;window.console=(e=window.console,window.console&&e||(e={}),t.originalConsoleLog=e,ln(ln({},e),{},{log:function(){t.addLogWithArgs(arguments,"INFO"),e.log&&e.log.apply(e,arguments)},warn:function(){t.addLogWithArgs(arguments,"WARNING"),e.warn&&e.warn.apply(e,arguments)},error:function(){t.addLogWithArgs(arguments,"ERROR"),e.error&&e.error.apply(e,arguments)},info:function(n){t.addLogWithArgs(arguments,"INFO"),e.info&&e.info.apply(e,arguments)}}))}}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&cn(t.prototype,n),o&&cn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function fn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,gn(o.key),o)}}function gn(e){var t=function(e,t){if("object"!=hn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=hn(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hn(t)?t:String(t)}un(pn,"instance",void 0);var mn,vn,yn,bn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,n=[{key:"start",value:function(){document.addEventListener("click",(function(e){if(e.target){if("A"===e.target.tagName&&"gleap:"===e.target.protocol){e.preventDefault();var t=e.target.href;Jg(t)}Qt.getInstance().isOpened()||pn.getInstance().addLog(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=C(e.innerText||"",40).replace(/(\r\n|\n|\r)/gm,"").replace(/ +(?= )/g,""),o="",r="";if(void 0!==e.getAttribute){var i=e.getAttribute("id");i&&(o=' id="'.concat(i,'"'));var a=e.getAttribute("class");a&&(r=' class="'.concat(a,'"'))}var s=(e.tagName||"").toLowerCase(),l="<",c=">";return t||(l="[",c="]"),"".concat(l).concat(s).concat(o).concat(r).concat(c).concat(n).concat(l,"/").concat(s).concat(c)}(e.target),"CLICK")}}))}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&fn(t.prototype,n),o&&fn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wn(e){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(e)}function kn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Sn(o.key),o)}}function xn(e,t,n){return(t=Sn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sn(e){var t=function(e,t){if("object"!=wn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=wn(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wn(t)?t:String(t)}mn=bn,yn=void 0,(vn=gn(vn="instance"))in mn?Object.defineProperty(mn,vn,{value:yn,enumerable:!0,configurable:!0,writable:!0}):mn[vn]=yn;var Cn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xn(this,"customData",{}),xn(this,"ticketAttributes",{})}var t,n,o;return t=e,n=[{key:"getCustomData",value:function(){return this.customData}},{key:"attachCustomData",value:function(e){this.customData=Object.assign(this.customData,S(e))}},{key:"setCustomData",value:function(e,t){this.customData[e]=t}},{key:"removeCustomData",value:function(e){delete this.customData[e]}},{key:"clearCustomData",value:function(){this.customData={}}},{key:"setTicketAttribute",value:function(e,t){this.ticketAttributes[e]=t}},{key:"unsetTicketAttribute",value:function(e){delete this.ticketAttributes[e]}},{key:"clearTicketAttributes",value:function(){this.ticketAttributes={}}},{key:"getTicketAttributes",value:function(){return this.ticketAttributes}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&kn(t.prototype,n),o&&kn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function En(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ln(o.key),o)}}function Tn(e,t,n){return(t=Ln(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e){var t=function(e,t){if("object"!=In(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=In(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==In(t)?t:String(t)}xn(Cn,"instance",void 0);var On=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Tn(this,"eventListeners",{})}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"notifyEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("flow-started"===e){var n=Zg.getInstance();n.setGlobalDataItem("webReplay",null),n.setGlobalDataItem("screenRecordingData",null),n.takeCurrentReplay()}var o=this.getInstance().eventListeners[e];if(o)for(var r=0;r<o.length;r++){var i=o[r];i&&i(t)}}},{key:"on",value:function(e,t){var n=this.getInstance();n.eventListeners[e]||(n.eventListeners[e]=[]),n.eventListeners[e].push(t)}}],(n=null)&&En(t.prototype,n),o&&En(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function An(e){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(e)}function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){Dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Nn(o.key),o)}}function Dn(e,t,n){return(t=Nn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nn(e){var t=function(e,t){if("object"!=An(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=An(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==An(t)?t:String(t)}Tn(On,"instance",void 0);var jn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Dn(this,"customActionCallbacks",[])}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"registerCustomAction",value:function(e){var t=this.getInstance();t.customActionCallbacks&&t.customActionCallbacks.push(e)}},{key:"triggerCustomAction",value:function(e,t){var n=this.getInstance();if(n.customActionCallbacks)for(var o=0;o<n.customActionCallbacks.length;o++){var r=n.customActionCallbacks[o];r&&r(Rn({name:e},t||{}))}}}],(n=null)&&Pn(t.prototype,n),o&&Pn(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();Dn(jn,"instance",void 0);var Fn,Bn=Object.defineProperty,_n=(e,t,n)=>((e,t,n)=>t in e?Bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),Un=Object.defineProperty,Hn=(e,t,n)=>((e,t,n)=>t in e?Un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),zn=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(zn||{});const qn={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Wn={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Vn={},Gn=()=>!!globalThis.Zone;function Yn(e){if(Vn[e])return Vn[e];const t=globalThis[e],n=t.prototype,o=e in qn?qn[e]:void 0,r=Boolean(o&&o.every((e=>{var t,o;return Boolean(null==(o=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)?void 0:o.toString().includes("[native code]"))}))),i=e in Wn?Wn[e]:void 0,a=Boolean(i&&i.every((e=>{var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))})));if(r&&a&&!Gn())return Vn[e]=t.prototype,t.prototype;try{const o=document.createElement("iframe");document.body.appendChild(o);const r=o.contentWindow;if(!r)return t.prototype;const i=r[e].prototype;return document.body.removeChild(o),i?Vn[e]=i:n}catch{return n}}const Xn={};function Kn(e,t,n){var o;const r=`${e}.${String(n)}`;if(Xn[r])return Xn[r].call(t);const i=Yn(e),a=null==(o=Object.getOwnPropertyDescriptor(i,n))?void 0:o.get;return a?(Xn[r]=a,a.call(t)):t[n]}const Jn={};function Zn(e,t,n){const o=`${e}.${String(n)}`;if(Jn[o])return Jn[o].bind(t);const r=Yn(e)[n];return"function"!=typeof r?t[n]:(Jn[o]=r,r.bind(t))}const $n={childNodes:function(e){return Kn("Node",e,"childNodes")},parentNode:function(e){return Kn("Node",e,"parentNode")},parentElement:function(e){return Kn("Node",e,"parentElement")},textContent:function(e){return Kn("Node",e,"textContent")},contains:function(e,t){return Zn("Node",e,"contains")(t)},getRootNode:function(e){return Zn("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?Kn("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?Kn("Element",e,"shadowRoot"):null},querySelector:function(e,t){return Kn("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return Kn("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return Yn("MutationObserver").constructor}};function Qn(e){return e.nodeType===e.ELEMENT_NODE}function eo(e){const t=e&&"host"in e&&"mode"in e&&$n.host(e)||null;return Boolean(t&&"shadowRoot"in t&&$n.shadowRoot(t)===e)}function to(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function no(e){try{const n=e.rules||e.cssRules;if(!n)return null;let o=e.href;!o&&e.ownerNode&&e.ownerNode.ownerDocument&&(o=e.ownerNode.ownerDocument.location.href);const r=Array.from(n,(e=>oo(e,o))).join("");return(t=r).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t}catch(n){return null}var t}function oo(e,t){if(function(e){return"styleSheet"in e}(e)){let t;try{t=no(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(n){t=e.cssText}return e.styleSheet.href?go(t,e.styleSheet.href):t}{let n=e.cssText;return function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":")&&(n=function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(n)),t?go(n,t):n}}class ro{constructor(){Hn(this,"idNodeMap",new Map),Hn(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function io({element:e,maskInputOptions:t,tagName:n,type:o,value:r,maskInputFn:i}){let a=r||"";const s=o&&ao(o);return(t[n.toLowerCase()]||s&&t[s])&&(a=i?i(a,e):"*".repeat(a.length)),a}function ao(e){return e.toLowerCase()}const so="__rrweb_original__";function lo(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?ao(t):null}function co(e,t){let n;try{n=new URL(e,t??window.location.href)}catch(r){return null}const o=n.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(null==o?void 0:o[1])??null}const uo=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,po=/^(?:[a-z+]+:)?\/\//i,ho=/^www\..*/i,fo=/^(data:)([^,]*),(.*)/i;function go(e,t){return(e||"").replace(uo,((e,n,o,r,i,a)=>{const s=o||i||a,l=n||r||"";if(!s)return e;if(po.test(s)||ho.test(s))return`url(${l}${s}${l})`;if(fo.test(s))return`url(${l}${s}${l})`;if("/"===s[0])return`url(${l}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+s}${l})`;const c=t.split("/"),u=s.split("/");c.pop();for(const t of u)"."!==t&&(".."===t?c.pop():c.push(t));return`url(${l}${c.join("/")}${l})`}))}function mo(e){return e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"")}function vo(e,t){return function(e,t){const n=Array.from(t.childNodes),o=[];if(n.length>1&&e&&"string"==typeof e){const t=mo(e);for(let r=1;r<n.length;r++)if(n[r].textContent&&"string"==typeof n[r].textContent){const i=mo(n[r].textContent);for(let n=3;n<i.length;n++){const r=i.substring(0,n);if(2===t.split(r).length){const n=t.indexOf(r);for(let t=n;t<e.length;t++)if(mo(e.substring(0,t)).length===n){o.push(e.substring(0,t)),e=e.substring(t);break}break}}}}return o.push(e),o}(e,t).join("/* rr_split */")}let yo=1;const bo=new RegExp("[^a-z0-9-_:]"),wo=-2;function ko(){return yo++}let xo,So;const Co=/^[^ \t\n\r\u000c]+/,Io=/^[, \t\n\r\u000c]+/;const Eo=new WeakMap;function To(e,t){return t&&""!==t.trim()?Oo(e,t):t}function Lo(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Oo(e,t){let n=Eo.get(e);if(n||(n=e.createElement("a"),Eo.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function Ao(e,t,n,o){return o?"src"===n||"href"===n&&("use"!==t||"#"!==o[0])||"xlink:href"===n&&"#"!==o[0]?To(e,o):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function o(e){let o;const r=e.exec(t.substring(n));return r?(o=r[0],n+=o.length,o):""}const r=[];for(;o(Io),!(n>=t.length);){let i=o(Co);if(","===i.slice(-1))i=To(e,i.substring(0,i.length-1)),r.push(i);else{let o="";i=To(e,i);let a=!1;for(;;){const e=t.charAt(n);if(""===e){r.push((i+o).trim());break}if(a)")"===e&&(a=!1);else{if(","===e){n+=1,r.push((i+o).trim());break}"("===e&&(a=!0)}o+=e,n+=1}}}return r.join(", ")}(e,o):"style"===n?go(o,Oo(e)):"object"===t&&"data"===n?To(e,o):o:To(e,o):o}function Mo(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Ro(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&Ro($n.parentNode(e),t,n);for(let o=e.classList.length;o--;){const n=e.classList[o];if(t.test(n))return!0}return!!n&&Ro($n.parentNode(e),t,n)}function Po(e,t,n,o){let r;if(Qn(e)){if(r=e,!$n.childNodes(r).length)return!1}else{if(null===$n.parentElement(e))return!1;r=$n.parentElement(e)}try{if("string"==typeof t){if(o){if(r.closest(`.${t}`))return!0}else if(r.classList.contains(t))return!0}else if(Ro(r,t,o))return!0;if(n)if(o){if(r.closest(n))return!0}else if(r.matches(n))return!0}catch(i){}return!1}function Do(e,t){const{doc:n,mirror:o,blockClass:r,blockSelector:i,needsMask:a,inlineStylesheet:s,maskInputOptions:l={},maskTextFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:p,recordCanvas:h,keepIframeSrcFn:f,newlyAddedElement:g=!1,cssCaptured:m=!1}=t,v=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,o);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:zn.Document,childNodes:[],compatMode:e.compatMode}:{type:zn.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:zn.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:v};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:o,blockSelector:r,inlineStylesheet:i,maskInputOptions:a={},maskInputFn:s,dataURLOptions:l={},inlineImages:c,recordCanvas:u,keepIframeSrcFn:d,newlyAddedElement:p=!1,rootId:h}=t,f=function(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const o=e.classList[n];if(t.test(o))return!0}if(n)return e.matches(n)}catch(o){}return!1}(e,o,r),g=function(e){if(e instanceof HTMLFormElement)return"form";const t=ao(e.tagName);return bo.test(t)?"div":t}(e);let m={};const v=e.attributes.length;for(let w=0;w<v;w++){const t=e.attributes[w];Mo(g,t.name,t.value)||(m[t.name]=Ao(n,g,ao(t.name),t.value))}if("link"===g&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let o=null;t&&(o=no(t)),o&&(delete m.rel,delete m.href,m._cssText=o)}if("style"===g&&e.sheet){let t=no(e.sheet);t&&(e.childNodes.length>1&&(t=vo(t,e)),m._cssText=t)}if("input"===g||"textarea"===g||"select"===g){const t=e.value,n=e.checked;"radio"!==m.type&&"checkbox"!==m.type&&"submit"!==m.type&&"button"!==m.type&&t?m.value=io({element:e,type:lo(e),tagName:g,value:t,maskInputOptions:a,maskInputFn:s}):n&&(m.checked=n)}"option"===g&&(e.selected&&!a.select?m.selected=!0:delete m.selected);"dialog"===g&&e.open&&(m.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal");if("canvas"===g&&u)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let o=0;o<e.height;o+=50){const r=t.getImageData,i=so in r?r[so]:r;if(new Uint32Array(i.call(t,n,o,Math.min(50,e.width-n),Math.min(50,e.height-o)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(m.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),o=n.createElement("canvas");o.width=e.width,o.height=e.height;t!==o.toDataURL(l.type,l.quality)&&(m.rr_dataURL=t)}if("img"===g&&c){xo||(xo=n.createElement("canvas"),So=xo.getContext("2d"));const t=e,o=t.currentSrc||t.getAttribute("src")||"<unknown-src>",r=t.crossOrigin,i=()=>{t.removeEventListener("load",i);try{xo.width=t.naturalWidth,xo.height=t.naturalHeight,So.drawImage(t,0,0),m.rr_dataURL=xo.toDataURL(l.type,l.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i));console.warn(`Cannot inline img src=${o}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(r?m.crossOrigin=r:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i)}if("audio"===g||"video"===g){const t=m;t.rr_mediaState=e.paused?"paused":"played",t.rr_mediaCurrentTime=e.currentTime,t.rr_mediaPlaybackRate=e.playbackRate,t.rr_mediaMuted=e.muted,t.rr_mediaLoop=e.loop,t.rr_mediaVolume=e.volume}p||(e.scrollLeft&&(m.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(m.rr_scrollTop=e.scrollTop));if(f){const{width:t,height:n}=e.getBoundingClientRect();m={class:m.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==g||d(m.src)||(e.contentDocument||(m.rr_src=m.src),delete m.src);let y;try{customElements.get(g)&&(y=!0)}catch(b){}return{type:zn.Element,tagName:g,attributes:m,childNodes:[],isSVG:Lo(e)||void 0,needBlock:f,rootId:h,isCustom:y}}(e,{doc:n,blockClass:r,blockSelector:i,inlineStylesheet:s,maskInputOptions:l,maskInputFn:u,dataURLOptions:d,inlineImages:p,recordCanvas:h,keepIframeSrcFn:f,newlyAddedElement:g,rootId:v});case e.TEXT_NODE:return function(e,t){const{needsMask:n,maskTextFn:o,rootId:r,cssCaptured:i}=t,a=$n.parentNode(e),s=a&&a.tagName;let l="";const c="STYLE"===s||void 0,u="SCRIPT"===s||void 0;u?l="SCRIPT_PLACEHOLDER":i||(l=$n.textContent(e),c&&l&&(l=go(l,Oo(t.doc))));!c&&!u&&l&&n&&(l=o?o(l,$n.parentElement(e)):l.replace(/[\S]/g,"*"));return{type:zn.Text,textContent:l||"",rootId:r}}(e,{doc:n,needsMask:a,maskTextFn:c,rootId:v,cssCaptured:m});case e.CDATA_SECTION_NODE:return{type:zn.CDATA,textContent:"",rootId:v};case e.COMMENT_NODE:return{type:zn.Comment,textContent:$n.textContent(e)||"",rootId:v};default:return!1}}function No(e){return null==e?"":e.toLowerCase()}function jo(e,t){const{doc:n,mirror:o,blockClass:r,blockSelector:i,maskTextClass:a,maskTextSelector:s,skipChild:l=!1,inlineStylesheet:c=!0,maskInputOptions:u={},maskTextFn:d,maskInputFn:p,slimDOMOptions:h,dataURLOptions:f={},inlineImages:g=!1,recordCanvas:m=!1,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b=5e3,onStylesheetLoad:w,stylesheetLoadTimeout:k=5e3,keepIframeSrcFn:x=(()=>!1),newlyAddedElement:S=!1,cssCaptured:C=!1}=t;let{needsMask:I}=t,{preserveWhiteSpace:E=!0}=t;if(!I){I=Po(e,a,s,void 0===I)}const T=Do(e,{doc:n,mirror:o,blockClass:r,blockSelector:i,needsMask:I,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:p,dataURLOptions:f,inlineImages:g,recordCanvas:m,keepIframeSrcFn:x,newlyAddedElement:S,cssCaptured:C});if(!T)return console.warn(e,"not serialized"),null;let L;L=o.hasNode(e)?o.getId(e):function(e,t){if(t.comment&&e.type===zn.Comment)return!0;if(e.type===zn.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===co(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(No(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===No(e.attributes.name)||"icon"===No(e.attributes.rel)||"apple-touch-icon"===No(e.attributes.rel)||"shortcut icon"===No(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&No(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(No(e.attributes.property).match(/^(og|twitter|fb):/)||No(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===No(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===No(e.attributes.name)||"googlebot"===No(e.attributes.name)||"bingbot"===No(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===No(e.attributes.name)||"generator"===No(e.attributes.name)||"framework"===No(e.attributes.name)||"publisher"===No(e.attributes.name)||"progid"===No(e.attributes.name)||No(e.attributes.property).match(/^article:/)||No(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===No(e.attributes.name)||"yandex-verification"===No(e.attributes.name)||"csrf-token"===No(e.attributes.name)||"p:domain_verify"===No(e.attributes.name)||"verify-v1"===No(e.attributes.name)||"verification"===No(e.attributes.name)||"shopify-checkout-api-token"===No(e.attributes.name)))return!0}}return!1}(T,h)||!E&&T.type===zn.Text&&!T.textContent.replace(/^\s+|\s+$/gm,"").length?wo:ko();const O=Object.assign(T,{id:L});if(o.add(e,O),L===wo)return null;v&&v(e);let A=!l;if(O.type===zn.Element){A=A&&!O.needBlock,delete O.needBlock;const t=$n.shadowRoot(e);t&&to(t)&&(O.isShadowHost=!0)}if((O.type===zn.Document||O.type===zn.Element)&&A){h.headWhitespace&&O.type===zn.Element&&"head"===O.tagName&&(E=!1);const t={doc:n,mirror:o,blockClass:r,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:l,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:p,slimDOMOptions:h,dataURLOptions:f,inlineImages:g,recordCanvas:m,preserveWhiteSpace:E,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:w,stylesheetLoadTimeout:k,keepIframeSrcFn:x,cssCaptured:!1};if(O.type===zn.Element&&"textarea"===O.tagName&&void 0!==O.attributes.value);else{O.type===zn.Element&&void 0!==O.attributes._cssText&&"string"==typeof O.attributes._cssText&&(t.cssCaptured=!0);for(const n of Array.from($n.childNodes(e))){const e=jo(n,t);e&&O.childNodes.push(e)}}let S=null;if(Qn(e)&&(S=$n.shadowRoot(e)))for(const e of Array.from($n.childNodes(S))){const n=jo(e,t);n&&(to(S)&&(n.isShadow=!0),O.childNodes.push(n))}}const M=$n.parentNode(e);return M&&eo(M)&&to(M)&&(O.isShadow=!0),O.type===zn.Element&&"iframe"===O.tagName&&function(e,t,n){const o=e.contentWindow;if(!o)return;let r,i=!1;try{r=o.document.readyState}catch(s){return}if("complete"!==r){const o=setTimeout((()=>{i||(t(),i=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(o),i=!0,t()}))}const a="about:blank";if(o.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&y){const n=jo(t,{doc:t,mirror:o,blockClass:r,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:p,slimDOMOptions:h,dataURLOptions:f,inlineImages:g,recordCanvas:m,preserveWhiteSpace:E,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:w,stylesheetLoadTimeout:k,keepIframeSrcFn:x});n&&y(e,n)}}),b),O.type===zn.Element&&"link"===O.tagName&&"string"==typeof O.attributes.rel&&("stylesheet"===O.attributes.rel||"preload"===O.attributes.rel&&"string"==typeof O.attributes.href&&"css"===co(O.attributes.href))&&function(e,t,n){let o,r=!1;try{o=e.sheet}catch(a){return}if(o)return;const i=setTimeout((()=>{r||(t(),r=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(i),r=!0,t()}))}(e,(()=>{if(w){const t=jo(e,{doc:n,mirror:o,blockClass:r,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:p,slimDOMOptions:h,dataURLOptions:f,inlineImages:g,recordCanvas:m,preserveWhiteSpace:E,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:w,stylesheetLoadTimeout:k,keepIframeSrcFn:x});t&&w(e,t)}}),k),O}function Fo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bo(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})})),n}var _o={exports:{}},Uo=String,Ho=function(){return{isColorSupported:!1,reset:Uo,bold:Uo,dim:Uo,italic:Uo,underline:Uo,inverse:Uo,hidden:Uo,strikethrough:Uo,black:Uo,red:Uo,green:Uo,yellow:Uo,blue:Uo,magenta:Uo,cyan:Uo,white:Uo,gray:Uo,bgBlack:Uo,bgRed:Uo,bgGreen:Uo,bgYellow:Uo,bgBlue:Uo,bgMagenta:Uo,bgCyan:Uo,bgWhite:Uo}};_o.exports=Ho(),_o.exports.createColors=Ho;var zo=_o.exports;const qo=Bo(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let Wo=zo,Vo=qo,Go=class e extends Error{constructor(t,n,o,r,i,a){super(t),this.name="CssSyntaxError",this.reason=t,i&&(this.file=i),r&&(this.source=r),a&&(this.plugin=a),void 0!==n&&void 0!==o&&("number"==typeof n?(this.line=n,this.column=o):(this.line=n.line,this.column=n.column,this.endLine=o.line,this.endColumn=o.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=Wo.isColorSupported),Vo&&e&&(t=Vo(t));let n,o,r=t.split(/\r?\n/),i=Math.max(this.line-3,0),a=Math.min(this.line+2,r.length),s=String(a).length;if(e){let{bold:e,gray:t,red:r}=Wo.createColors(!0);n=t=>e(r(t)),o=e=>t(e)}else n=o=e=>e;return r.slice(i,a).map(((e,t)=>{let r=i+1+t,a=" "+(" "+r).slice(-s)+" | ";if(r===this.line){let t=o(a.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return n(">")+o(a)+e+"\n "+t+n("^")}return" "+o(a)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var Yo=Go;Go.default=Go;var Xo={};Xo.isClean=Symbol("isClean"),Xo.my=Symbol("my");const Ko={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};let Jo=class{constructor(e){this.builder=e}atrule(e,t){let n="@"+e.name,o=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?n+=e.raws.afterName:o&&(n+=" "),e.nodes)this.block(e,n+o);else{let r=(e.raws.between||"")+(t?";":"");this.builder(n+o+r,e)}}beforeAfter(e,t){let n;n="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let o=e.parent,r=0;for(;o&&"root"!==o.type;)r+=1,o=o.parent;if(n.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<r;e++)n+=t}return n}block(e,t){let n,o=this.raw(e,"between","beforeOpen");this.builder(t+o+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let n=this.raw(e,"semicolon");for(let o=0;o<e.nodes.length;o++){let r=e.nodes[o],i=this.raw(r,"before");i&&this.builder(i),this.stringify(r,t!==o||n)}}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),o=e.prop+n+this.rawValue(e,"value");e.important&&(o+=e.raws.important||" !important"),t&&(o+=";"),this.builder(o,e)}document(e){this.body(e)}raw(e,t,n){let o;if(n||(n=t),t&&(o=e.raws[t],void 0!==o))return o;let r=e.parent;if("before"===n){if(!r||"root"===r.type&&r.first===e)return"";if(r&&"document"===r.type)return""}if(!r)return Ko[n];let i=e.root();if(i.rawCache||(i.rawCache={}),void 0!==i.rawCache[n])return i.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);{let r="raw"+((a=n)[0].toUpperCase()+a.slice(1));this[r]?o=this[r](i,e):i.walk((e=>{if(o=e.raws[t],void 0!==o)return!1}))}var a;return void 0===o&&(o=Ko[n]),i.rawCache[n]=o,o}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let n;return e.walkComments((e=>{if(void 0!==e.raws.before)return n=e.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls((e=>{if(void 0!==e.raws.before)return n=e.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return t=n.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((n=>{let o=n.parent;if(o&&o!==e&&o.parent&&o.parent===e&&void 0!==n.raws.before){let e=n.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let n=e[t],o=e.raws[t];return o&&o.value===n?o.raw:n}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var Zo=Jo;Jo.default=Jo;let $o=Zo;function Qo(e,t){new $o(t).stringify(e)}var er=Qo;Qo.default=Qo;let{isClean:tr,my:nr}=Xo,or=Yo,rr=Zo,ir=er;function ar(e,t){let n=new e.constructor;for(let o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;if("proxyCache"===o)continue;let r=e[o],i=typeof r;"parent"===o&&"object"===i?t&&(n[o]=t):"source"===o?n[o]=r:Array.isArray(r)?n[o]=r.map((e=>ar(e,n))):("object"===i&&null!==r&&(r=ar(r)),n[o]=r)}return n}let sr=class{constructor(e={}){this.raws={},this[tr]=!1,this[nr]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let n of e[t])"function"==typeof n.clone?this.append(n.clone()):this.append(n)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=ar(this);for(let n in e)t[n]=e[n];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:n,start:o}=this.rangeBy(t);return this.source.input.error(e,{column:o.column,line:o.line},{column:n.column,line:n.line},t)}return new or(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,n)=>(e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[tr]){this[tr]=!1;let e=this;for(;e=e.parent;)e[tr]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let n=this.source.start;if(e.index)n=this.positionInside(e.index,t);else if(e.word){let o=(t=this.toString()).indexOf(e.word);-1!==o&&(n=this.positionInside(o,t))}return n}positionInside(e,t){let n=t||this.toString(),o=this.source.start.column,r=this.source.start.line;for(let i=0;i<e;i++)"\n"===n[i]?(o=1,r+=1):o+=1;return{column:o,line:r}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let o=this.toString(),r=o.indexOf(e.word);-1!==r&&(t=this.positionInside(r,o),n=this.positionInside(r+e.word.length,o))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<t.line||n.line===t.line&&n.column<=t.column)&&(n={column:t.column+1,line:t.line}),{end:n,start:t}}raw(e,t){return(new rr).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let o of e)o===this?n=!0:n?(this.parent.insertAfter(t,o),t=o):this.parent.insertBefore(t,o);n||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let n={},o=null==t;t=t||new Map;let r=0;for(let i in this){if(!Object.prototype.hasOwnProperty.call(this,i))continue;if("parent"===i||"proxyCache"===i)continue;let e=this[i];if(Array.isArray(e))n[i]=e.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof e&&e.toJSON)n[i]=e.toJSON(null,t);else if("source"===i){let o=t.get(e.input);null==o&&(o=r,t.set(e.input,r),r++),n[i]={end:e.end,inputId:o,start:e.start}}else n[i]=e}return o&&(n.inputs=[...t.keys()].map((e=>e.toJSON()))),n}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=ir){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,n){let o={node:this};for(let r in n)o[r]=n[r];return e.warn(t,o)}get proxyOf(){return this}};var lr=sr;sr.default=sr;let cr=lr,ur=class extends cr{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var dr=ur;ur.default=ur;var pr={nanoid:(e=21)=>{let t="",n=e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(n=t)=>{let o="",r=n;for(;r--;)o+=e[Math.random()*e.length|0];return o}};let{SourceMapConsumer:hr,SourceMapGenerator:fr}=qo,{existsSync:gr,readFileSync:mr}=qo,{dirname:vr,join:yr}=qo;let br=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,o=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=vr(this.mapFile)),o&&(this.text=o)}consumer(){return this.consumerCache||(this.consumerCache=new hr(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let n=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+n)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let n=e.lastIndexOf(t.pop()),o=e.indexOf("*/",n);n>-1&&o>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,o)))}loadFile(e){if(this.root=vr(e),gr(e))return this.mapFile=e,mr(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof hr)return fr.fromSourceMap(t).toString();if(t instanceof fr)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let n=t(e);if(n){let e=this.loadFile(n);if(!e)throw new Error("Unable to load previous source map: "+n.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=yr(vr(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var wr=br;br.default=br;let{SourceMapConsumer:kr,SourceMapGenerator:xr}=qo,{fileURLToPath:Sr,pathToFileURL:Cr}=qo,{isAbsolute:Ir,resolve:Er}=qo,{nanoid:Tr}=pr,Lr=qo,Or=Yo,Ar=wr,Mr=Symbol("fromOffsetCache"),Rr=Boolean(kr&&xr),Pr=Boolean(Er&&Ir),Dr=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!Pr||/^\w+:\/\//.test(t.from)||Ir(t.from)?this.file=t.from:this.file=Er(t.from)),Pr&&Rr){let e=new Ar(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+Tr(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,n,o={}){let r,i,a;if(t&&"object"==typeof t){let e=t,o=n;if("number"==typeof e.offset){let o=this.fromOffset(e.offset);t=o.line,n=o.col}else t=e.line,n=e.column;if("number"==typeof o.offset){let e=this.fromOffset(o.offset);i=e.line,a=e.col}else i=o.line,a=o.column}else if(!n){let e=this.fromOffset(t);t=e.line,n=e.col}let s=this.origin(t,n,i,a);return r=s?new Or(e,void 0===s.endLine?s.line:{column:s.column,line:s.line},void 0===s.endLine?s.column:{column:s.endColumn,line:s.endLine},s.source,s.file,o.plugin):new Or(e,void 0===i?t:{column:n,line:t},void 0===i?n:{column:a,line:i},this.css,this.file,o.plugin),r.input={column:n,endColumn:a,endLine:i,line:t,source:this.css},this.file&&(Cr&&(r.input.url=Cr(this.file).toString()),r.input.file=this.file),r}fromOffset(e){let t,n;if(this[Mr])n=this[Mr];else{let e=this.css.split("\n");n=new Array(e.length);let t=0;for(let o=0,r=e.length;o<r;o++)n[o]=t,t+=e[o].length+1;this[Mr]=n}t=n[n.length-1];let o=0;if(e>=t)o=n.length-1;else{let t,r=n.length-2;for(;o<r;)if(t=o+(r-o>>1),e<n[t])r=t-1;else{if(!(e>=n[t+1])){o=t;break}o=t+1}}return{col:e-n[o]+1,line:o+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:Er(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,n,o){if(!this.map)return!1;let r,i,a=this.map.consumer(),s=a.originalPositionFor({column:t,line:e});if(!s.source)return!1;"number"==typeof n&&(r=a.originalPositionFor({column:o,line:n})),i=Ir(s.source)?Cr(s.source):new URL(s.source,this.map.consumer().sourceRoot||Cr(this.map.mapFile));let l={column:s.column,endColumn:r&&r.column,endLine:r&&r.line,line:s.line,url:i.toString()};if("file:"===i.protocol){if(!Sr)throw new Error("file: protocol is not available in this PostCSS build");l.file=Sr(i)}let c=a.sourceContentFor(s.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var Nr=Dr;Dr.default=Dr,Lr&&Lr.registerInput&&Lr.registerInput(Dr);let{SourceMapConsumer:jr,SourceMapGenerator:Fr}=qo,{dirname:Br,relative:_r,resolve:Ur,sep:Hr}=qo,{pathToFileURL:zr}=qo,qr=Nr,Wr=Boolean(jr&&Fr),Vr=Boolean(Br&&Ur&&_r&&Hr);var Gr=class{constructor(e,t,n,o){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n,this.css=o,this.originalCSS=o,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,n=this.toUrl(this.path(e.file)),o=e.root||Br(e.file);!1===this.mapOpts.sourcesContent?(t=new jr(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,n,this.toUrl(this.path(o)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Vr&&Wr&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Fr.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Fr({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Fr({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,n=1,o=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((a,s,l)=>{if(this.css+=a,s&&"end"!==l&&(i.generated.line=n,i.generated.column=o-1,s.source&&s.source.start?(i.source=this.sourcePath(s),i.original.line=s.source.start.line,i.original.column=s.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),e=a.match(/\n/g),e?(n+=e.length,t=a.lastIndexOf("\n"),o=a.length-t):o+=a.length,s&&"start"!==l){let e=s.parent||{raws:{}};("decl"===s.type||"atrule"===s.type&&!s.nodes)&&s===e.last&&!e.raws.semicolon||(s.source&&s.source.end?(i.source=this.sourcePath(s),i.original.line=s.source.end.line,i.original.column=s.source.end.column-1,i.generated.line=n,i.generated.column=o-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=n,i.generated.column=o-1,this.map.addMapping(i)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let n=this.opts.to?Br(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(n=Br(Ur(n,this.mapOpts.annotation)));let o=_r(n,e);return this.memoizedPaths.set(e,o),o}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new qr(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let n=t.source.input.from;if(n&&!e[n]){e[n]=!0;let o=this.usesFileUrls?this.toFileUrl(n):this.toUrl(this.path(n));this.map.setSourceContent(o,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(zr){let t=zr(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===Hr&&(e=e.replace(/\\/g,"/"));let n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}};let Yr=lr,Xr=class extends Yr{constructor(e){super(e),this.type="comment"}};var Kr=Xr;Xr.default=Xr;let Jr,Zr,$r,Qr,{isClean:ei,my:ti}=Xo,ni=dr,oi=Kr,ri=lr;function ii(e){return e.map((e=>(e.nodes&&(e.nodes=ii(e.nodes)),delete e.source,e)))}function ai(e){if(e[ei]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)ai(t)}let si=class e extends ri{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,n,o=this.getIterator();for(;this.indexes[o]<this.proxyOf.nodes.length&&(t=this.indexes[o],n=e(this.proxyOf.nodes[t],t),!1!==n);)this.indexes[o]+=1;return delete this.indexes[o],n}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...n)=>e[t](...n.map((e=>"function"==typeof e?(t,n)=>e(t.toProxy(),n):e))):"every"===t||"some"===t?n=>e[t](((e,...t)=>n(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,n)=>(e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let n,o=this.index(e),r=this.normalize(t,this.proxyOf.nodes[o]).reverse();o=this.index(e);for(let i of r)this.proxyOf.nodes.splice(o+1,0,i);for(let i in this.indexes)n=this.indexes[i],o<n&&(this.indexes[i]=n+r.length);return this.markDirty(),this}insertBefore(e,t){let n,o=this.index(e),r=0===o&&"prepend",i=this.normalize(t,this.proxyOf.nodes[o],r).reverse();o=this.index(e);for(let a of i)this.proxyOf.nodes.splice(o,0,a);for(let a in this.indexes)n=this.indexes[a],o<=n&&(this.indexes[a]=n+i.length);return this.markDirty(),this}normalize(t,n){if("string"==typeof t)t=ii(Jr(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new ni(t)]}else if(t.selector)t=[new Zr(t)];else if(t.name)t=[new $r(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new oi(t)]}return t.map((t=>(t[ti]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[ei]&&ai(t),void 0===t.raws.before&&n&&void 0!==n.raws.before&&(t.raws.before=n.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t)))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let n in this.indexes)t=this.indexes[n],t>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls((o=>{t.props&&!t.props.includes(o.prop)||t.fast&&!o.value.includes(t.fast)||(o.value=o.value.replace(e,n))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,n)=>{let o;try{o=e(t,n)}catch(r){throw t.addToError(r)}return!1!==o&&t.walk&&(o=t.walk(e)),o}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((n,o)=>{if("atrule"===n.type&&e.test(n.name))return t(n,o)})):this.walk(((n,o)=>{if("atrule"===n.type&&n.name===e)return t(n,o)})):(t=e,this.walk(((e,n)=>{if("atrule"===e.type)return t(e,n)})))}walkComments(e){return this.walk(((t,n)=>{if("comment"===t.type)return e(t,n)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((n,o)=>{if("decl"===n.type&&e.test(n.prop))return t(n,o)})):this.walk(((n,o)=>{if("decl"===n.type&&n.prop===e)return t(n,o)})):(t=e,this.walk(((e,n)=>{if("decl"===e.type)return t(e,n)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((n,o)=>{if("rule"===n.type&&e.test(n.selector))return t(n,o)})):this.walk(((n,o)=>{if("rule"===n.type&&n.selector===e)return t(n,o)})):(t=e,this.walk(((e,n)=>{if("rule"===e.type)return t(e,n)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};si.registerParse=e=>{Jr=e},si.registerRule=e=>{Zr=e},si.registerAtRule=e=>{$r=e},si.registerRoot=e=>{Qr=e};var li=si;si.default=si,si.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,$r.prototype):"rule"===e.type?Object.setPrototypeOf(e,Zr.prototype):"decl"===e.type?Object.setPrototypeOf(e,ni.prototype):"comment"===e.type?Object.setPrototypeOf(e,oi.prototype):"root"===e.type&&Object.setPrototypeOf(e,Qr.prototype),e[ti]=!0,e.nodes&&e.nodes.forEach((e=>{si.rebuild(e)}))};let ci,ui,di=li,pi=class extends di{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new ci(new ui,this,e).stringify()}};pi.registerLazyResult=e=>{ci=e},pi.registerProcessor=e=>{ui=e};var hi=pi;pi.default=pi;let fi=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let n in t)this[n]=t[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var gi=fi;fi.default=fi;let mi=gi,vi=class{constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new mi(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}};var yi=vi;vi.default=vi;const bi="'".charCodeAt(0),wi='"'.charCodeAt(0),ki="\\".charCodeAt(0),xi="/".charCodeAt(0),Si="\n".charCodeAt(0),Ci=" ".charCodeAt(0),Ii="\f".charCodeAt(0),Ei="\t".charCodeAt(0),Ti="\r".charCodeAt(0),Li="[".charCodeAt(0),Oi="]".charCodeAt(0),Ai="(".charCodeAt(0),Mi=")".charCodeAt(0),Ri="{".charCodeAt(0),Pi="}".charCodeAt(0),Di=";".charCodeAt(0),Ni="*".charCodeAt(0),ji=":".charCodeAt(0),Fi="@".charCodeAt(0),Bi=/[\t\n\f\r "#'()/;[\\\]{}]/g,_i=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Ui=/.[\r\n"'(/\\]/,Hi=/[\da-f]/i;let zi=li,qi=class extends zi{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var Wi=qi;qi.default=qi,zi.registerAtRule(qi);let Vi,Gi,Yi=li,Xi=class extends Yi{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,n){let o=super.normalize(e);if(t)if("prepend"===n)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let r of o)r.raws.before=t.raws.before;return o}removeChild(e,t){let n=this.index(e);return!t&&0===n&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}toResult(e={}){return new Vi(new Gi,this,e).stringify()}};Xi.registerLazyResult=e=>{Vi=e},Xi.registerProcessor=e=>{Gi=e};var Ki=Xi;Xi.default=Xi,Yi.registerRoot(Xi);let Ji={comma:e=>Ji.split(e,[","],!0),space:e=>Ji.split(e,[" ","\n","\t"]),split(e,t,n){let o=[],r="",i=!1,a=0,s=!1,l="",c=!1;for(let u of e)c?c=!1:"\\"===u?c=!0:s?u===l&&(s=!1):'"'===u||"'"===u?(s=!0,l=u):"("===u?a+=1:")"===u?a>0&&(a-=1):0===a&&t.includes(u)&&(i=!0),i?(""!==r&&o.push(r.trim()),r="",i=!1):r+=u;return(n||""!==r)&&o.push(r.trim()),o}};var Zi=Ji;Ji.default=Ji;let $i=li,Qi=Zi,ea=class extends $i{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return Qi.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}};var ta=ea;ea.default=ea,$i.registerRule(ea);let na=dr,oa=function(e,t={}){let n,o,r,i,a,s,l,c,u,d,p=e.css.valueOf(),h=t.ignoreErrors,f=p.length,g=0,m=[],v=[];function y(t){throw e.error("Unclosed "+t,g)}return{back:function(e){v.push(e)},endOfFile:function(){return 0===v.length&&g>=f},nextToken:function(e){if(v.length)return v.pop();if(g>=f)return;let t=!!e&&e.ignoreUnclosed;switch(n=p.charCodeAt(g),n){case Si:case Ci:case Ei:case Ti:case Ii:o=g;do{o+=1,n=p.charCodeAt(o)}while(n===Ci||n===Si||n===Ei||n===Ti||n===Ii);d=["space",p.slice(g,o)],g=o-1;break;case Li:case Oi:case Ri:case Pi:case ji:case Di:case Mi:{let e=String.fromCharCode(n);d=[e,e,g];break}case Ai:if(c=m.length?m.pop()[1]:"",u=p.charCodeAt(g+1),"url"===c&&u!==bi&&u!==wi&&u!==Ci&&u!==Si&&u!==Ei&&u!==Ii&&u!==Ti){o=g;do{if(s=!1,o=p.indexOf(")",o+1),-1===o){if(h||t){o=g;break}y("bracket")}for(l=o;p.charCodeAt(l-1)===ki;)l-=1,s=!s}while(s);d=["brackets",p.slice(g,o+1),g,o],g=o}else o=p.indexOf(")",g+1),i=p.slice(g,o+1),-1===o||Ui.test(i)?d=["(","(",g]:(d=["brackets",i,g,o],g=o);break;case bi:case wi:r=n===bi?"'":'"',o=g;do{if(s=!1,o=p.indexOf(r,o+1),-1===o){if(h||t){o=g+1;break}y("string")}for(l=o;p.charCodeAt(l-1)===ki;)l-=1,s=!s}while(s);d=["string",p.slice(g,o+1),g,o],g=o;break;case Fi:Bi.lastIndex=g+1,Bi.test(p),o=0===Bi.lastIndex?p.length-1:Bi.lastIndex-2,d=["at-word",p.slice(g,o+1),g,o],g=o;break;case ki:for(o=g,a=!0;p.charCodeAt(o+1)===ki;)o+=1,a=!a;if(n=p.charCodeAt(o+1),a&&n!==xi&&n!==Ci&&n!==Si&&n!==Ei&&n!==Ti&&n!==Ii&&(o+=1,Hi.test(p.charAt(o)))){for(;Hi.test(p.charAt(o+1));)o+=1;p.charCodeAt(o+1)===Ci&&(o+=1)}d=["word",p.slice(g,o+1),g,o],g=o;break;default:n===xi&&p.charCodeAt(g+1)===Ni?(o=p.indexOf("*/",g+2)+1,0===o&&(h||t?o=p.length:y("comment")),d=["comment",p.slice(g,o+1),g,o],g=o):(_i.lastIndex=g+1,_i.test(p),o=0===_i.lastIndex?p.length-1:_i.lastIndex-2,d=["word",p.slice(g,o+1),g,o],m.push(d),g=o)}return g++,d},position:function(){return g}}},ra=Kr,ia=Wi,aa=Ki,sa=ta;const la={empty:!0,space:!0};var ca=class{constructor(e){this.input=e,this.root=new aa,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,n,o,r=new ia;r.name=e[1].slice(1),""===r.name&&this.unnamedAtrule(r,e),this.init(r,e[2]);let i=!1,a=!1,s=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){r.source.end=this.getPosition(e[2]),r.source.end.offset++,this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(s.length>0){for(o=s.length-1,n=s[o];n&&"space"===n[0];)n=s[--o];n&&(r.source.end=this.getPosition(n[3]||n[2]),r.source.end.offset++)}this.end(e);break}s.push(e)}else s.push(e);if(this.tokenizer.endOfFile()){i=!0;break}}r.raws.between=this.spacesAndCommentsFromEnd(s),s.length?(r.raws.afterName=this.spacesAndCommentsFromStart(s),this.raw(r,"params",s),i&&(e=s[s.length-1],r.source.end=this.getPosition(e[3]||e[2]),r.source.end.offset++,this.spaces=r.raws.between,r.raws.between="")):(r.raws.afterName="",r.params=""),a&&(r.nodes=[],this.current=r)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let n,o=0;for(let r=t-1;r>=0&&(n=e[r],"space"===n[0]||(o+=1,2!==o));r--);throw this.input.error("Missed semicolon","word"===n[0]?n[3]+1:n[2])}colon(e){let t,n,o,r=0;for(let[i,a]of e.entries()){if(t=a,n=t[0],"("===n&&(r+=1),")"===n&&(r-=1),0===r&&":"===n){if(o){if("word"===o[0]&&"progid"===o[1])continue;return i}this.doubleColon(t)}o=t}return!1}comment(e){let t=new ra;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let e=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=oa(this.input)}decl(e,t){let n=new na;this.init(n,e[0][2]);let o,r=e[e.length-1];for(";"===r[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(r[3]||r[2]||function(e){for(let t=e.length-1;t>=0;t--){let n=e[t],o=n[3]||n[2];if(o)return o}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;n.prop+=e.shift()[1]}for(n.raws.between="";e.length;){if(o=e.shift(),":"===o[0]){n.raws.between+=o[1];break}"word"===o[0]&&/\w/.test(o[1])&&this.unknownWord([o]),n.raws.between+=o[1]}"_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let i,a=[];for(;e.length&&(i=e[0][0],"space"===i||"comment"===i);)a.push(e.shift());this.precheckMissedSemicolon(e);for(let s=e.length-1;s>=0;s--){if(o=e[s],"!important"===o[1].toLowerCase()){n.important=!0;let t=this.stringFrom(e,s);t=this.spacesFromEnd(e)+t," !important"!==t&&(n.raws.important=t);break}if("important"===o[1].toLowerCase()){let t=e.slice(0),o="";for(let e=s;e>0;e--){let n=t[e][0];if(0===o.trim().indexOf("!")&&"space"!==n)break;o=t.pop()[1]+o}0===o.trim().indexOf("!")&&(n.important=!0,n.raws.important=o,e=t)}if("space"!==o[0]&&"comment"!==o[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(n.raws.between+=a.map((e=>e[1])).join(""),a=[]),this.raw(n,"value",a.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new sa;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,n=null,o=!1,r=null,i=[],a=e[1].startsWith("--"),s=[],l=e;for(;l;){if(n=l[0],s.push(l),"("===n||"["===n)r||(r=l),i.push("("===n?")":"]");else if(a&&o&&"{"===n)r||(r=l),i.push("}");else if(0===i.length){if(";"===n){if(o)return void this.decl(s,a);break}if("{"===n)return void this.rule(s);if("}"===n){this.tokenizer.back(s.pop()),t=!0;break}":"===n&&(o=!0)}else n===i[i.length-1]&&(i.pop(),0===i.length&&(r=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),i.length>0&&this.unclosedBracket(r),t&&o){if(!a)for(;s.length&&(l=s[s.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(s.pop());this.decl(s,a)}else this.unknownWord(s)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,n,o){let r,i,a,s,l=n.length,c="",u=!0;for(let d=0;d<l;d+=1)r=n[d],i=r[0],"space"!==i||d!==l-1||o?"comment"===i?(s=n[d-1]?n[d-1][0]:"empty",a=n[d+1]?n[d+1][0]:"empty",la[s]||la[a]||","===c.slice(-1)?u=!1:c+=r[1]):c+=r[1]:u=!1;if(!u){let o=n.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:o,value:c}}e[t]=c}rule(e){e.pop();let t=new sa;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)n+=e.shift()[1];return n}spacesFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)n=e.pop()[1]+n;return n}stringFrom(e,t){let n="";for(let o=t;o<e.length;o++)n+=e[o][1];return e.splice(t,e.length-t),n}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};let ua=li,da=ca,pa=Nr;function ha(e,t){let n=new pa(e,t),o=new da(n);try{o.parse()}catch(r){throw r}return o.root}var fa=ha;ha.default=ha,ua.registerParse(ha);let{isClean:ga,my:ma}=Xo,va=Gr,ya=er,ba=li,wa=hi,ka=yi,xa=fa,Sa=Ki;const Ca={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Ia={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Ea={Once:!0,postcssPlugin:!0,prepare:!0},Ta=0;function La(e){return"object"==typeof e&&"function"==typeof e.then}function Oa(e){let t=!1,n=Ca[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,Ta,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,Ta,n+"Exit"]:[n,n+"Exit"]}function Aa(e){let t;return t="document"===e.type?["Document",Ta,"DocumentExit"]:"root"===e.type?["Root",Ta,"RootExit"]:Oa(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function Ma(e){return e[ga]=!1,e.nodes&&e.nodes.forEach((e=>Ma(e))),e}let Ra={},Pa=class e{constructor(t,n,o){let r;if(this.stringified=!1,this.processed=!1,"object"!=typeof n||null===n||"root"!==n.type&&"document"!==n.type)if(n instanceof e||n instanceof ka)r=Ma(n.root),n.map&&(void 0===o.map&&(o.map={}),o.map.inline||(o.map.inline=!1),o.map.prev=n.map);else{let e=xa;o.syntax&&(e=o.syntax.parse),o.parser&&(e=o.parser),e.parse&&(e=e.parse);try{r=e(n,o)}catch(i){this.processed=!0,this.error=i}r&&!r[ma]&&ba.rebuild(r)}else r=Ma(n);this.result=new ka(t,r,o),this.helpers={...Ra,postcss:Ra,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?n.postcssVersion:(e.plugin=n.postcssPlugin,e.setMessage())}catch(o){console&&console.error&&console.error(o)}return e}prepareVisitors(){this.listeners={};let e=(e,t,n)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,n])};for(let t of this.plugins)if("object"==typeof t)for(let n in t){if(!Ia[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!Ea[n])if("object"==typeof t[n])for(let o in t[n])e(t,"*"===o?n:n+"-"+o.toLowerCase(),t[n][o]);else"function"==typeof t[n]&&e(t,n,t[n])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let n=0;n<this.plugins.length;n++){let t=this.plugins[n],o=this.runOnRoot(t);if(La(o))try{await o}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[ga];){e[ga]=!0;let n=[Aa(e)];for(;n.length>0;){let e=this.visitTick(n);if(La(e))try{await e}catch(t){let e=n[n.length-1].node;throw this.handleError(t,e)}}}if(this.listeners.OnceExit)for(let[n,o]of this.listeners.OnceExit){this.result.lastPlugin=n;try{if("document"===e.type){let t=e.nodes.map((e=>o(e,this.helpers)));await Promise.all(t)}else await o(e,this.helpers)}catch(t){throw this.handleError(t)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return La(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=ya;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let n=new va(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(La(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[ga];)e[ga]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[o,r]of e){let e;this.result.lastPlugin=o;try{e=r(t,this.helpers)}catch(n){throw this.handleError(n,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(La(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:n,visitors:o}=t;if("root"!==n.type&&"document"!==n.type&&!n.parent)return void e.pop();if(o.length>0&&t.visitorIndex<o.length){let[e,r]=o[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===o.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return r(n.toProxy(),this.helpers)}catch(i){throw this.handleError(i,n)}}if(0!==t.iterator){let o,r=t.iterator;for(;o=n.nodes[n.indexes[r]];)if(n.indexes[r]+=1,!o[ga])return o[ga]=!0,void e.push(Aa(o));t.iterator=0,delete n.indexes[r]}let r=t.events;for(;t.eventIndex<r.length;){let e=r[t.eventIndex];if(t.eventIndex+=1,e===Ta)return void(n.nodes&&n.nodes.length&&(n[ga]=!0,t.iterator=n.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[ga]=!0;let t=Oa(e);for(let n of t)if(n===Ta)e.nodes&&e.each((e=>{e[ga]||this.walkSync(e)}));else{let t=this.listeners[n];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};Pa.registerPostcss=e=>{Ra=e};var Da=Pa;Pa.default=Pa,Sa.registerLazyResult(Pa),wa.registerLazyResult(Pa);let Na=Gr,ja=er,Fa=fa;const Ba=yi;let _a=class{constructor(e,t,n){let o;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=n,this._map=void 0;let r=ja;this.result=new Ba(this._processor,o,this._opts),this.result.css=t;let i=this;Object.defineProperty(this.result,"root",{get:()=>i.root});let a=new Na(r,o,this._opts,t);if(a.isMap()){let[e,t]=a.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else a.clearAnnotation(),this.result.css=a.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=Fa;try{e=t(this._css,this._opts)}catch(n){this.error=n}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var Ua=_a;_a.default=_a;let Ha=Ua,za=Da,qa=hi,Wa=Ki,Va=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let n of e)if(!0===n.postcss?n=n():n.postcss&&(n=n.postcss),"object"==typeof n&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if("object"==typeof n&&n.postcssPlugin)t.push(n);else if("function"==typeof n)t.push(n);else{if("object"!=typeof n||!n.parse&&!n.stringify)throw new Error(n+" is not a PostCSS plugin")}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new za(this,e,t):new Ha(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var Ga=Va;Va.default=Va,Wa.registerProcessor(Va),qa.registerProcessor(Va);let Ya=dr,Xa=wr,Ka=Kr,Ja=Wi,Za=Nr,$a=Ki,Qa=ta;function es(e,t){if(Array.isArray(e))return e.map((e=>es(e)));let{inputs:n,...o}=e;if(n){t=[];for(let e of n){let n={...e,__proto__:Za.prototype};n.map&&(n.map={...n.map,__proto__:Xa.prototype}),t.push(n)}}if(o.nodes&&(o.nodes=e.nodes.map((e=>es(e,t)))),o.source){let{inputId:e,...n}=o.source;o.source=n,null!=e&&(o.source.input=t[e])}if("root"===o.type)return new $a(o);if("decl"===o.type)return new Ya(o);if("rule"===o.type)return new Qa(o);if("comment"===o.type)return new Ka(o);if("atrule"===o.type)return new Ja(o);throw new Error("Unknown node type: "+e.type)}var ts=es;es.default=es;let ns=Yo,os=dr,rs=Da,is=li,as=Ga,ss=er,ls=ts,cs=hi,us=gi,ds=Kr,ps=Wi,hs=yi,fs=Nr,gs=fa,ms=Zi,vs=ta,ys=Ki,bs=lr;function ws(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new as(e)}ws.plugin=function(e,t){let n,o=!1;function r(...n){console&&console.warn&&!o&&(o=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));let r=t(...n);return r.postcssPlugin=e,r.postcssVersion=(new as).version,r}return Object.defineProperty(r,"postcss",{get:()=>(n||(n=r()),n)}),r.process=function(e,t,n){return ws([r(n)]).process(e,t)},r},ws.stringify=ss,ws.parse=gs,ws.fromJSON=ls,ws.list=ms,ws.comment=e=>new ds(e),ws.atRule=e=>new ps(e),ws.decl=e=>new os(e),ws.rule=e=>new vs(e),ws.root=e=>new ys(e),ws.document=e=>new cs(e),ws.CssSyntaxError=ns,ws.Declaration=os,ws.Container=is,ws.Processor=as,ws.Document=cs,ws.Comment=ds,ws.Warning=us,ws.AtRule=ps,ws.Result=hs,ws.Input=fs,ws.Rule=vs,ws.Root=ys,ws.Node=bs,rs.registerPostcss(ws);var ks=ws;ws.default=ws;const xs=Fo(ks);xs.stringify,xs.fromJSON,xs.plugin,xs.parse,xs.list,xs.document,xs.comment,xs.atRule,xs.rule,xs.decl,xs.root,xs.CssSyntaxError,xs.Declaration,xs.Container,xs.Processor,xs.Document,xs.Comment,xs.Warning,xs.AtRule,xs.Result,xs.Input,xs.Rule,xs.Root,xs.Node;var Ss=Object.defineProperty,Cs=(e,t,n)=>((e,t,n)=>t in e?Ss(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function Is(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Es(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})})),n}var Ts={exports:{}},Ls=String,Os=function(){return{isColorSupported:!1,reset:Ls,bold:Ls,dim:Ls,italic:Ls,underline:Ls,inverse:Ls,hidden:Ls,strikethrough:Ls,black:Ls,red:Ls,green:Ls,yellow:Ls,blue:Ls,magenta:Ls,cyan:Ls,white:Ls,gray:Ls,bgBlack:Ls,bgRed:Ls,bgGreen:Ls,bgYellow:Ls,bgBlue:Ls,bgMagenta:Ls,bgCyan:Ls,bgWhite:Ls}};Ts.exports=Os(),Ts.exports.createColors=Os;var As=Ts.exports;const Ms=Es(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let Rs=As,Ps=Ms,Ds=class e extends Error{constructor(t,n,o,r,i,a){super(t),this.name="CssSyntaxError",this.reason=t,i&&(this.file=i),r&&(this.source=r),a&&(this.plugin=a),void 0!==n&&void 0!==o&&("number"==typeof n?(this.line=n,this.column=o):(this.line=n.line,this.column=n.column,this.endLine=o.line,this.endColumn=o.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=Rs.isColorSupported),Ps&&e&&(t=Ps(t));let n,o,r=t.split(/\r?\n/),i=Math.max(this.line-3,0),a=Math.min(this.line+2,r.length),s=String(a).length;if(e){let{bold:e,gray:t,red:r}=Rs.createColors(!0);n=t=>e(r(t)),o=e=>t(e)}else n=o=e=>e;return r.slice(i,a).map(((e,t)=>{let r=i+1+t,a=" "+(" "+r).slice(-s)+" | ";if(r===this.line){let t=o(a.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return n(">")+o(a)+e+"\n "+t+n("^")}return" "+o(a)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var Ns=Ds;Ds.default=Ds;var js={};js.isClean=Symbol("isClean"),js.my=Symbol("my");const Fs={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};let Bs=class{constructor(e){this.builder=e}atrule(e,t){let n="@"+e.name,o=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?n+=e.raws.afterName:o&&(n+=" "),e.nodes)this.block(e,n+o);else{let r=(e.raws.between||"")+(t?";":"");this.builder(n+o+r,e)}}beforeAfter(e,t){let n;n="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let o=e.parent,r=0;for(;o&&"root"!==o.type;)r+=1,o=o.parent;if(n.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<r;e++)n+=t}return n}block(e,t){let n,o=this.raw(e,"between","beforeOpen");this.builder(t+o+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let n=this.raw(e,"semicolon");for(let o=0;o<e.nodes.length;o++){let r=e.nodes[o],i=this.raw(r,"before");i&&this.builder(i),this.stringify(r,t!==o||n)}}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),o=e.prop+n+this.rawValue(e,"value");e.important&&(o+=e.raws.important||" !important"),t&&(o+=";"),this.builder(o,e)}document(e){this.body(e)}raw(e,t,n){let o;if(n||(n=t),t&&(o=e.raws[t],void 0!==o))return o;let r=e.parent;if("before"===n){if(!r||"root"===r.type&&r.first===e)return"";if(r&&"document"===r.type)return""}if(!r)return Fs[n];let i=e.root();if(i.rawCache||(i.rawCache={}),void 0!==i.rawCache[n])return i.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);{let r="raw"+((a=n)[0].toUpperCase()+a.slice(1));this[r]?o=this[r](i,e):i.walk((e=>{if(o=e.raws[t],void 0!==o)return!1}))}var a;return void 0===o&&(o=Fs[n]),i.rawCache[n]=o,o}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let n;return e.walkComments((e=>{if(void 0!==e.raws.before)return n=e.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls((e=>{if(void 0!==e.raws.before)return n=e.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return t=n.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((n=>{let o=n.parent;if(o&&o!==e&&o.parent&&o.parent===e&&void 0!==n.raws.before){let e=n.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let n=e[t],o=e.raws[t];return o&&o.value===n?o.raw:n}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var _s=Bs;Bs.default=Bs;let Us=_s;function Hs(e,t){new Us(t).stringify(e)}var zs=Hs;Hs.default=Hs;let{isClean:qs,my:Ws}=js,Vs=Ns,Gs=_s,Ys=zs;function Xs(e,t){let n=new e.constructor;for(let o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;if("proxyCache"===o)continue;let r=e[o],i=typeof r;"parent"===o&&"object"===i?t&&(n[o]=t):"source"===o?n[o]=r:Array.isArray(r)?n[o]=r.map((e=>Xs(e,n))):("object"===i&&null!==r&&(r=Xs(r)),n[o]=r)}return n}let Ks=class{constructor(e={}){this.raws={},this[qs]=!1,this[Ws]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let n of e[t])"function"==typeof n.clone?this.append(n.clone()):this.append(n)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Xs(this);for(let n in e)t[n]=e[n];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:n,start:o}=this.rangeBy(t);return this.source.input.error(e,{column:o.column,line:o.line},{column:n.column,line:n.line},t)}return new Vs(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,n)=>(e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[qs]){this[qs]=!1;let e=this;for(;e=e.parent;)e[qs]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let n=this.source.start;if(e.index)n=this.positionInside(e.index,t);else if(e.word){let o=(t=this.toString()).indexOf(e.word);-1!==o&&(n=this.positionInside(o,t))}return n}positionInside(e,t){let n=t||this.toString(),o=this.source.start.column,r=this.source.start.line;for(let i=0;i<e;i++)"\n"===n[i]?(o=1,r+=1):o+=1;return{column:o,line:r}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},n=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let o=this.toString(),r=o.indexOf(e.word);-1!==r&&(t=this.positionInside(r,o),n=this.positionInside(r+e.word.length,o))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?n={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<t.line||n.line===t.line&&n.column<=t.column)&&(n={column:t.column+1,line:t.line}),{end:n,start:t}}raw(e,t){return(new Gs).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let o of e)o===this?n=!0:n?(this.parent.insertAfter(t,o),t=o):this.parent.insertBefore(t,o);n||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let n={},o=null==t;t=t||new Map;let r=0;for(let i in this){if(!Object.prototype.hasOwnProperty.call(this,i))continue;if("parent"===i||"proxyCache"===i)continue;let e=this[i];if(Array.isArray(e))n[i]=e.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof e&&e.toJSON)n[i]=e.toJSON(null,t);else if("source"===i){let o=t.get(e.input);null==o&&(o=r,t.set(e.input,r),r++),n[i]={end:e.end,inputId:o,start:e.start}}else n[i]=e}return o&&(n.inputs=[...t.keys()].map((e=>e.toJSON()))),n}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=Ys){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,n){let o={node:this};for(let r in n)o[r]=n[r];return e.warn(t,o)}get proxyOf(){return this}};var Js=Ks;Ks.default=Ks;let Zs=Js,$s=class extends Zs{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var Qs=$s;$s.default=$s;var el={nanoid:(e=21)=>{let t="",n=e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(n=t)=>{let o="",r=n;for(;r--;)o+=e[Math.random()*e.length|0];return o}};let{SourceMapConsumer:tl,SourceMapGenerator:nl}=Ms,{existsSync:ol,readFileSync:rl}=Ms,{dirname:il,join:al}=Ms;let sl=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,o=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=il(this.mapFile)),o&&(this.text=o)}consumer(){return this.consumerCache||(this.consumerCache=new tl(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let n=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+n)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let n=e.lastIndexOf(t.pop()),o=e.indexOf("*/",n);n>-1&&o>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,o)))}loadFile(e){if(this.root=il(e),ol(e))return this.mapFile=e,rl(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof tl)return nl.fromSourceMap(t).toString();if(t instanceof nl)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let n=t(e);if(n){let e=this.loadFile(n);if(!e)throw new Error("Unable to load previous source map: "+n.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=al(il(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var ll=sl;sl.default=sl;let{SourceMapConsumer:cl,SourceMapGenerator:ul}=Ms,{fileURLToPath:dl,pathToFileURL:pl}=Ms,{isAbsolute:hl,resolve:fl}=Ms,{nanoid:gl}=el,ml=Ms,vl=Ns,yl=ll,bl=Symbol("fromOffsetCache"),wl=Boolean(cl&&ul),kl=Boolean(fl&&hl),xl=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!kl||/^\w+:\/\//.test(t.from)||hl(t.from)?this.file=t.from:this.file=fl(t.from)),kl&&wl){let e=new yl(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+gl(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,n,o={}){let r,i,a;if(t&&"object"==typeof t){let e=t,o=n;if("number"==typeof e.offset){let o=this.fromOffset(e.offset);t=o.line,n=o.col}else t=e.line,n=e.column;if("number"==typeof o.offset){let e=this.fromOffset(o.offset);i=e.line,a=e.col}else i=o.line,a=o.column}else if(!n){let e=this.fromOffset(t);t=e.line,n=e.col}let s=this.origin(t,n,i,a);return r=s?new vl(e,void 0===s.endLine?s.line:{column:s.column,line:s.line},void 0===s.endLine?s.column:{column:s.endColumn,line:s.endLine},s.source,s.file,o.plugin):new vl(e,void 0===i?t:{column:n,line:t},void 0===i?n:{column:a,line:i},this.css,this.file,o.plugin),r.input={column:n,endColumn:a,endLine:i,line:t,source:this.css},this.file&&(pl&&(r.input.url=pl(this.file).toString()),r.input.file=this.file),r}fromOffset(e){let t,n;if(this[bl])n=this[bl];else{let e=this.css.split("\n");n=new Array(e.length);let t=0;for(let o=0,r=e.length;o<r;o++)n[o]=t,t+=e[o].length+1;this[bl]=n}t=n[n.length-1];let o=0;if(e>=t)o=n.length-1;else{let t,r=n.length-2;for(;o<r;)if(t=o+(r-o>>1),e<n[t])r=t-1;else{if(!(e>=n[t+1])){o=t;break}o=t+1}}return{col:e-n[o]+1,line:o+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:fl(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,n,o){if(!this.map)return!1;let r,i,a=this.map.consumer(),s=a.originalPositionFor({column:t,line:e});if(!s.source)return!1;"number"==typeof n&&(r=a.originalPositionFor({column:o,line:n})),i=hl(s.source)?pl(s.source):new URL(s.source,this.map.consumer().sourceRoot||pl(this.map.mapFile));let l={column:s.column,endColumn:r&&r.column,endLine:r&&r.line,line:s.line,url:i.toString()};if("file:"===i.protocol){if(!dl)throw new Error("file: protocol is not available in this PostCSS build");l.file=dl(i)}let c=a.sourceContentFor(s.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var Sl=xl;xl.default=xl,ml&&ml.registerInput&&ml.registerInput(xl);let{SourceMapConsumer:Cl,SourceMapGenerator:Il}=Ms,{dirname:El,relative:Tl,resolve:Ll,sep:Ol}=Ms,{pathToFileURL:Al}=Ms,Ml=Sl,Rl=Boolean(Cl&&Il),Pl=Boolean(El&&Ll&&Tl&&Ol);var Dl=class{constructor(e,t,n,o){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n,this.css=o,this.originalCSS=o,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,n=this.toUrl(this.path(e.file)),o=e.root||El(e.file);!1===this.mapOpts.sourcesContent?(t=new Cl(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,n,this.toUrl(this.path(o)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Pl&&Rl&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Il.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Il({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Il({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,n=1,o=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((a,s,l)=>{if(this.css+=a,s&&"end"!==l&&(i.generated.line=n,i.generated.column=o-1,s.source&&s.source.start?(i.source=this.sourcePath(s),i.original.line=s.source.start.line,i.original.column=s.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),e=a.match(/\n/g),e?(n+=e.length,t=a.lastIndexOf("\n"),o=a.length-t):o+=a.length,s&&"start"!==l){let e=s.parent||{raws:{}};("decl"===s.type||"atrule"===s.type&&!s.nodes)&&s===e.last&&!e.raws.semicolon||(s.source&&s.source.end?(i.source=this.sourcePath(s),i.original.line=s.source.end.line,i.original.column=s.source.end.column-1,i.generated.line=n,i.generated.column=o-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=n,i.generated.column=o-1,this.map.addMapping(i)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let n=this.opts.to?El(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(n=El(Ll(n,this.mapOpts.annotation)));let o=Tl(n,e);return this.memoizedPaths.set(e,o),o}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new Ml(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let n=t.source.input.from;if(n&&!e[n]){e[n]=!0;let o=this.usesFileUrls?this.toFileUrl(n):this.toUrl(this.path(n));this.map.setSourceContent(o,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(Al){let t=Al(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===Ol&&(e=e.replace(/\\/g,"/"));let n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}};let Nl=Js,jl=class extends Nl{constructor(e){super(e),this.type="comment"}};var Fl=jl;jl.default=jl;let Bl,_l,Ul,Hl,{isClean:zl,my:ql}=js,Wl=Qs,Vl=Fl,Gl=Js;function Yl(e){return e.map((e=>(e.nodes&&(e.nodes=Yl(e.nodes)),delete e.source,e)))}function Xl(e){if(e[zl]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)Xl(t)}let Kl=class e extends Gl{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,n,o=this.getIterator();for(;this.indexes[o]<this.proxyOf.nodes.length&&(t=this.indexes[o],n=e(this.proxyOf.nodes[t],t),!1!==n);)this.indexes[o]+=1;return delete this.indexes[o],n}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...n)=>e[t](...n.map((e=>"function"==typeof e?(t,n)=>e(t.toProxy(),n):e))):"every"===t||"some"===t?n=>e[t](((e,...t)=>n(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,n)=>(e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let n,o=this.index(e),r=this.normalize(t,this.proxyOf.nodes[o]).reverse();o=this.index(e);for(let i of r)this.proxyOf.nodes.splice(o+1,0,i);for(let i in this.indexes)n=this.indexes[i],o<n&&(this.indexes[i]=n+r.length);return this.markDirty(),this}insertBefore(e,t){let n,o=this.index(e),r=0===o&&"prepend",i=this.normalize(t,this.proxyOf.nodes[o],r).reverse();o=this.index(e);for(let a of i)this.proxyOf.nodes.splice(o,0,a);for(let a in this.indexes)n=this.indexes[a],o<=n&&(this.indexes[a]=n+i.length);return this.markDirty(),this}normalize(t,n){if("string"==typeof t)t=Yl(Bl(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new Wl(t)]}else if(t.selector)t=[new _l(t)];else if(t.name)t=[new Ul(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new Vl(t)]}return t.map((t=>(t[ql]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[zl]&&Xl(t),void 0===t.raws.before&&n&&void 0!==n.raws.before&&(t.raws.before=n.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t)))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let n in this.indexes)t=this.indexes[n],t>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls((o=>{t.props&&!t.props.includes(o.prop)||t.fast&&!o.value.includes(t.fast)||(o.value=o.value.replace(e,n))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,n)=>{let o;try{o=e(t,n)}catch(r){throw t.addToError(r)}return!1!==o&&t.walk&&(o=t.walk(e)),o}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((n,o)=>{if("atrule"===n.type&&e.test(n.name))return t(n,o)})):this.walk(((n,o)=>{if("atrule"===n.type&&n.name===e)return t(n,o)})):(t=e,this.walk(((e,n)=>{if("atrule"===e.type)return t(e,n)})))}walkComments(e){return this.walk(((t,n)=>{if("comment"===t.type)return e(t,n)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((n,o)=>{if("decl"===n.type&&e.test(n.prop))return t(n,o)})):this.walk(((n,o)=>{if("decl"===n.type&&n.prop===e)return t(n,o)})):(t=e,this.walk(((e,n)=>{if("decl"===e.type)return t(e,n)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((n,o)=>{if("rule"===n.type&&e.test(n.selector))return t(n,o)})):this.walk(((n,o)=>{if("rule"===n.type&&n.selector===e)return t(n,o)})):(t=e,this.walk(((e,n)=>{if("rule"===e.type)return t(e,n)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Kl.registerParse=e=>{Bl=e},Kl.registerRule=e=>{_l=e},Kl.registerAtRule=e=>{Ul=e},Kl.registerRoot=e=>{Hl=e};var Jl=Kl;Kl.default=Kl,Kl.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,Ul.prototype):"rule"===e.type?Object.setPrototypeOf(e,_l.prototype):"decl"===e.type?Object.setPrototypeOf(e,Wl.prototype):"comment"===e.type?Object.setPrototypeOf(e,Vl.prototype):"root"===e.type&&Object.setPrototypeOf(e,Hl.prototype),e[ql]=!0,e.nodes&&e.nodes.forEach((e=>{Kl.rebuild(e)}))};let Zl,$l,Ql=Jl,ec=class extends Ql{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new Zl(new $l,this,e).stringify()}};ec.registerLazyResult=e=>{Zl=e},ec.registerProcessor=e=>{$l=e};var tc=ec;ec.default=ec;let nc=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let n in t)this[n]=t[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var oc=nc;nc.default=nc;let rc=oc,ic=class{constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new rc(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}};var ac=ic;ic.default=ic;const sc="'".charCodeAt(0),lc='"'.charCodeAt(0),cc="\\".charCodeAt(0),uc="/".charCodeAt(0),dc="\n".charCodeAt(0),pc=" ".charCodeAt(0),hc="\f".charCodeAt(0),fc="\t".charCodeAt(0),gc="\r".charCodeAt(0),mc="[".charCodeAt(0),vc="]".charCodeAt(0),yc="(".charCodeAt(0),bc=")".charCodeAt(0),wc="{".charCodeAt(0),kc="}".charCodeAt(0),xc=";".charCodeAt(0),Sc="*".charCodeAt(0),Cc=":".charCodeAt(0),Ic="@".charCodeAt(0),Ec=/[\t\n\f\r "#'()/;[\\\]{}]/g,Tc=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Lc=/.[\r\n"'(/\\]/,Oc=/[\da-f]/i;let Ac=Jl,Mc=class extends Ac{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var Rc=Mc;Mc.default=Mc,Ac.registerAtRule(Mc);let Pc,Dc,Nc=Jl,jc=class extends Nc{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,n){let o=super.normalize(e);if(t)if("prepend"===n)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let r of o)r.raws.before=t.raws.before;return o}removeChild(e,t){let n=this.index(e);return!t&&0===n&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}toResult(e={}){return new Pc(new Dc,this,e).stringify()}};jc.registerLazyResult=e=>{Pc=e},jc.registerProcessor=e=>{Dc=e};var Fc=jc;jc.default=jc,Nc.registerRoot(jc);let Bc={comma:e=>Bc.split(e,[","],!0),space:e=>Bc.split(e,[" ","\n","\t"]),split(e,t,n){let o=[],r="",i=!1,a=0,s=!1,l="",c=!1;for(let u of e)c?c=!1:"\\"===u?c=!0:s?u===l&&(s=!1):'"'===u||"'"===u?(s=!0,l=u):"("===u?a+=1:")"===u?a>0&&(a-=1):0===a&&t.includes(u)&&(i=!0),i?(""!==r&&o.push(r.trim()),r="",i=!1):r+=u;return(n||""!==r)&&o.push(r.trim()),o}};var _c=Bc;Bc.default=Bc;let Uc=Jl,Hc=_c,zc=class extends Uc{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return Hc.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}};var qc=zc;zc.default=zc,Uc.registerRule(zc);let Wc=Qs,Vc=function(e,t={}){let n,o,r,i,a,s,l,c,u,d,p=e.css.valueOf(),h=t.ignoreErrors,f=p.length,g=0,m=[],v=[];function y(t){throw e.error("Unclosed "+t,g)}return{back:function(e){v.push(e)},endOfFile:function(){return 0===v.length&&g>=f},nextToken:function(e){if(v.length)return v.pop();if(g>=f)return;let t=!!e&&e.ignoreUnclosed;switch(n=p.charCodeAt(g),n){case dc:case pc:case fc:case gc:case hc:o=g;do{o+=1,n=p.charCodeAt(o)}while(n===pc||n===dc||n===fc||n===gc||n===hc);d=["space",p.slice(g,o)],g=o-1;break;case mc:case vc:case wc:case kc:case Cc:case xc:case bc:{let e=String.fromCharCode(n);d=[e,e,g];break}case yc:if(c=m.length?m.pop()[1]:"",u=p.charCodeAt(g+1),"url"===c&&u!==sc&&u!==lc&&u!==pc&&u!==dc&&u!==fc&&u!==hc&&u!==gc){o=g;do{if(s=!1,o=p.indexOf(")",o+1),-1===o){if(h||t){o=g;break}y("bracket")}for(l=o;p.charCodeAt(l-1)===cc;)l-=1,s=!s}while(s);d=["brackets",p.slice(g,o+1),g,o],g=o}else o=p.indexOf(")",g+1),i=p.slice(g,o+1),-1===o||Lc.test(i)?d=["(","(",g]:(d=["brackets",i,g,o],g=o);break;case sc:case lc:r=n===sc?"'":'"',o=g;do{if(s=!1,o=p.indexOf(r,o+1),-1===o){if(h||t){o=g+1;break}y("string")}for(l=o;p.charCodeAt(l-1)===cc;)l-=1,s=!s}while(s);d=["string",p.slice(g,o+1),g,o],g=o;break;case Ic:Ec.lastIndex=g+1,Ec.test(p),o=0===Ec.lastIndex?p.length-1:Ec.lastIndex-2,d=["at-word",p.slice(g,o+1),g,o],g=o;break;case cc:for(o=g,a=!0;p.charCodeAt(o+1)===cc;)o+=1,a=!a;if(n=p.charCodeAt(o+1),a&&n!==uc&&n!==pc&&n!==dc&&n!==fc&&n!==gc&&n!==hc&&(o+=1,Oc.test(p.charAt(o)))){for(;Oc.test(p.charAt(o+1));)o+=1;p.charCodeAt(o+1)===pc&&(o+=1)}d=["word",p.slice(g,o+1),g,o],g=o;break;default:n===uc&&p.charCodeAt(g+1)===Sc?(o=p.indexOf("*/",g+2)+1,0===o&&(h||t?o=p.length:y("comment")),d=["comment",p.slice(g,o+1),g,o],g=o):(Tc.lastIndex=g+1,Tc.test(p),o=0===Tc.lastIndex?p.length-1:Tc.lastIndex-2,d=["word",p.slice(g,o+1),g,o],m.push(d),g=o)}return g++,d},position:function(){return g}}},Gc=Fl,Yc=Rc,Xc=Fc,Kc=qc;const Jc={empty:!0,space:!0};var Zc=class{constructor(e){this.input=e,this.root=new Xc,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,n,o,r=new Yc;r.name=e[1].slice(1),""===r.name&&this.unnamedAtrule(r,e),this.init(r,e[2]);let i=!1,a=!1,s=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){r.source.end=this.getPosition(e[2]),r.source.end.offset++,this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(s.length>0){for(o=s.length-1,n=s[o];n&&"space"===n[0];)n=s[--o];n&&(r.source.end=this.getPosition(n[3]||n[2]),r.source.end.offset++)}this.end(e);break}s.push(e)}else s.push(e);if(this.tokenizer.endOfFile()){i=!0;break}}r.raws.between=this.spacesAndCommentsFromEnd(s),s.length?(r.raws.afterName=this.spacesAndCommentsFromStart(s),this.raw(r,"params",s),i&&(e=s[s.length-1],r.source.end=this.getPosition(e[3]||e[2]),r.source.end.offset++,this.spaces=r.raws.between,r.raws.between="")):(r.raws.afterName="",r.params=""),a&&(r.nodes=[],this.current=r)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let n,o=0;for(let r=t-1;r>=0&&(n=e[r],"space"===n[0]||(o+=1,2!==o));r--);throw this.input.error("Missed semicolon","word"===n[0]?n[3]+1:n[2])}colon(e){let t,n,o,r=0;for(let[i,a]of e.entries()){if(t=a,n=t[0],"("===n&&(r+=1),")"===n&&(r-=1),0===r&&":"===n){if(o){if("word"===o[0]&&"progid"===o[1])continue;return i}this.doubleColon(t)}o=t}return!1}comment(e){let t=new Gc;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let e=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=Vc(this.input)}decl(e,t){let n=new Wc;this.init(n,e[0][2]);let o,r=e[e.length-1];for(";"===r[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(r[3]||r[2]||function(e){for(let t=e.length-1;t>=0;t--){let n=e[t],o=n[3]||n[2];if(o)return o}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;n.prop+=e.shift()[1]}for(n.raws.between="";e.length;){if(o=e.shift(),":"===o[0]){n.raws.between+=o[1];break}"word"===o[0]&&/\w/.test(o[1])&&this.unknownWord([o]),n.raws.between+=o[1]}"_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let i,a=[];for(;e.length&&(i=e[0][0],"space"===i||"comment"===i);)a.push(e.shift());this.precheckMissedSemicolon(e);for(let s=e.length-1;s>=0;s--){if(o=e[s],"!important"===o[1].toLowerCase()){n.important=!0;let t=this.stringFrom(e,s);t=this.spacesFromEnd(e)+t," !important"!==t&&(n.raws.important=t);break}if("important"===o[1].toLowerCase()){let t=e.slice(0),o="";for(let e=s;e>0;e--){let n=t[e][0];if(0===o.trim().indexOf("!")&&"space"!==n)break;o=t.pop()[1]+o}0===o.trim().indexOf("!")&&(n.important=!0,n.raws.important=o,e=t)}if("space"!==o[0]&&"comment"!==o[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(n.raws.between+=a.map((e=>e[1])).join(""),a=[]),this.raw(n,"value",a.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Kc;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,n=null,o=!1,r=null,i=[],a=e[1].startsWith("--"),s=[],l=e;for(;l;){if(n=l[0],s.push(l),"("===n||"["===n)r||(r=l),i.push("("===n?")":"]");else if(a&&o&&"{"===n)r||(r=l),i.push("}");else if(0===i.length){if(";"===n){if(o)return void this.decl(s,a);break}if("{"===n)return void this.rule(s);if("}"===n){this.tokenizer.back(s.pop()),t=!0;break}":"===n&&(o=!0)}else n===i[i.length-1]&&(i.pop(),0===i.length&&(r=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),i.length>0&&this.unclosedBracket(r),t&&o){if(!a)for(;s.length&&(l=s[s.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(s.pop());this.decl(s,a)}else this.unknownWord(s)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,n,o){let r,i,a,s,l=n.length,c="",u=!0;for(let d=0;d<l;d+=1)r=n[d],i=r[0],"space"!==i||d!==l-1||o?"comment"===i?(s=n[d-1]?n[d-1][0]:"empty",a=n[d+1]?n[d+1][0]:"empty",Jc[s]||Jc[a]||","===c.slice(-1)?u=!1:c+=r[1]):c+=r[1]:u=!1;if(!u){let o=n.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:o,value:c}}e[t]=c}rule(e){e.pop();let t=new Kc;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)n+=e.shift()[1];return n}spacesFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)n=e.pop()[1]+n;return n}stringFrom(e,t){let n="";for(let o=t;o<e.length;o++)n+=e[o][1];return e.splice(t,e.length-t),n}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};let $c=Jl,Qc=Zc,eu=Sl;function tu(e,t){let n=new eu(e,t),o=new Qc(n);try{o.parse()}catch(r){throw r}return o.root}var nu=tu;tu.default=tu,$c.registerParse(tu);let{isClean:ou,my:ru}=js,iu=Dl,au=zs,su=Jl,lu=tc,cu=ac,uu=nu,du=Fc;const pu={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},hu={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},fu={Once:!0,postcssPlugin:!0,prepare:!0},gu=0;function mu(e){return"object"==typeof e&&"function"==typeof e.then}function vu(e){let t=!1,n=pu[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,gu,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,gu,n+"Exit"]:[n,n+"Exit"]}function yu(e){let t;return t="document"===e.type?["Document",gu,"DocumentExit"]:"root"===e.type?["Root",gu,"RootExit"]:vu(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function bu(e){return e[ou]=!1,e.nodes&&e.nodes.forEach((e=>bu(e))),e}let wu={},ku=class e{constructor(t,n,o){let r;if(this.stringified=!1,this.processed=!1,"object"!=typeof n||null===n||"root"!==n.type&&"document"!==n.type)if(n instanceof e||n instanceof cu)r=bu(n.root),n.map&&(void 0===o.map&&(o.map={}),o.map.inline||(o.map.inline=!1),o.map.prev=n.map);else{let e=uu;o.syntax&&(e=o.syntax.parse),o.parser&&(e=o.parser),e.parse&&(e=e.parse);try{r=e(n,o)}catch(i){this.processed=!0,this.error=i}r&&!r[ru]&&su.rebuild(r)}else r=bu(n);this.result=new cu(t,r,o),this.helpers={...wu,postcss:wu,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?n.postcssVersion:(e.plugin=n.postcssPlugin,e.setMessage())}catch(o){console&&console.error&&console.error(o)}return e}prepareVisitors(){this.listeners={};let e=(e,t,n)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,n])};for(let t of this.plugins)if("object"==typeof t)for(let n in t){if(!hu[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!fu[n])if("object"==typeof t[n])for(let o in t[n])e(t,"*"===o?n:n+"-"+o.toLowerCase(),t[n][o]);else"function"==typeof t[n]&&e(t,n,t[n])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let n=0;n<this.plugins.length;n++){let t=this.plugins[n],o=this.runOnRoot(t);if(mu(o))try{await o}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[ou];){e[ou]=!0;let n=[yu(e)];for(;n.length>0;){let e=this.visitTick(n);if(mu(e))try{await e}catch(t){let e=n[n.length-1].node;throw this.handleError(t,e)}}}if(this.listeners.OnceExit)for(let[n,o]of this.listeners.OnceExit){this.result.lastPlugin=n;try{if("document"===e.type){let t=e.nodes.map((e=>o(e,this.helpers)));await Promise.all(t)}else await o(e,this.helpers)}catch(t){throw this.handleError(t)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return mu(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=au;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let n=new iu(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(mu(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[ou];)e[ou]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[o,r]of e){let e;this.result.lastPlugin=o;try{e=r(t,this.helpers)}catch(n){throw this.handleError(n,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(mu(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:n,visitors:o}=t;if("root"!==n.type&&"document"!==n.type&&!n.parent)return void e.pop();if(o.length>0&&t.visitorIndex<o.length){let[e,r]=o[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===o.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return r(n.toProxy(),this.helpers)}catch(i){throw this.handleError(i,n)}}if(0!==t.iterator){let o,r=t.iterator;for(;o=n.nodes[n.indexes[r]];)if(n.indexes[r]+=1,!o[ou])return o[ou]=!0,void e.push(yu(o));t.iterator=0,delete n.indexes[r]}let r=t.events;for(;t.eventIndex<r.length;){let e=r[t.eventIndex];if(t.eventIndex+=1,e===gu)return void(n.nodes&&n.nodes.length&&(n[ou]=!0,t.iterator=n.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[ou]=!0;let t=vu(e);for(let n of t)if(n===gu)e.nodes&&e.each((e=>{e[ou]||this.walkSync(e)}));else{let t=this.listeners[n];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};ku.registerPostcss=e=>{wu=e};var xu=ku;ku.default=ku,du.registerLazyResult(ku),lu.registerLazyResult(ku);let Su=Dl,Cu=zs,Iu=nu;const Eu=ac;let Tu=class{constructor(e,t,n){let o;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=n,this._map=void 0;let r=Cu;this.result=new Eu(this._processor,o,this._opts),this.result.css=t;let i=this;Object.defineProperty(this.result,"root",{get:()=>i.root});let a=new Su(r,o,this._opts,t);if(a.isMap()){let[e,t]=a.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else a.clearAnnotation(),this.result.css=a.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=Iu;try{e=t(this._css,this._opts)}catch(n){this.error=n}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var Lu=Tu;Tu.default=Tu;let Ou=Lu,Au=xu,Mu=tc,Ru=Fc,Pu=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let n of e)if(!0===n.postcss?n=n():n.postcss&&(n=n.postcss),"object"==typeof n&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if("object"==typeof n&&n.postcssPlugin)t.push(n);else if("function"==typeof n)t.push(n);else{if("object"!=typeof n||!n.parse&&!n.stringify)throw new Error(n+" is not a PostCSS plugin")}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new Au(this,e,t):new Ou(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var Du=Pu;Pu.default=Pu,Ru.registerProcessor(Pu),Mu.registerProcessor(Pu);let Nu=Qs,ju=ll,Fu=Fl,Bu=Rc,_u=Sl,Uu=Fc,Hu=qc;function zu(e,t){if(Array.isArray(e))return e.map((e=>zu(e)));let{inputs:n,...o}=e;if(n){t=[];for(let e of n){let n={...e,__proto__:_u.prototype};n.map&&(n.map={...n.map,__proto__:ju.prototype}),t.push(n)}}if(o.nodes&&(o.nodes=e.nodes.map((e=>zu(e,t)))),o.source){let{inputId:e,...n}=o.source;o.source=n,null!=e&&(o.source.input=t[e])}if("root"===o.type)return new Uu(o);if("decl"===o.type)return new Nu(o);if("rule"===o.type)return new Hu(o);if("comment"===o.type)return new Fu(o);if("atrule"===o.type)return new Bu(o);throw new Error("Unknown node type: "+e.type)}var qu=zu;zu.default=zu;let Wu=Ns,Vu=Qs,Gu=xu,Yu=Jl,Xu=Du,Ku=zs,Ju=qu,Zu=tc,$u=oc,Qu=Fl,ed=Rc,td=ac,nd=Sl,od=nu,rd=_c,id=qc,ad=Fc,sd=Js;function ld(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new Xu(e)}ld.plugin=function(e,t){let n,o=!1;function r(...n){console&&console.warn&&!o&&(o=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));let r=t(...n);return r.postcssPlugin=e,r.postcssVersion=(new Xu).version,r}return Object.defineProperty(r,"postcss",{get:()=>(n||(n=r()),n)}),r.process=function(e,t,n){return ld([r(n)]).process(e,t)},r},ld.stringify=Ku,ld.parse=od,ld.fromJSON=Ju,ld.list=rd,ld.comment=e=>new Qu(e),ld.atRule=e=>new ed(e),ld.decl=e=>new Vu(e),ld.rule=e=>new id(e),ld.root=e=>new ad(e),ld.document=e=>new Zu(e),ld.CssSyntaxError=Wu,ld.Declaration=Vu,ld.Container=Yu,ld.Processor=Xu,ld.Document=Zu,ld.Comment=Qu,ld.Warning=$u,ld.AtRule=ed,ld.Result=td,ld.Input=nd,ld.Rule=id,ld.Root=ad,ld.Node=sd,Gu.registerPostcss(ld);var cd=ld;ld.default=ld;const ud=Is(cd);ud.stringify,ud.fromJSON,ud.plugin,ud.parse,ud.list,ud.document,ud.comment,ud.atRule,ud.rule,ud.decl,ud.root,ud.CssSyntaxError,ud.Declaration,ud.Container,ud.Processor,ud.Document,ud.Comment,ud.Warning,ud.AtRule,ud.Result,ud.Input,ud.Rule,ud.Root,ud.Node;class dd{constructor(...e){Cs(this,"parentElement",null),Cs(this,"parentNode",null),Cs(this,"ownerDocument"),Cs(this,"firstChild",null),Cs(this,"lastChild",null),Cs(this,"previousSibling",null),Cs(this,"nextSibling",null),Cs(this,"ELEMENT_NODE",1),Cs(this,"TEXT_NODE",3),Cs(this,"nodeType"),Cs(this,"nodeName"),Cs(this,"RRNodeType")}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(!(e instanceof dd))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}const pd={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},hd={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},fd={},gd=()=>!!globalThis.Zone;function md(e){if(fd[e])return fd[e];const t=globalThis[e],n=t.prototype,o=e in pd?pd[e]:void 0,r=Boolean(o&&o.every((e=>{var t,o;return Boolean(null==(o=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)?void 0:o.toString().includes("[native code]"))}))),i=e in hd?hd[e]:void 0,a=Boolean(i&&i.every((e=>{var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))})));if(r&&a&&!gd())return fd[e]=t.prototype,t.prototype;try{const o=document.createElement("iframe");document.body.appendChild(o);const r=o.contentWindow;if(!r)return t.prototype;const i=r[e].prototype;return document.body.removeChild(o),i?fd[e]=i:n}catch{return n}}const vd={};function yd(e,t,n){var o;const r=`${e}.${String(n)}`;if(vd[r])return vd[r].call(t);const i=md(e),a=null==(o=Object.getOwnPropertyDescriptor(i,n))?void 0:o.get;return a?(vd[r]=a,a.call(t)):t[n]}const bd={};function wd(e,t,n){const o=`${e}.${String(n)}`;if(bd[o])return bd[o].bind(t);const r=md(e)[n];return"function"!=typeof r?t[n]:(bd[o]=r,r.bind(t))}function kd(){return md("MutationObserver").constructor}const xd={childNodes:function(e){return yd("Node",e,"childNodes")},parentNode:function(e){return yd("Node",e,"parentNode")},parentElement:function(e){return yd("Node",e,"parentElement")},textContent:function(e){return yd("Node",e,"textContent")},contains:function(e,t){return wd("Node",e,"contains")(t)},getRootNode:function(e){return wd("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?yd("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?yd("Element",e,"shadowRoot"):null},querySelector:function(e,t){return yd("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return yd("Element",e,"querySelectorAll")(t)},mutationObserver:kd};function Sd(e,t,n=document){const o={capture:!0,passive:!0};return n.addEventListener(e,t,o),()=>n.removeEventListener(e,t,o)}const Cd="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Id={map:{},getId:()=>(console.error(Cd),-1),getNode:()=>(console.error(Cd),null),removeNodeFromMap(){console.error(Cd)},has:()=>(console.error(Cd),!1),reset(){console.error(Cd)}};function Ed(e,t,n={}){let o=null,r=0;return function(...i){const a=Date.now();r||!1!==n.leading||(r=a);const s=t-(a-r),l=this;s<=0||s>t?(o&&(clearTimeout(o),o=null),r=a,e.apply(l,i)):o||!1===n.trailing||(o=setTimeout((()=>{r=!1===n.leading?0:Date.now(),o=null,e.apply(l,i)}),s))}}function Td(e,t,n,o,r=window){const i=r.Object.getOwnPropertyDescriptor(e,t);return r.Object.defineProperty(e,t,o?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>Td(e,t,i||{},!0)}function Ld(e,t,n){try{if(!(t in e))return()=>{};const o=e[t],r=n(o);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:o}})),e[t]=r,()=>{e[t]=o}}catch{return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Id=new Proxy(Id,{get:(e,t,n)=>("map"===t&&console.error(Cd),Reflect.get(e,t,n))}));let Od=Date.now;function Ad(e){var t,n,o,r;const i=e.document;return{left:i.scrollingElement?i.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:i.documentElement.scrollLeft||(null==i?void 0:i.body)&&(null==(t=xd.parentElement(i.body))?void 0:t.scrollLeft)||(null==(n=null==i?void 0:i.body)?void 0:n.scrollLeft)||0,top:i.scrollingElement?i.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==i?void 0:i.documentElement.scrollTop)||(null==i?void 0:i.body)&&(null==(o=xd.parentElement(i.body))?void 0:o.scrollTop)||(null==(r=null==i?void 0:i.body)?void 0:r.scrollTop)||0}}function Md(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Rd(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Pd(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:xd.parentElement(e)}function Dd(e,t,n,o){if(!e)return!1;const r=Pd(e);if(!r)return!1;try{if("string"==typeof t){if(r.classList.contains(t))return!0;if(o&&null!==r.closest("."+t))return!0}else if(Ro(r,t,o))return!0}catch(i){}if(n){if(r.matches(n))return!0;if(o&&null!==r.closest(n))return!0}return!1}function Nd(e,t,n){return!("TITLE"!==e.tagName||!n.headTitleMutations)||t.getId(e)===wo}function jd(e,t){if(eo(e))return!1;const n=t.getId(e);if(!t.has(n))return!0;const o=xd.parentNode(e);return(!o||o.nodeType!==e.DOCUMENT_NODE)&&(!o||jd(o,t))}function Fd(e){return Boolean(e.changedTouches)}function Bd(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function _d(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Ud(e){return!!e&&(e instanceof dd&&"shadowRoot"in e?Boolean(e.shadowRoot):Boolean(xd.shadowRoot(e)))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Od=()=>(new Date).getTime());class Hd{constructor(){_n(this,"id",1),_n(this,"styleIDMap",new WeakMap),_n(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function zd(e){var t;let n=null;return"getRootNode"in e&&(null==(t=xd.getRootNode(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&xd.host(xd.getRootNode(e))&&(n=xd.host(xd.getRootNode(e))),n}function qd(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=zd(n);)n=t;return n}(e);return xd.contains(t,n)}function Wd(e){const t=e.ownerDocument;return!!t&&(xd.contains(t,e)||qd(e))}var Vd=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Vd||{}),Gd=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Gd||{}),Yd=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Yd||{}),Xd=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Xd||{}),Kd=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Kd||{}),Jd=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Jd||{}),Zd=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Zd||{});function $d(e){return"__ln"in e}class Qd{constructor(){_n(this,"length",0),_n(this,"head",null),_n(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&$d(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&$d(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const ep=(e,t)=>`${e}@${t}`;class tp{constructor(){_n(this,"frozen",!1),_n(this,"locked",!1),_n(this,"texts",[]),_n(this,"attributes",[]),_n(this,"attributeMap",new WeakMap),_n(this,"removes",[]),_n(this,"mapRemoves",[]),_n(this,"movedMap",{}),_n(this,"addedSet",new Set),_n(this,"movedSet",new Set),_n(this,"droppedSet",new Set),_n(this,"removesSubTreeCache",new Set),_n(this,"mutationCb"),_n(this,"blockClass"),_n(this,"blockSelector"),_n(this,"maskTextClass"),_n(this,"maskTextSelector"),_n(this,"inlineStylesheet"),_n(this,"maskInputOptions"),_n(this,"maskTextFn"),_n(this,"maskInputFn"),_n(this,"keepIframeSrcFn"),_n(this,"recordCanvas"),_n(this,"inlineImages"),_n(this,"slimDOMOptions"),_n(this,"dataURLOptions"),_n(this,"doc"),_n(this,"mirror"),_n(this,"iframeManager"),_n(this,"stylesheetManager"),_n(this,"shadowDomManager"),_n(this,"canvasManager"),_n(this,"processedNodeManager"),_n(this,"unattachedDoc"),_n(this,"processMutations",(e=>{e.forEach(this.processMutation),this.emit()})),_n(this,"emit",(()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new Qd,o=e=>{let t=e,n=wo;for(;n===wo;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},r=r=>{const i=xd.parentNode(r);if(!i||!Wd(r))return;let a=!1;if(r.nodeType===Node.TEXT_NODE){const e=i.tagName;if("TEXTAREA"===e)return;"STYLE"===e&&this.addedSet.has(i)&&(a=!0)}const s=eo(i)?this.mirror.getId(zd(r)):this.mirror.getId(i),l=o(r);if(-1===s||-1===l)return n.addNode(r);const c=jo(r,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Bd(e,this.mirror)&&this.iframeManager.addIframe(e),_d(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Ud(r)&&this.shadowDomManager.addShadowRoot(xd.shadowRoot(r),this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)},cssCaptured:a});c&&(e.push({parentId:s,nextId:l,node:c}),t.add(c.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const s of this.movedSet)op(this.removesSubTreeCache,s,this.mirror)&&!this.movedSet.has(xd.parentNode(s))||r(s);for(const s of this.addedSet)rp(this.droppedSet,s)||op(this.removesSubTreeCache,s,this.mirror)?rp(this.movedSet,s)?r(s):this.droppedSet.add(s):r(s);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(xd.parentNode(i.value)),n=o(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(xd.parentNode(n.value));if(-1===o(n.value))continue;if(-1!==t){e=n;break}{const t=n.value,o=xd.parentNode(t);if(o&&o.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const t=xd.host(o);if(-1!==this.mirror.getId(t)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),r(e.value)}const a={texts:this.texts.map((e=>{const t=e.node,n=xd.parentNode(t);return n&&"TEXTAREA"===n.tagName&&this.genTextAreaValueMutation(n),{id:this.mirror.getId(t),value:e.value}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),o=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+o).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(a.texts.length||a.attributes.length||a.removes.length||a.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(a))})),_n(this,"genTextAreaValueMutation",(e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t)),t.attributes.value=Array.from(xd.childNodes(e),(e=>xd.textContent(e)||"")).join("")})),_n(this,"processMutation",(e=>{if(!Nd(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{const t=xd.textContent(e.target);Dd(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:Po(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,Pd(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let o=e.attributeName,r=e.target.getAttribute(o);if("value"===o){const e=lo(n);r=io({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:e,value:r,maskInputFn:this.maskInputFn})}if(Dd(e.target,this.blockClass,this.blockSelector,!1)||r===e.oldValue)return;let i=this.attributeMap.get(e.target);if("IFRAME"===n.tagName&&"src"===o&&!this.keepIframeSrcFn(r)){if(n.contentDocument)return;o="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(e.target,i)),"type"===o&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!Mo(n.tagName,o))if(i.attributes[o]=Ao(this.doc,ao(n.tagName),ao(o),r),"style"===o){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");e.oldValue&&o.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),r=n.style.getPropertyPriority(e);t!==o.style.getPropertyValue(e)||r!==o.style.getPropertyPriority(e)?i.styleDiff[e]=""===r?t:[t,r]:i._unchangedStyles[e]=[t,r]}for(const e of Array.from(o.style))""===n.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}else"open"===o&&"DIALOG"===n.tagName&&(n.matches("dialog:modal")?i.attributes.rr_open_mode="modal":i.attributes.rr_open_mode="non-modal");break}case"childList":if(Dd(e.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===e.target.tagName)return void this.genTextAreaValueMutation(e.target);e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),o=eo(e.target)?this.mirror.getId(xd.host(e.target)):this.mirror.getId(e.target);Dd(e.target,this.blockClass,this.blockSelector,!1)||Nd(t,this.mirror,this.slimDOMOptions)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(np(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||jd(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[ep(n,o)]?np(this.movedSet,t):(this.removes.push({parentId:o,id:n,isShadow:!(!eo(e.target)||!to(e.target))||void 0}),function(e,t){const n=[e];for(;n.length;){const e=n.pop();t.has(e)||(t.add(e),xd.childNodes(e).forEach((e=>n.push(e))))}}(t,this.removesSubTreeCache))),this.mapRemoves.push(t))}))}})),_n(this,"genAdds",((e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Nd(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[ep(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Dd(e,this.blockClass,this.blockSelector,!1)||(xd.childNodes(e).forEach((e=>this.genAdds(e))),Ud(e)&&xd.childNodes(xd.shadowRoot(e)).forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}))}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function np(e,t){e.delete(t),xd.childNodes(t).forEach((t=>np(e,t)))}function op(e,t,n){return 0!==e.size&&function(e,t,n){const o=xd.parentNode(t);return!!o&&e.has(o)}(e,t)}function rp(e,t){return 0!==e.size&&ip(e,t)}function ip(e,t){const n=xd.parentNode(t);return!!n&&(!!e.has(n)||ip(e,n))}let ap;const sp=e=>{if(!ap)return e;return(...t)=>{try{return e(...t)}catch(n){if(ap&&!0===ap(n))return;throw n}}},lp=[];function cp(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function up(e,t){const n=new tp;lp.push(n),n.init(e);const o=new(kd())(sp(n.processMutations.bind(n)));return o.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function dp({mouseInteractionCb:e,doc:t,mirror:n,blockClass:o,blockSelector:r,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,s=[];let l=null;return Object.keys(Yd).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=ao(i);const c=(t=>i=>{const a=cp(i);if(Dd(a,o,r,!0))return;let s=null,c=t;if("pointerType"in i){switch(i.pointerType){case"mouse":s=Xd.Mouse;break;case"touch":s=Xd.Touch;break;case"pen":s=Xd.Pen}s===Xd.Touch?Yd[t]===Yd.MouseDown?c="TouchStart":Yd[t]===Yd.MouseUp&&(c="TouchEnd"):Xd.Pen}else Fd(i)&&(s=Xd.Touch);null!==s?(l=s,(c.startsWith("Touch")&&s===Xd.Touch||c.startsWith("Mouse")&&s===Xd.Mouse)&&(s=null)):Yd[t]===Yd.Click&&(s=l,l=null);const u=Fd(i)?i.changedTouches[0]:i;if(!u)return;const d=n.getId(a),{clientX:p,clientY:h}=u;sp(e)({type:Yd[c],id:d,x:p,y:h,...null!==s&&{pointerType:s}})})(i);if(window.PointerEvent)switch(Yd[i]){case Yd.MouseDown:case Yd.MouseUp:a=a.replace("mouse","pointer");break;case Yd.TouchStart:case Yd.TouchEnd:return}s.push(Sd(a,c,t))})),sp((()=>{s.forEach((e=>e()))}))}function pp({scrollCb:e,doc:t,mirror:n,blockClass:o,blockSelector:r,sampling:i}){return Sd("scroll",sp(Ed(sp((i=>{const a=cp(i);if(!a||Dd(a,o,r,!0))return;const s=n.getId(a);if(a===t&&t.defaultView){const n=Ad(t.defaultView);e({id:s,x:n.left,y:n.top})}else e({id:s,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}const hp=["INPUT","TEXTAREA","SELECT"],fp=new WeakMap;function gp(e){return function(e,t){if(bp("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||bp("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||bp("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||bp("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function mp(e,t,n){let o,r;return e?(e.ownerNode?o=t.getId(e.ownerNode):r=n.getId(e),{styleId:r,id:o}):{}}function vp({mirror:e,stylesheetManager:t},n){var o,r,i;let a=null;a="#document"===n.nodeName?e.getId(n):e.getId(xd.host(n));const s="#document"===n.nodeName?null==(o=n.defaultView)?void 0:o.Document:null==(i=null==(r=n.ownerDocument)?void 0:r.defaultView)?void 0:i.ShadowRoot,l=(null==s?void 0:s.prototype)?Object.getOwnPropertyDescriptor(null==s?void 0:s.prototype,"adoptedStyleSheets"):void 0;return null!==a&&-1!==a&&s&&l?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get(){var e;return null==(e=l.get)?void 0:e.call(this)},set(e){var n;const o=null==(n=l.set)?void 0:n.call(this,e);if(null!==a&&-1!==a)try{t.adoptStyleSheets(e,a)}catch(r){}return o}}),sp((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})}))):()=>{}}function yp(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let o;!function(e,t){const{mutationCb:n,mousemoveCb:o,mouseInteractionCb:r,scrollCb:i,viewportResizeCb:a,inputCb:s,mediaInteractionCb:l,styleSheetRuleCb:c,styleDeclarationCb:u,canvasMutationCb:d,fontCb:p,selectionCb:h,customElementCb:f}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),n(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),o(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),r(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),i(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),a(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),s(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),l(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),c(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),u(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),d(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),p(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),h(...e)},e.customElementCb=(...e)=>{t.customElement&&t.customElement(...e),f(...e)}}(e,t),e.recordDOM&&(o=up(e,e.doc));const r=function({mousemoveCb:e,sampling:t,doc:n,mirror:o}){if(!1===t.mousemove)return()=>{};const r="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let a,s=[];const l=Ed(sp((t=>{const n=Date.now()-a;e(s.map((e=>(e.timeOffset-=n,e))),t),s=[],a=null})),i),c=sp(Ed(sp((e=>{const t=cp(e),{clientX:n,clientY:r}=Fd(e)?e.changedTouches[0]:e;a||(a=Od()),s.push({x:n,y:r,id:o.getId(t),timeOffset:Od()-a}),l("undefined"!=typeof DragEvent&&e instanceof DragEvent?Gd.Drag:e instanceof MouseEvent?Gd.MouseMove:Gd.TouchMove)})),r,{trailing:!1})),u=[Sd("mousemove",c,n),Sd("touchmove",c,n),Sd("drag",c,n)];return sp((()=>{u.forEach((e=>e()))}))}(e),i=dp(e),a=pp(e),s=function({viewportResizeCb:e},{win:t}){let n=-1,o=-1;return Sd("resize",sp(Ed(sp((()=>{const t=Md(),r=Rd();n===t&&o===r||(e({width:Number(r),height:Number(t)}),n=t,o=r)})),200)),t)}(e,{win:n}),l=function({inputCb:e,doc:t,mirror:n,blockClass:o,blockSelector:r,ignoreClass:i,ignoreSelector:a,maskInputOptions:s,maskInputFn:l,sampling:c,userTriggeredOnInput:u}){function d(e){let n=cp(e);const c=e.isTrusted,d=n&&n.tagName;if(n&&"OPTION"===d&&(n=xd.parentElement(n)),!n||!d||hp.indexOf(d)<0||Dd(n,o,r,!0))return;if(n.classList.contains(i)||a&&n.matches(a))return;let h=n.value,f=!1;const g=lo(n)||"";"radio"===g||"checkbox"===g?f=n.checked:(s[d.toLowerCase()]||s[g])&&(h=io({element:n,maskInputOptions:s,tagName:d,type:g,value:h,maskInputFn:l})),p(n,u?{text:h,isChecked:f,userTriggered:c}:{text:h,isChecked:f});const m=n.name;"radio"===g&&m&&f&&t.querySelectorAll(`input[type="radio"][name="${m}"]`).forEach((e=>{if(e!==n){const t=e.value;p(e,u?{text:t,isChecked:!f,userTriggered:!1}:{text:t,isChecked:!f})}}))}function p(t,o){const r=fp.get(t);if(!r||r.text!==o.text||r.isChecked!==o.isChecked){fp.set(t,o);const r=n.getId(t);sp(e)({...o,id:r})}}const h=("last"===c.input?["change"]:["input","change"]).map((e=>Sd(e,sp(d),t))),f=t.defaultView;if(!f)return()=>{h.forEach((e=>e()))};const g=f.Object.getOwnPropertyDescriptor(f.HTMLInputElement.prototype,"value"),m=[[f.HTMLInputElement.prototype,"value"],[f.HTMLInputElement.prototype,"checked"],[f.HTMLSelectElement.prototype,"value"],[f.HTMLTextAreaElement.prototype,"value"],[f.HTMLSelectElement.prototype,"selectedIndex"],[f.HTMLOptionElement.prototype,"selected"]];return g&&g.set&&h.push(...m.map((e=>Td(e[0],e[1],{set(){sp(d)({target:this,isTrusted:!1})}},!1,f)))),sp((()=>{h.forEach((e=>e()))}))}(e),c=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,mirror:o,sampling:r,doc:i}){const a=sp((i=>Ed(sp((r=>{const a=cp(r);if(!a||Dd(a,t,n,!0))return;const{currentTime:s,volume:l,muted:c,playbackRate:u,loop:d}=a;e({type:i,id:o.getId(a),currentTime:s,volume:l,muted:c,playbackRate:u,loop:d})})),r.media||500))),s=[Sd("play",a(Jd.Play),i),Sd("pause",a(Jd.Pause),i),Sd("seeked",a(Jd.Seeked),i),Sd("volumechange",a(Jd.VolumeChange),i),Sd("ratechange",a(Jd.RateChange),i)];return sp((()=>{s.forEach((e=>e()))}))}(e);let u=()=>{},d=()=>{},p=()=>{},h=()=>{};e.recordDOM&&(u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:o}){if(!o.CSSStyleSheet||!o.CSSStyleSheet.prototype)return()=>{};const r=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=new Proxy(r,{apply:sp(((o,r,i)=>{const[a,s]=i,{id:l,styleId:c}=mp(r,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:a,index:s}]}),o.apply(r,i)}))}),o.CSSStyleSheet.prototype.addRule=function(e,t,n=this.cssRules.length){const r=`${e} { ${t} }`;return o.CSSStyleSheet.prototype.insertRule.apply(this,[r,n])};const i=o.CSSStyleSheet.prototype.deleteRule;let a,s;o.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:sp(((o,r,i)=>{const[a]=i,{id:s,styleId:l}=mp(r,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,removes:[{index:a}]}),o.apply(r,i)}))}),o.CSSStyleSheet.prototype.removeRule=function(e){return o.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},o.CSSStyleSheet.prototype.replace&&(a=o.CSSStyleSheet.prototype.replace,o.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:sp(((o,r,i)=>{const[a]=i,{id:s,styleId:l}=mp(r,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,replace:a}),o.apply(r,i)}))})),o.CSSStyleSheet.prototype.replaceSync&&(s=o.CSSStyleSheet.prototype.replaceSync,o.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:sp(((o,r,i)=>{const[a]=i,{id:s,styleId:l}=mp(r,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,replaceSync:a}),o.apply(r,i)}))}));const l={};wp("CSSGroupingRule")?l.CSSGroupingRule=o.CSSGroupingRule:(wp("CSSMediaRule")&&(l.CSSMediaRule=o.CSSMediaRule),wp("CSSConditionRule")&&(l.CSSConditionRule=o.CSSConditionRule),wp("CSSSupportsRule")&&(l.CSSSupportsRule=o.CSSSupportsRule));const c={};return Object.entries(l).forEach((([o,r])=>{c[o]={insertRule:r.prototype.insertRule,deleteRule:r.prototype.deleteRule},r.prototype.insertRule=new Proxy(c[o].insertRule,{apply:sp(((o,r,i)=>{const[a,s]=i,{id:l,styleId:c}=mp(r.parentStyleSheet,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:a,index:[...gp(r),s||0]}]}),o.apply(r,i)}))}),r.prototype.deleteRule=new Proxy(c[o].deleteRule,{apply:sp(((o,r,i)=>{const[a]=i,{id:s,styleId:l}=mp(r.parentStyleSheet,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,removes:[{index:[...gp(r),a]}]}),o.apply(r,i)}))})})),sp((()=>{o.CSSStyleSheet.prototype.insertRule=r,o.CSSStyleSheet.prototype.deleteRule=i,a&&(o.CSSStyleSheet.prototype.replace=a),s&&(o.CSSStyleSheet.prototype.replaceSync=s),Object.entries(l).forEach((([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule}))}))}(e,{win:n}),d=vp(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:o},{win:r}){const i=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:sp(((r,a,s)=>{var l;const[c,u,d]=s;if(n.has(c))return i.apply(a,[c,u,d]);const{id:p,styleId:h}=mp(null==(l=a.parentRule)?void 0:l.parentStyleSheet,t,o.styleMirror);return(p&&-1!==p||h&&-1!==h)&&e({id:p,styleId:h,set:{property:c,value:u,priority:d},index:gp(a.parentRule)}),r.apply(a,s)}))});const a=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:sp(((r,i,s)=>{var l;const[c]=s;if(n.has(c))return a.apply(i,[c]);const{id:u,styleId:d}=mp(null==(l=i.parentRule)?void 0:l.parentStyleSheet,t,o.styleMirror);return(u&&-1!==u||d&&-1!==d)&&e({id:u,styleId:d,remove:{property:c},index:gp(i.parentRule)}),r.apply(i,s)}))}),sp((()=>{r.CSSStyleDeclaration.prototype.setProperty=i,r.CSSStyleDeclaration.prototype.removeProperty=a}))}(e,{win:n}),e.collectFonts&&(h=function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const o=[],r=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const o=new i(e,t,n);return r.set(o,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),o};const a=Ld(t.fonts,"add",(function(t){return function(n){return setTimeout(sp((()=>{const t=r.get(n);t&&(e(t),r.delete(n))})),0),t.apply(this,[n])}}));return o.push((()=>{n.FontFace=i})),o.push(a),sp((()=>{o.forEach((e=>e()))}))}(e)));const f=function(e){const{doc:t,mirror:n,blockClass:o,blockSelector:r,selectionCb:i}=e;let a=!0;const s=sp((()=>{const e=t.getSelection();if(!e||a&&(null==e?void 0:e.isCollapsed))return;a=e.isCollapsed||!1;const s=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:l,endContainer:c,endOffset:u}=i;Dd(a,o,r,!0)||Dd(c,o,r,!0)||s.push({start:n.getId(a),startOffset:l,end:n.getId(c),endOffset:u})}i({ranges:s})}));return s(),Sd("selectionchange",s)}(e),g=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?Ld(n.customElements,"define",(function(e){return function(n,o,r){try{t({define:{name:n}})}catch(i){console.warn(`Custom element callback failed for ${n}`)}return e.apply(this,[n,o,r])}})):()=>{}}(e),m=[];for(const v of e.plugins)m.push(v.observer(v.callback,n,v.options));return sp((()=>{lp.forEach((e=>e.reset())),null==o||o.disconnect(),r(),i(),a(),s(),l(),c(),u(),d(),p(),h(),f(),g(),m.forEach((e=>e()))}))}function bp(e){return void 0!==window[e]}function wp(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class kp{constructor(e){_n(this,"iframeIdToRemoteIdMap",new WeakMap),_n(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,n,o){const r=n||this.getIdToRemoteIdMap(e),i=o||this.getRemoteIdToIdMap(e);let a=r.get(t);return a||(a=this.generateIdFn(),r.set(t,a),i.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),o=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,o)))}getRemoteId(e,t,n){const o=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const r=o.get(t);return r||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class xp{constructor(e){_n(this,"iframes",new WeakMap),_n(this,"crossOriginIframeMap",new WeakMap),_n(this,"crossOriginIframeMirror",new kp(ko)),_n(this,"crossOriginIframeStyleMirror"),_n(this,"crossOriginIframeRootIdMap",new WeakMap),_n(this,"mirror"),_n(this,"mutationCb"),_n(this,"wrappedEmit"),_n(this,"loadListener"),_n(this,"stylesheetManager"),_n(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new kp(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n,o;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(n=e.contentWindow)||n.addEventListener("message",this.handleMessage.bind(this))),null==(o=this.loadListener)||o.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const o=this.transformCrossOriginEvent(n,t.data.event);o&&this.wrappedEmit(o,t.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case Vd.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Vd.IncrementalSnapshot,data:{source:Gd.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Vd.Meta:case Vd.Load:case Vd.DomContentLoaded:return!1;case Vd.Plugin:return t;case Vd.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Vd.IncrementalSnapshot:switch(t.data.source){case Gd.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Gd.Drag:case Gd.TouchMove:case Gd.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Gd.ViewportResize:return!1;case Gd.MediaInteraction:case Gd.MouseInteraction:case Gd.Scroll:case Gd.CanvasMutation:case Gd.Input:return this.replaceIds(t.data,e,["id"]),t;case Gd.StyleSheetRule:case Gd.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Gd.Font:return t;case Gd.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Gd.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(n=t.data.styles)||n.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}return!1}replace(e,t,n,o){for(const r of o)(Array.isArray(t[r])||"number"==typeof t[r])&&(Array.isArray(t[r])?t[r]=e.getIds(n,t[r]):t[r]=e.getId(n,t[r]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Zd.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Sp{constructor(e){_n(this,"shadowDoms",new WeakSet),_n(this,"mutationCb"),_n(this,"scrollCb"),_n(this,"bypassOptions"),_n(this,"mirror"),_n(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!to(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=up({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(pp({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(xd.host(e))),this.restoreHandlers.push(vp({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Ld(e.prototype,"attachShadow",(function(e){return function(o){const r=e.call(this,o),i=xd.shadowRoot(this);return i&&Wd(this)&&n.addShadowRoot(i,t),r}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(t){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var Cp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ip="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ep=0;Ep<64;Ep++)Ip[Cp.charCodeAt(Ep)]=Ep;const Tp=new Map;const Lp=(e,t,n)=>{if(!e||!Mp(e,t)&&"object"!=typeof e)return;const o=function(e,t){let n=Tp.get(e);return n||(n=new Map,Tp.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let r=o.indexOf(e);return-1===r&&(r=o.length,o.push(e)),r};function Op(e,t,n){if(e instanceof Array)return e.map((e=>Op(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){return{rr_type:e.constructor.name,base64:function(e){var t,n=new Uint8Array(e),o=n.length,r="";for(t=0;t<o;t+=3)r+=Cp[n[t]>>2],r+=Cp[(3&n[t])<<4|n[t+1]>>4],r+=Cp[(15&n[t+1])<<2|n[t+2]>>6],r+=Cp[63&n[t+2]];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r}(e)}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Op(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Op(e.data,t,n),e.width,e.height]}}if(Mp(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:Lp(e,t,n)}}return e}const Ap=(e,t,n)=>e.map((e=>Op(e,t,n))),Mp=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function Rp(e,t,n,o){const r=[];try{const i=Ld(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(r,...i){if(!Dd(this,t,n,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(r);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[r,...i])}}));r.push(i)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{r.forEach((e=>e()))}}function Pp(e,t,n,o,r,i){const a=[],s=Object.getOwnPropertyNames(e);for(const l of s)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if("function"!=typeof e[l])continue;const s=Ld(e,l,(function(e){return function(...a){const s=e.apply(this,a);if(Lp(s,i,this),"tagName"in this.canvas&&!Dd(this.canvas,o,r,!0)){const e=Ap(a,i,this),o={type:t,property:l,args:e};n(this.canvas,o)}return s}}));a.push(s)}catch{const o=Td(e,l,{set(e){n(this.canvas,{type:t,property:l,args:[e],setter:!0})}});a.push(o)}return a}const Dp="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",Np="undefined"!=typeof window&&window.Blob&&new Blob([(jp=Dp,Uint8Array.from(atob(jp),(e=>e.charCodeAt(0))))],{type:"text/javascript;charset=utf-8"});var jp;function Fp(e){let t;try{if(t=Np&&(window.URL||window.webkitURL).createObjectURL(Np),!t)throw"";const n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(t)})),n}catch(n){return new Worker("data:text/javascript;base64,"+Dp,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}class Bp{constructor(e){_n(this,"pendingCanvasMutations",new Map),_n(this,"rafStamps",{latestId:0,invokeId:null}),_n(this,"mirror"),_n(this,"mutationCb"),_n(this,"resetObservers"),_n(this,"frozen",!1),_n(this,"locked",!1),_n(this,"processMutation",((e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)}));const{sampling:t="all",win:n,blockClass:o,blockSelector:r,recordCanvas:i,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,i&&"all"===t&&this.initCanvasMutationObserver(n,o,r),i&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,o,r,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,n,o,r){const i=Rp(t,n,o,!0),a=new Map,s=new Fp;s.onmessage=e=>{const{id:t}=e.data;if(a.set(t,!1),!("base64"in e.data))return;const{base64:n,type:o,width:r,height:i}=e.data;this.mutationCb({id:t,type:Kd["2D"],commands:[{property:"clearRect",args:[0,0,r,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:o}]},0,0]}]})};const l=1e3/e;let c,u=0;const d=e=>{u&&e-u<l||(u=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{Dd(t,n,o,!0)||e.push(t)})),e})().forEach((async e=>{var t;const n=this.mirror.getId(e);if(a.get(n))return;if(0===e.width||0===e.height)return;if(a.set(n,!0),["webgl","webgl2"].includes(e.__context)){const n=e.getContext(e.__context);!1===(null==(t=null==n?void 0:n.getContextAttributes())?void 0:t.preserveDrawingBuffer)&&n.clear(n.COLOR_BUFFER_BIT)}const o=await createImageBitmap(e);s.postMessage({id:n,bitmap:o,width:e.width,height:e.height,dataURLOptions:r.dataURLOptions},[o])}))),c=requestAnimationFrame(d)};c=requestAnimationFrame(d),this.resetObservers=()=>{i(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=Rp(e,t,n,!1),r=function(e,t,n,o){const r=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=Ld(t.CanvasRenderingContext2D.prototype,a,(function(r){return function(...i){return Dd(this.canvas,n,o,!0)||setTimeout((()=>{const n=Ap(i,t,this);e(this.canvas,{type:Kd["2D"],property:a,args:n})}),0),r.apply(this,i)}}));r.push(i)}catch{const n=Td(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:Kd["2D"],property:a,args:[t],setter:!0})}});r.push(n)}return()=>{r.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n),i=function(e,t,n,o){const r=[];return r.push(...Pp(t.WebGLRenderingContext.prototype,Kd.WebGL,e,n,o,t)),void 0!==t.WebGL2RenderingContext&&r.push(...Pp(t.WebGL2RenderingContext.prototype,Kd.WebGL2,e,n,o,t)),()=>{r.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n);this.resetObservers=()=>{o(),r(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const o=n.map((e=>{const{type:t,...n}=e;return n})),{type:r}=n[0];this.mutationCb({id:t,type:r,commands:o}),this.pendingCanvasMutations.delete(e)}}class _p{constructor(e){_n(this,"trackedLinkElements",new WeakSet),_n(this,"mutationCb"),_n(this,"adoptedStyleSheetCb"),_n(this,"styleMirror",new Hd),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},o=[];for(const r of e){let e;this.styleMirror.has(r)?e=this.styleMirror.getId(r):(e=this.styleMirror.add(r),o.push({styleId:e,rules:Array.from(r.rules||CSSRule,((e,t)=>({rule:oo(e,r.href),index:t})))})),n.styleIds.push(e)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Up{constructor(){_n(this,"nodeMap",new WeakMap),_n(this,"active",!1)}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.active||(this.active=!0,requestAnimationFrame((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let Hp,zp,qp,Wp=!1;try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null==(Fn=e.contentWindow)?void 0:Fn.Array.from)||Array.from,document.body.removeChild(e)}}catch(Qg){console.debug("Unable to override Array.from",Qg)}const Vp=new ro;function Gp(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:o,blockClass:r="rr-block",blockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:s=null,maskTextClass:l="rr-mask",maskTextSelector:c=null,inlineStylesheet:u=!0,maskAllInputs:d,maskInputOptions:p,slimDOMOptions:h,maskInputFn:f,maskTextFn:g,hooks:m,packFn:v,sampling:y={},dataURLOptions:b={},mousemoveWait:w,recordDOM:k=!0,recordCanvas:x=!1,recordCrossOriginIframes:S=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:I=!1,collectFonts:E=!1,inlineImages:T=!1,plugins:L,keepIframeSrcFn:O=(()=>!1),ignoreCSSAttributes:A=new Set([]),errorHandler:M}=e;ap=M;const R=!S||window.parent===window;let P=!1;if(!R)try{window.parent.document&&(P=!1)}catch(G){P=!0}if(R&&!t)throw new Error("emit function is required");if(!R&&!P)return()=>{};void 0!==w&&void 0===y.mousemove&&(y.mousemove=w),Vp.reset();const D=!0===d?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==p?p:{password:!0},N=!0===h||"all"===h?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===h,headMetaDescKeywords:"all"===h,headTitleMutations:"all"===h}:h||{};let j;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}();let F=0;const B=e=>{for(const t of L||[])t.eventProcessor&&(e=t.eventProcessor(e));return v&&!P&&(e=v(e)),e};Hp=(e,r)=>{var i;const a=e;if(a.timestamp=Od(),!(null==(i=lp[0])?void 0:i.isFrozen())||a.type===Vd.FullSnapshot||a.type===Vd.IncrementalSnapshot&&a.data.source===Gd.Mutation||lp.forEach((e=>e.unfreeze())),R)null==t||t(B(a),r);else if(P){const e={type:"rrweb",event:B(a),origin:window.location.origin,isCheckout:r};window.parent.postMessage(e,"*")}if(a.type===Vd.FullSnapshot)j=a,F=0;else if(a.type===Vd.IncrementalSnapshot){if(a.data.source===Gd.Mutation&&a.data.isAttachIframe)return;F++;const e=o&&F>=o,t=n&&a.timestamp-j.timestamp>n;(e||t)&&zp(!0)}};const _=e=>{Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.Mutation,...e}})},U=e=>Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.Scroll,...e}}),H=e=>Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.CanvasMutation,...e}}),z=new _p({mutationCb:_,adoptedStyleSheetCb:e=>Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.AdoptedStyleSheet,...e}})}),q=new xp({mirror:Vp,mutationCb:_,stylesheetManager:z,recordCrossOriginIframes:S,wrappedEmit:Hp});for(const X of L||[])X.getMirror&&X.getMirror({nodeMirror:Vp,crossOriginIframeMirror:q.crossOriginIframeMirror,crossOriginIframeStyleMirror:q.crossOriginIframeStyleMirror});const W=new Up;qp=new Bp({recordCanvas:x,mutationCb:H,win:window,blockClass:r,blockSelector:i,mirror:Vp,sampling:y.canvas,dataURLOptions:b});const V=new Sp({mutationCb:_,scrollCb:U,bypassOptions:{blockClass:r,blockSelector:i,maskTextClass:l,maskTextSelector:c,inlineStylesheet:u,maskInputOptions:D,dataURLOptions:b,maskTextFn:g,maskInputFn:f,recordCanvas:x,inlineImages:T,sampling:y,slimDOMOptions:N,iframeManager:q,stylesheetManager:z,canvasManager:qp,keepIframeSrcFn:O,processedNodeManager:W},mirror:Vp});zp=(e=!1)=>{if(!k)return;Hp({type:Vd.Meta,data:{href:window.location.href,width:Rd(),height:Md()}},e),z.reset(),V.init(),lp.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new ro,blockClass:o="rr-block",blockSelector:r=null,maskTextClass:i="rr-mask",maskTextSelector:a=null,inlineStylesheet:s=!0,inlineImages:l=!1,recordCanvas:c=!1,maskAllInputs:u=!1,maskTextFn:d,maskInputFn:p,slimDOM:h=!1,dataURLOptions:f,preserveWhiteSpace:g,onSerialize:m,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:k=(()=>!1)}=t||{};return jo(e,{doc:e,mirror:n,blockClass:o,blockSelector:r,maskTextClass:i,maskTextSelector:a,skipChild:!1,inlineStylesheet:s,maskInputOptions:!0===u?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===u?{password:!0}:u,maskTextFn:d,maskInputFn:p,slimDOMOptions:!0===h||"all"===h?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===h,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===h?{}:h,dataURLOptions:f,inlineImages:l,recordCanvas:c,preserveWhiteSpace:g,onSerialize:m,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:k,newlyAddedElement:!1})}(document,{mirror:Vp,blockClass:r,blockSelector:i,maskTextClass:l,maskTextSelector:c,inlineStylesheet:u,maskAllInputs:D,maskTextFn:g,maskInputFn:f,slimDOM:N,dataURLOptions:b,recordCanvas:x,inlineImages:T,onSerialize:e=>{Bd(e,Vp)&&q.addIframe(e),_d(e,Vp)&&z.trackLinkElement(e),Ud(e)&&V.addShadowRoot(xd.shadowRoot(e),document)},onIframeLoad:(e,t)=>{q.attachIframe(e,t),V.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{z.attachLinkElement(e,t)},keepIframeSrcFn:O});if(!t)return console.warn("Failed to snapshot the document");Hp({type:Vd.FullSnapshot,data:{node:t,initialOffset:Ad(window)}},e),lp.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&z.adoptStyleSheets(document.adoptedStyleSheets,Vp.getId(document))};try{const e=[],t=e=>{var t;return sp(yp)({mutationCb:_,mousemoveCb:(e,t)=>Hp({type:Vd.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.MouseInteraction,...e}}),scrollCb:U,viewportResizeCb:e=>Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.ViewportResize,...e}}),inputCb:e=>Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.Input,...e}}),mediaInteractionCb:e=>Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.MediaInteraction,...e}}),styleSheetRuleCb:e=>Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.StyleSheetRule,...e}}),styleDeclarationCb:e=>Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.StyleDeclaration,...e}}),canvasMutationCb:H,fontCb:e=>Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.Font,...e}}),selectionCb:e=>{Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.Selection,...e}})},customElementCb:e=>{Hp({type:Vd.IncrementalSnapshot,data:{source:Gd.CustomElement,...e}})},blockClass:r,ignoreClass:a,ignoreSelector:s,maskTextClass:l,maskTextSelector:c,maskInputOptions:D,inlineStylesheet:u,sampling:y,recordDOM:k,recordCanvas:x,inlineImages:T,userTriggeredOnInput:I,collectFonts:E,doc:e,maskInputFn:f,maskTextFn:g,keepIframeSrcFn:O,blockSelector:i,slimDOMOptions:N,dataURLOptions:b,mirror:Vp,iframeManager:q,stylesheetManager:z,shadowDomManager:V,processedNodeManager:W,canvasManager:qp,ignoreCSSAttributes:A,plugins:(null==(t=null==L?void 0:L.filter((e=>e.observer)))?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>Hp({type:Vd.Plugin,data:{plugin:e.name,payload:t}})}))))||[]},m)};q.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(o){console.warn(o)}}));const n=()=>{zp(),e.push(t(document)),Wp=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Sd("DOMContentLoaded",(()=>{Hp({type:Vd.DomContentLoaded,data:{}}),"DOMContentLoaded"===C&&n()}))),e.push(Sd("load",(()=>{Hp({type:Vd.Load,data:{}}),"load"===C&&n()}),window))),()=>{e.forEach((e=>e())),W.destroy(),Wp=!1,ap=void 0}}catch(Y){console.warn(Y)}}var Yp,Xp;function Kp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Jp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jp(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Jp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Zp(e){return Zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(e)}function $p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Qp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$p(Object(n),!0).forEach((function(t){th(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,nh(o.key),o)}}function th(e,t,n){return(t=nh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nh(e){var t=function(e,t){if("object"!=Zp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Zp(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zp(t)?t:String(t)}Gp.addCustomEvent=(e,t)=>{if(!Wp)throw new Error("please add custom event after start recording");Hp({type:Vd.Custom,data:{tag:e,payload:t}})},Gp.freezePage=()=>{lp.forEach((e=>e.freeze()))},Gp.takeFullSnapshot=e=>{if(!Wp)throw new Error("please take full snapshot after start recording");zp(e)},Gp.mirror=Vp,(Xp=Yp||(Yp={}))[Xp.NotStarted=0]="NotStarted",Xp[Xp.Running=1]="Running",Xp[Xp.Stopped=2]="Stopped";var oh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),th(this,"startDate",void 0),th(this,"events",[]),th(this,"bufferSize",0),th(this,"stopFunction",void 0),th(this,"customOptions",{})}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"setOptions",value:function(e){this.customOptions=e}},{key:"start",value:function(){this.stop(),this.startDate=Date.now();var e=this.events;try{this.stopFunction=Gp(Qp(Qp(Qp({},{inlineStylesheet:!0,blockClass:"gl-block",ignoreClass:"gl-ignore",maskTextClass:"gl-mask",dataURLOptions:{quality:.7},recordCanvas:!1,sampling:{scroll:150,mouseInteraction:{MouseUp:!1,MouseDown:!1,Click:!0,ContextMenu:!0,DblClick:!0,Focus:!0,Blur:!0,TouchStart:!0,TouchEnd:!1}},collectFonts:!1,recordCrossOriginIframes:!1}),this.customOptions),{},{emit:function(t){var n=function(e){var t=JSON.stringify(e);if(t.length>4e6){var n,o=/data:([\w\/\-\.]+);(\w+),([^)"]*)/gim,r=Kp(t.matchAll(o));try{for(r.s();!(n=r.n()).done;){var i=n.value;t="image/"===i[1].toLocaleLowerCase().slice(0,6)?t.replace(i[0],"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAQSURBVHgBAQUA+v8ABRg5/wHSAVZN1mnaAAAAAElFTkSuQmCC"):t.replace(i[0],"")}}catch(Qg){r.e(Qg)}finally{r.f()}}return{event:JSON.parse(t),size:t.length}}(t).event;e.push(n)}}))}catch(t){console.error(t)}}},{key:"stop",value:function(){this.stopFunction&&this.stopFunction(),this.startDate=void 0,this.events=[],this.bufferSize=0}},{key:"getReplayData",value:function(){return{startDate:this.startDate,events:this.events,baseUrl:window.location.origin,width:window.innerWidth,height:window.innerHeight,isMobile:x(),type:"rrweb"}}}])&&eh(t.prototype,n),o&&eh(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rh(e){return rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(e)}function ih(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,sh(o.key),o)}}function ah(e,t,n){return(t=sh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sh(e){var t=function(e,t){if("object"!=rh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=rh(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rh(t)?t:String(t)}th(oh,"instance",void 0);var lh=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ah(this,"rerender",void 0),ah(this,"svgElement",null),ah(this,"path",null),ah(this,"strPath",void 0),ah(this,"strokeWidth",12),ah(this,"strokeWidthRect",6),ah(this,"bufferSize",4),ah(this,"buffer",[]),ah(this,"startPoint",null),ah(this,"tool","rect"),ah(this,"color","#EB144C"),ah(this,"mouseDown",null),ah(this,"mouseMove",null),ah(this,"mouseUp",null),ah(this,"resizeListener",null),ah(this,"pathBuffer",[]);var o=this;this.rerender=t,this.svgElement=document.querySelector(".bb-capture-svg"),this.svgElement.style.minHeight="".concat(document.documentElement.scrollHeight,"px"),this.resizeListener=function(e){o.svgElement.style.minHeight="".concat(document.documentElement.scrollHeight,"px")},window.addEventListener("resize",this.resizeListener,!0),this.mouseDown=function(e){e.preventDefault();var t=document.querySelector(".bb-capture-toolbar-item-colorpicker");t&&(t.style.display="none"),o.fadeOutToolbar(),"pen"!==o.tool&&"blur"!==o.tool||o.mouseDownPen(e),"rect"===o.tool&&o.mouseDownRect(e)},this.mouseMove=function(e){e.preventDefault(),"pen"!==o.tool&&"blur"!==o.tool||o.mouseMovePen(e),"rect"===o.tool&&o.mouseMoveRect(e)},this.mouseUp=function(e){e.preventDefault(),o.fadeInToolbar(),"pen"!==o.tool&&"blur"!==o.tool||o.mouseUpPen(e),"rect"===o.tool&&o.mouseUpRect(e)},this.svgElement.addEventListener("mousedown",this.mouseDown),this.svgElement.addEventListener("mousemove",this.mouseMove),this.svgElement.addEventListener("mouseup",this.mouseUp),this.svgElement.addEventListener("touchstart",this.mouseDown,!1),this.svgElement.addEventListener("touchmove",this.mouseMove,!1),this.svgElement.addEventListener("touchend",this.mouseUp,!1),setTimeout((function(){n.rerender()}),100)}var t,n,o;return t=e,n=[{key:"clear",value:function(){if(this.svgElement)for(;this.svgElement.firstChild;)this.svgElement.firstChild.remove()}},{key:"destroy",value:function(){this.svgElement.removeEventListener("mousedown",this.mouseDown),this.svgElement.removeEventListener("mousemove",this.mouseMove),this.svgElement.removeEventListener("mouseup",this.mouseUp),this.svgElement.removeEventListener("touchstart",this.mouseDown),this.svgElement.removeEventListener("touchmove",this.mouseMove),this.svgElement.removeEventListener("touchend",this.mouseUp),window.removeEventListener("resize",this.resizeListener)}},{key:"mouseUpPen",value:function(){this.path&&(this.path=null)}},{key:"mouseUpRect",value:function(){this.path&&(this.path=null)}},{key:"mouseMovePen",value:function(e){this.path&&(this.appendToBuffer(this.getMousePosition(e)),this.updateSvgPath())}},{key:"mouseMoveRect",value:function(e){if(this.path){var t=this.getMousePosition(e),n=Math.abs(t.x-this.startPoint.x),o=Math.abs(t.y-this.startPoint.y),r=t.x,i=t.y;t.x>this.startPoint.x&&(r=this.startPoint.x),t.y>this.startPoint.y&&(i=this.startPoint.y),this.path.setAttributeNS(null,"x",r),this.path.setAttributeNS(null,"y",i),this.path.setAttributeNS(null,"width",n),this.path.setAttributeNS(null,"height",o)}}},{key:"mouseDownRect",value:function(e){this.path=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.path.setAttribute("fill","none"),this.path.setAttribute("stroke",this.color),this.path.setAttribute("stroke-linecap","round"),this.path.setAttribute("stroke-width",this.strokeWidthRect),this.startPoint=this.getMousePosition(e),this.appendPathToSvg(this.path)}},{key:"mouseDownPen",value:function(e){var t=this.color+"AA",n=this.strokeWidth;"blur"===this.tool&&(t="#000000",n=40),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.setAttribute("fill","none"),this.path.setAttribute("stroke",t),this.path.setAttribute("stroke-linecap","round"),this.path.setAttribute("stroke-width",n),this.buffer=[];var o=this.getMousePosition(e);this.appendToBuffer(o),this.strPath="M"+o.x+" "+o.y,this.path.setAttribute("d",this.strPath),this.appendPathToSvg(this.path)}},{key:"setTool",value:function(e){this.tool=e}},{key:"setColor",value:function(e){this.color=e}},{key:"getMousePosition",value:function(e){return e.touches&&e.touches.length>0?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}},{key:"getAveragePoint",value:function(e){var t=this.buffer.length;if(t%2==1||t>=this.bufferSize){var n,o,r=0,i=0,a=0;for(o=e;o<t;o++)a++,r+=(n=this.buffer[o]).x,i+=n.y;return{x:r/a,y:i/a}}return null}},{key:"updateSvgPath",value:function(){var e=this.getAveragePoint(0);if(e){this.strPath+=" L"+e.x+" "+e.y;for(var t="",n=2;n<this.buffer.length;n+=2)t+=" L"+(e=this.getAveragePoint(n)).x+" "+e.y;this.path.setAttribute("d",this.strPath+t)}}},{key:"appendToBuffer",value:function(e){for(this.buffer.push(e);this.buffer.length>this.bufferSize;)this.buffer.shift()}},{key:"appendPathToSvg",value:function(e){this.svgElement.appendChild(e),this.pathBuffer.push(e),this.rerender()}},{key:"removeLastAddedPathFromSvg",value:function(){this.pathBuffer.length<=0||!this.svgElement||(this.svgElement.removeChild(this.pathBuffer[this.pathBuffer.length-1]),this.pathBuffer.pop(),this.rerender())}},{key:"fadeOutToolbar",value:function(){var e=document.querySelector(".bb-capture-toolbar");e&&(e.style.opacity=0,e.style.pointerEvents="none")}},{key:"fadeInToolbar",value:function(){var e=document.querySelector(".bb-capture-toolbar");e&&(e.style.opacity=1,e.style.pointerEvents="auto")}}],n&&ih(t.prototype,n),o&&ih(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ch(e){return ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(e)}function uh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ph(o.key),o)}}function dh(e,t,n){return(t=ph(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ph(e){var t=function(e,t){if("object"!=ch(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=ch(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ch(t)?t:String(t)}var hh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dh(this,"keys",{37:1,38:1,39:1,40:1}),dh(this,"supportsPassive",!1),dh(this,"wheelOpt",!!this.supportsPassive&&{passive:!1}),dh(this,"wheelEvent","onwheel"in document.createElement("div")?"wheel":"mousewheel"),dh(this,"scrollDisabled",!1);var t=this;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t.supportsPassive=!0,t.wheelOpt=!!t.supportsPassive&&{passive:!1}}}))}catch(n){}}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"disableScroll",value:function(){var e=this.getInstance();e.scrollDisabled||(e.scrollDisabled=!0,window.addEventListener("DOMMouseScroll",e.preventDefault,!1),window.addEventListener(e.wheelEvent,e.preventDefault,e.wheelOpt),window.addEventListener("touchmove",e.preventDefault,e.wheelOpt),window.addEventListener("keydown",e.preventDefaultForScrollKeys,!1))}},{key:"enableScroll",value:function(){var e=this.getInstance();e.scrollDisabled&&(e.scrollDisabled=!1,window.removeEventListener("DOMMouseScroll",e.preventDefault,!1),window.removeEventListener(e.wheelEvent,e.preventDefault,e.wheelOpt),window.removeEventListener("touchmove",e.preventDefault,e.wheelOpt),window.removeEventListener("keydown",e.preventDefaultForScrollKeys,!1))}}],(n=[{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"preventDefaultForScrollKeys",value:function(e){if(this.keys&&this.keys[e.keyCode])return this.preventDefault(e),!1}}])&&uh(t.prototype,n),o&&uh(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fh(e){return fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(e)}function gh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,vh(o.key),o)}}function mh(e,t,n){return(t=vh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vh(e){var t=function(e,t){if("object"!=fh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=fh(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fh(t)?t:String(t)}dh(hh,"instance",void 0);var yh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mh(this,"type","screenshot"),mh(this,"dragCursor",null),mh(this,"screenRecorder",null),mh(this,"callback",null),mh(this,"screenDrawer",null),mh(this,"escListener",null),mh(this,"pageLeaveListener",null),mh(this,"overrideLanguage",Zg.getInstance().overrideLanguage),mh(this,"showNextStep",(function(){this.showWidgetUI(),this.callback&&(Qt.getInstance().sendMessage({name:"set-form-data",data:{formKey:"capture",data:{value:this.type,dirty:!0}}}),this.callback(!0))})),this.type=t}var t,n,o;return t=e,n=[{key:"hideWidgetUI",value:function(){var e=document.querySelector(".bb-feedback-button");e&&(e.style.display="none");var t=document.querySelector(".bb-feedback-dialog-container");t&&(t.style.display="none")}},{key:"showWidgetUI",value:function(){"screenshot"===this.type&&hh.enableScroll(),this.screenRecorder&&this.screenRecorder.stopScreenRecording(),this.unregisterListeners(),this.cleanupMousePointer(),this.screenDrawer&&this.screenDrawer.destroy();var e=document.querySelector(".bb-capture-toolbar");e&&e.remove();var t=document.querySelector(".bb-capture-svg");t&&t.classList.add("bb-capture-svg--preview");var n=document.querySelector(".bb-capture-preview");n&&n.remove();var o=document.querySelector(".bb-feedback-button");o&&(o.style.display="flex");var r=document.querySelector(".bb-feedback-dialog-container");r&&(r.style.display="block");var i=document.querySelector(".bb-capture-dismiss");i&&(i.style.display="none");var a=document.querySelector(".bb-capture-toolbar-item-colorpicker");a&&(a.style.display="none");var s=document.querySelector(".bb-capture-editor-borderlayer");s&&(s.style.display="none")}},{key:"clear",value:function(){var e=document.querySelector(".bb-capture-editor");e&&e.remove()}},{key:"setMouseMove",value:function(e,t){this.dragCursor&&(this.dragCursor.style.left="".concat(e+6,"px"),this.dragCursor.style.top="".concat(t-26,"px"),this.dragCursor.style.right=null)}},{key:"mouseMoveEventHandler",value:function(e){var t=e.clientX,n=e.clientY;this.setMouseMove(t,n)}},{key:"touchMoveEventHandler",value:function(e){var t=e.touches[0].clientX,n=e.touches[0].clientY;this.setMouseMove(t,n)}},{key:"setupMousePointer",value:function(){var e=this;this.dragCursor=document.querySelector(".bb-capture-editor-drag-info");var t=document.querySelector(".bb-capture-svg");t.addEventListener("mouseenter",(function(t){e.dragCursor.style.opacity=1})),t.addEventListener("mouseleave",(function(t){e.dragCursor.style.opacity=0})),document.documentElement.addEventListener("mousemove",this.mouseMoveEventHandler.bind(this)),document.documentElement.addEventListener("touchmove",this.touchMoveEventHandler.bind(this))}},{key:"cleanupMousePointer",value:function(){document.documentElement.removeEventListener("mousemove",this.mouseMoveEventHandler),document.documentElement.removeEventListener("touchmove",this.touchMoveEventHandler);var e=document.querySelector(".bb-capture-toolbar-item[data-type='drag']");e&&(e.removeEventListener("mousedown",this.dragStart),e.removeEventListener("touchstart",this.dragStart),document.removeEventListener("mousemove",this.drag),document.removeEventListener("touchmove",this.drag),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("touchend",this.dragEnd)),this.dragCursor&&this.dragCursor.remove()}},{key:"createEditorUI",value:function(){var e=document.createElement("div");e.className="bb-capture-editor",e.innerHTML='\n          <div class="bb-capture-editor-borderlayer"></div>\n          <svg class="bb-capture-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve"></svg>\n          <div class="bb-capture-dismiss">'.concat(p("dismiss"),"</div>\n          <div class='bb-capture-editor-drag-info'>").concat(p("rect"),'</div>\n          <div class="bb-capture-toolbar">\n            <div class="bb-capture-toolbar-item bb-capture-item-rec bb-capture-toolbar-item-tool drag-handle-item" data-type="drag">\n              ').concat(p("drag"),"\n            </div>\n            ").concat("capture"===this.type?'<div class="bb-capture-toolbar-item bb-capture-item-rec bb-capture-toolbar-item-recording" data-type="recording">\n                  '.concat(p("recorderon"),"\n                  ").concat(p("recorderoff"),'\n                  <span class="bb-tooltip bb-tooltip-screen-recording"></span>\n                </div>\n                <div class="bb-capture-toolbar-item bb-capture-item-rec" data-type="mic">\n                  ').concat(p("mic"),'\n                  <span class="bb-tooltip bb-tooltip-audio-recording"></span>\n                </div>\n                <div class="bb-capture-toolbar-item-timer bb-capture-item-rec">2:00</div>\n                <div class="bb-capture-toolbar-item-spacer"></div>\n                <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem bb-capture-toolbar-item-tool" data-type="pointer">\n                  ').concat(p("pointer"),"\n                </div>"):"",'\n            <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem bb-capture-toolbar-item-tool bb-capture-toolbar-item--active" data-type="rect">\n              ').concat(p("rect"),'\n            </div>\n            <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem bb-capture-toolbar-item-tool" data-type="pen">\n              ').concat(p("pen"),'\n            </div>\n            <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem bb-capture-toolbar-item-tool" data-type="blur">\n              ').concat(p("blur"),'\n            </div>\n            <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem" data-type="colorpicker">\n              <div class="bb-capture-toolbar-item-selectedcolor"></div>\n              <span class="bb-tooltip">').concat(Sh.translateText("pickAColor"),'</span>\n            </div>\n            <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem bb-capture-toolbar-item-tool" data-type="undo">\n              ').concat(p("undo"),'\n              <span class="bb-tooltip">').concat(Sh.translateText("undo"),"</span>\n            </div>\n            ").concat("capture"!==this.type?'<div class="bb-capture-button-next">'.concat(Sh.translateText("next"),"</div>"):"",'\n          </div>\n          <div class="bb-capture-toolbar-item-colorpicker">\n            <div class="bb-capture-toolbar-item-color" data-color="#EB144C"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#FF6705"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#FDB903"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#9900EE"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#00D082"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#0A93E4"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#CCCCCC"></div>\n          </div>\n          <div class="bb-capture-preview">\n            <div class="bb-capture-preview-inner">\n              <video controls muted autoplay></video>\n              <div class="bb-capture-preview-buttons">\n                <div class="bb-capture-preview-retrybutton">').concat(Sh.translateText("retry"),'</div>\n                <div class="bb-capture-preview-sendbutton">').concat(Sh.translateText("next"),"</div>\n              </div>\n            </div>\n          </div>\n        "),document.body.appendChild(e),e.setAttribute("dir",Sh.getInstance().isRTLLayout?"rtl":"ltr")}},{key:"unregisterListeners",value:function(){this.escListener&&document.removeEventListener("keydown",this.escListener),this.pageLeaveListener&&window.removeEventListener("beforeunload",this.pageLeaveListener)}},{key:"registerListeners",value:function(){var e=this;this.escListener=function(t){var n=!1,o=!1;"key"in(t=t||window.event)&&(n="Escape"===t.key,o="Enter"===t.key),n&&e.dismiss(),"screenshot"===e.type&&o&&e.showNextStep()},document.addEventListener("keydown",this.escListener),this.pageLeaveListener=function(e){e.preventDefault(),e.returnValue=""},window.addEventListener("beforeunload",this.pageLeaveListener)}},{key:"show",value:function(e){this.callback=e,this.registerListeners(),this.hideWidgetUI(),this.createEditorUI(),this.setupMousePointer(),"screenshot"===this.type?(Zg.getInstance().setGlobalDataItem("snapshotPosition",{x:window.scrollX,y:window.scrollY}),hh.disableScroll()):this.setupScreenRecording(),this.screenDrawer=new lh(this.captureScreenDrawerRerender.bind(this)),this.setupColorPicker(),this.setupToolbar()}},{key:"setupColorPicker",value:function(){for(var t=this,n=document.querySelector(".bb-capture-toolbar-item-selectedcolor"),o=document.querySelectorAll(".bb-capture-toolbar-item-color"),r=document.querySelector(".bb-capture-toolbar-item-colorpicker"),i=function(){var i=o[a],s=i.getAttribute("data-color");i.style.backgroundColor=s,i.onclick=function(){i&&(t.screenDrawer.setColor(s),r&&(r.style.display="none"),n.style.backgroundColor=i.style.backgroundColor,e.setPenColor(s))}},a=0;a<o.length;a++)i()}},{key:"dismiss",value:function(){this.showWidgetUI(),this.callback&&this.callback(!1)}},{key:"setupToolbar",value:function(){var e,t,n,o,r=this,i=document.querySelector(".bb-capture-toolbar"),a=!1,s=0,l=0;this.dragStart=function(e){var t=function(){var e=window.getComputedStyle(i).transform;if("none"===e)return{x:0,y:0};var t=new DOMMatrix(e);return{x:t.m41,y:t.m42}}(),r=t.x,c=t.y;s=r,l=c,"mousedown"===e.type?(n=e.clientX-s,o=e.clientY-l):(n=e.touches[0].clientX-s,o=e.touches[0].clientY-l),a=!0},this.dragEnd=function(){a=!1},this.drag=function(r){a&&(r.preventDefault(),"mousemove"===r.type?(e=r.clientX-n,t=r.clientY-o):(e=r.touches[0].clientX-n,t=r.touches[0].clientY-o),s=e,l=t,i.style.transform="translate(".concat(e,"px, ").concat(t,"px)"))};var c=document.querySelector(".bb-capture-toolbar-item[data-type='drag']");c.addEventListener("mousedown",this.dragStart),c.addEventListener("touchstart",this.dragStart),document.addEventListener("mousemove",this.drag),document.addEventListener("touchmove",this.drag),document.addEventListener("mouseup",this.dragEnd),document.addEventListener("touchend",this.dragEnd),document.querySelector(".bb-capture-dismiss").onclick=function(){r.dismiss()};var u=document.querySelector(".bb-capture-button-next");u&&(u.onclick=this.showNextStep.bind(this));for(var d=document.querySelector(".bb-capture-toolbar-item-colorpicker"),p=document.querySelector(".bb-capture-svg"),h=function(e,t){for(var n=document.querySelectorAll(".bb-capture-toolbar-item-tool"),o=0;o<n.length;o++)n[o].classList.remove("bb-capture-toolbar-item--active");if(t.classList.add("bb-capture-toolbar-item--active"),r.screenDrawer.setTool(e),r.dragCursor.innerHTML="","pointer"===e)p.style.pointerEvents="none";else{p.style.pointerEvents="auto";try{var i=t.querySelector("svg").cloneNode(!0);i&&r.dragCursor&&r.dragCursor.appendChild(i)}catch(a){}}},f=document.querySelectorAll(".bb-capture-toolbar-item"),g=function(){var e=f[m];e.onclick=function(){var t=e.getAttribute("data-type");d&&"colorpicker"!==t&&(d.style.display="none"),"mic"===t&&r.screenRecorder.toggleAudio(),"recording"===t&&(r.screenRecorder.isRecording?r.screenRecorder.stopScreenRecording():(r.screenRecorder.startScreenRecording(),h("pointer",document.querySelector(".bb-capture-toolbar-item[data-type='pointer']")))),("capture"!==r.type||r.screenRecorder.isRecording)&&("pen"!==t&&"blur"!==t&&"rect"!==t&&"pointer"!==t||h(t,e),"colorpicker"===t&&("flex"===d.style.display?d.style.display="none":d.style.display="flex"),"undo"===t&&r.screenDrawer.removeLastAddedPathFromSvg())}},m=0;m<f.length;m++)g()}},{key:"captureScreenDrawerRerender",value:function(){if(this.screenDrawer)for(var e="bb-capture-editor-item-inactive",t=document.querySelectorAll(".bb-capture-toolbar-item"),n=0;n<t.length;n++){var o=t[n];"undo"===o.getAttribute("data-type")&&(null!=this.screenDrawer.pathBuffer&&this.screenDrawer.pathBuffer.length>0?o.classList.remove(e):o.classList.add(e))}}},{key:"captureRenderer",value:function(){if(this.screenRecorder){this.screenRecorder.file&&Zg.getInstance().setGlobalDataItem("screenRecordingData",this.screenRecorder.file);var e="bb-capture-editor-item-inactive",t=document.querySelector(".bb-capture-toolbar-item-timer"),n=document.querySelectorAll(".bb-capture-toolbar-item"),o=document.querySelector(".bb-tooltip-screen-recording"),r=document.querySelector(".bb-tooltip-audio-recording"),i=document.querySelector(".bb-capture-editor"),a="bb-capture-editor-recording",s="bb-capture-editor-notrecording";this.screenRecorder.isRecording?(i.classList.add(a),i.classList.remove(s)):(i.classList.add(s),i.classList.remove(a));var l=document.querySelector(".bb-capture-toolbar");document.querySelector(".bb-capture-preview").style.display=this.screenRecorder.file?"flex":"none",l.style.display=this.screenRecorder.file?"none":"flex";for(var c=0;c<n.length;c++){var u=n[c];switch(u.getAttribute("data-type")){case"mic":this.screenRecorder.audioAvailable&&this.screenRecorder.available?(u.classList.remove(e),this.screenRecorder.audioMuted?(u.classList.add("bb-capture-toolbar-item--inactivecross"),r.innerHTML=Sh.translateText("unmute")):(u.classList.remove("bb-capture-toolbar-item--inactivecross"),r.innerHTML=Sh.translateText("mute"))):(u.classList.add(e),u.classList.add("bb-capture-toolbar-item--inactivecross"),r.innerHTML=Sh.translateText("browserNotSupported"));break;case"recording":this.screenRecorder.available?(u.classList.remove(e),this.screenRecorder.isRecording?(u.setAttribute("data-active","true"),o.innerHTML=Sh.translateText("stopRecording"),t.style.display="block"):(u.setAttribute("data-active","false"),o.innerHTML=Sh.translateText("startRecording"),t.style.display="none")):(u.classList.add(e),o.innerHTML=Sh.translateText("browserNotSupported"))}}}}},{key:"setupScreenRecording",value:function(){var e=this;document.querySelector(".bb-capture-preview-sendbutton").onclick=this.showNextStep.bind(this),document.querySelector(".bb-capture-preview-retrybutton").onclick=function(){e.screenRecorder.clearPreview(),e.screenDrawer&&e.screenDrawer.clear()},this.screenRecorder=new _t(this.captureRenderer.bind(this),Sh.translateText("accessToScreenSharingDenied"))}}],o=[{key:"setPenColor",value:function(e){for(var t=document.querySelectorAll(".bb-pen-tip"),n=0;n<t.length;n++)t[n].style.fill=e}}],n&&gh(t.prototype,n),o&&gh(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bh(e){return bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(e)}function wh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,xh(o.key),o)}}function kh(e,t,n){return(t=xh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xh(e){var t=function(e,t){if("object"!=bh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=bh(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bh(t)?t:String(t)}var Sh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),kh(this,"overrideLanguage",""),kh(this,"isRTLLayout",!1)}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"translateText",value:function(e){if(!e)return"";var t=ht.getInstance().getFlowConfig().staticTranslations;return t&&t[e]?t[e]:e}},{key:"translateTextWithVars",value:function(e,t){if(!e)return"";var n=this.translateText(e);return n?n.replace(/{(\w+)}/g,(function(e,n){return t[n]})):""}}],(n=[{key:"getOverrideLanguage",value:function(){return this.overrideLanguage}},{key:"setOverrideLanguage",value:function(e){this.overrideLanguage=e}},{key:"updateRTLSupport",value:function(){var e=ht.getInstance().getFlowConfig();this.isRTLLayout=!1,e&&e.localizationOptions&&e.localizationOptions.rtl&&(this.isRTLLayout=!0),a.getInstance().updateFeedbackButtonState(),Qt.getInstance().updateFrameStyle()}},{key:"getActiveLanguage",value:function(){var e="en";if("undefined"!=typeof navigator&&(e=navigator.language.toLowerCase()),"undefined"!=typeof document&&document.documentElement){var t=document.documentElement.lang;t&&""!==t.trim()&&(e=t.toLowerCase().trim())}return this.overrideLanguage&&""!==this.overrideLanguage&&(e=this.overrideLanguage.toLowerCase()),e}}])&&wh(t.prototype,n),o&&wh(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ch(e){return Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(e)}function Ih(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Th(o.key),o)}}function Eh(e,t,n){return(t=Th(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Th(e){var t=function(e,t){if("object"!=Ch(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Ch(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ch(t)?t:String(t)}kh(Sh,"instance",void 0);var Lh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Eh(this,"shortCutListener",void 0)}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"start",value:function(){this.shortCutListener||(this.shortCutListener=document.addEventListener("keyup",(function(e){var t,n,o=(void 0!==(t=e).key?n=t.key:void 0!==t.keyIdentifier?n=t.keyIdentifier:void 0!==t.keyCode&&(n=t.keyCode),n);!e.ctrlKey||"u"!==o&&"U"!==o&&85!==o||Zg.startFeedbackFlowWithOptions("bugreporting",{autostartDrawing:!0})})))}},{key:"stop",value:function(){this.shortCutListener&&(document.removeEventListener("keyup",this.shortCutListener),this.shortCutListener=void 0)}}])&&Ih(t.prototype,n),o&&Ih(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Oh(e){return Oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(e)}function Ah(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Rh(o.key),o)}}function Mh(e,t,n){return(t=Rh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rh(e){var t=function(e,t){if("object"!=Oh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Oh(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oh(t)?t:String(t)}Eh(Lh,"instance",void 0);var Ph=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Mh(this,"formPreFill",{})}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=null)&&Ah(t.prototype,n),o&&Ah(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Dh(e){return Dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(e)}function Nh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Fh(o.key),o)}}function jh(e,t,n){return(t=Fh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fh(e){var t=function(e,t){if("object"!=Dh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Dh(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dh(t)?t:String(t)}Mh(Ph,"instance",void 0);var Bh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jh(this,"notificationContainer",null),jh(this,"notifications",[]),jh(this,"unreadCount",0),jh(this,"unreadNotificationsKey","unread-notifications"),jh(this,"isTabActive",!0),jh(this,"showNotificationBadge",!0),jh(this,"currentNewsIndex",0)}var t,n,o;return t=e,n=[{key:"updateTabBarNotificationCount",value:function(){On.notifyEvent("unread-count-changed",this.unreadCount)}},{key:"injectNotificationUI",value:function(){if(!this.notificationContainer){var e=document.createElement("div");e.className="gleap-notification-container gleap-font",document.body.appendChild(e),this.notificationContainer=e,this.updateContainerStyle(),this.reloadNotificationsFromCache()}}},{key:"reloadNotificationsFromCache",value:function(){try{var e=E(this.unreadNotificationsKey);if(e&&e.length>0){var t=e.filter((function(e){return new Date(e.createdAt)>new Date(Date.now()-36e5)}));t.length>2?this.notifications=t.splice(0,t.length-2):this.notifications=t,this.renderNotifications()}}catch(n){}}},{key:"setNotificationCount",value:function(e){this.unreadCount=e,this.updateTabBarNotificationCount(),a.getInstance().updateNotificationBadge(this.unreadCount)}},{key:"showNotification",value:function(e){this.notificationContainer&&e&&e.data&&(this.notifications.find((function(t){return e.outbound===t.outbound}))||(this.notifications.push(e),e.sound&&cf.ping()),this.notifications.length>2&&this.notifications.shift(),T(this.unreadNotificationsKey,this.notifications),this.renderNotifications())}},{key:"renderNotifications",value:function(){var e=this;if(this.notificationContainer){this.clearAllNotifications(!0);var t=document.createElement("div");t.onclick=function(){e.clearAllNotifications(),e.currentNewsIndex=0},t.className="gleap-notification-close",t.innerHTML=p("dismiss"),this.notificationContainer.appendChild(t);var n=this.notifications.filter((function(e){return e.data.news})).sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)})),o=this.notifications.filter((function(e){return!e.data.news}));if(n.length>0){var r=this.currentNewsIndex<n.length?this.currentNewsIndex:0,i=n[r],a=document.createElement("div");a.className="gleap-notification-item-news";var s=document.createElement("div");if(s.className="gleap-notification-item-news-container",i.data.coverImageUrl&&""!==i.data.coverImageUrl&&!i.data.coverImageUrl.includes("NewsImagePlaceholder")){var l=document.createElement("img");l.className="gleap-notification-item-news-image",l.src=i.data.coverImageUrl,l.onclick=function(t){t.stopPropagation(),e.openNews(i)},s.appendChild(l)}var c=document.createElement("div");c.className="gleap-notification-item-news-content";var u=document.createElement("div");u.className="gleap-notification-item-news-content-title";var d=i.data.text||"";d=d.replaceAll("{{name}}",nt.getInstance().getName()),u.innerText=d,u.onclick=function(t){t.stopPropagation(),e.openNews(i)},c.appendChild(u);var h=this.renderDescription(i);if(h){var f=document.createElement("div");f.className="gleap-notification-item-news-preview",f.innerHTML=h,c.appendChild(f)}if(n.length>1){var g=document.createElement("div");g.className="gleap-news-pagination";var m=document.createElement("span");m.className="gleap-news-page-indicator",m.innerText="".concat(r+1," / ").concat(n.length),g.appendChild(m);var v=document.createElement("button");v.className="gleap-news-next-button",r<n.length-1?(v.innerText=Sh.translateText("next"),v.onclick=function(t){t.stopPropagation(),e.currentNewsIndex++,e.renderNotifications()}):(v.innerText=Sh.translateText("done"),v.onclick=function(t){t.stopPropagation(),e.clearAllNotifications(),e.currentNewsIndex=0}),g.appendChild(v),c.appendChild(g)}s.appendChild(c),a.appendChild(s),this.notificationContainer.appendChild(a)}for(var y=function(){var t=o[b],n=t.data.text||"";n=n.replaceAll("{{name}}",nt.getInstance().getName());var r=document.createElement("div");if(r.onclick=function(){t.data.conversation?Zg.openConversation(t.data.conversation.shareToken,!0):t.data.checklist?Zg.openChecklist(t.data.checklist.id,!0):Zg.open()},t.data.checklist){var i=Math.round(t.data.currentStep/t.data.totalSteps*100);i<100&&(i+=4),r.className="gleap-notification-item-checklist",r.innerHTML='\n          <div class="gleap-notification-item-checklist-container">\n            <div class="gleap-notification-item-checklist-content">\n              <div class="gleap-notification-item-checklist-content-title">\n                '.concat(t.data.text,'\n              </div>\n              <div class="gleap-notification-item-checklist-content-progress">\n                <div class="gleap-notification-item-checklist-content-progress-inner" style="width: ').concat(i,'%;"></div>\n              </div>\n              <div class="gleap-notification-item-checklist-content-next">\n                <svg width="24" height="24" viewBox="0 0 24 24"\n                  fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path d="M4 12H20M20 12L14 6M20 12L14 18"\n                    stroke="currentColor" stroke-width="2"\n                    stroke-linecap="round" stroke-linejoin="round"/>\n                </svg>\n                ').concat(t.data.nextStepTitle,"\n              </div>\n            </div>\n          </div>")}else r.className="gleap-notification-item",r.innerHTML="\n          ".concat(t.data.sender&&t.data.sender.profileImageUrl&&'<img src="'.concat(t.data.sender.profileImageUrl,'" />'),'\n          <div class="gleap-notification-item-container">\n            ').concat(t.data.sender?'<div class="gleap-notification-item-sender">\n                     '.concat(t.data.sender.name,"\n                   </div>"):"",'\n            <div class="gleap-notification-item-content">').concat(n,"</div>\n          </div>");e.notificationContainer.appendChild(r)},b=0;b<o.length;b++)y();n.length>0||o.length>0||this.clearAllNotifications(!0)}}},{key:"openNews",value:function(e){e.data.news?Zg.openNewsArticle(e.data.news.id,!0):Zg.open()}},{key:"renderDescription",value:function(e){var t=e.data,n=t.previewText,o=t.sender;return n&&n.length>0?n:o?'\n        <div class="gleap-notification-item-news-sender">\n          '.concat(o.profileImageUrl?'<img src="'.concat(o.profileImageUrl,'" alt="').concat(o.name,'" />'):"","\n          ").concat(o.name,"\n        </div>\n      "):""}},{key:"clearAllNotifications",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.notificationContainer)for(e||(this.notifications=[],this.currentNewsIndex=0,T(this.unreadNotificationsKey,this.notifications));this.notificationContainer.firstChild;)this.notificationContainer.removeChild(this.notificationContainer.firstChild)}},{key:"updateContainerStyle",value:function(){if(this.notificationContainer){var e=ht.getInstance().getFlowConfig(),t="gleap-notification-container--left",n="gleap-notification-container--no-button";this.notificationContainer.classList.remove(t),this.notificationContainer.classList.remove(n),e.feedbackButtonPosition!==a.FEEDBACK_BUTTON_CLASSIC_LEFT&&e.feedbackButtonPosition!==a.FEEDBACK_BUTTON_BOTTOM_LEFT||this.notificationContainer.classList.add(t),null===a.getInstance().buttonHidden?e.feedbackButtonPosition===a.FEEDBACK_BUTTON_NONE&&this.notificationContainer.classList.add(n):a.getInstance().buttonHidden&&this.notificationContainer.classList.add(n),this.notificationContainer.setAttribute("dir",Sh.getInstance().isRTLLayout?"rtl":"ltr")}}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&Nh(t.prototype,n),o&&Nh(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _h(e){return _h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(e)}function Uh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,zh(o.key),o)}}function Hh(e,t,n){return(t=zh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zh(e){var t=function(e,t){if("object"!=_h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=_h(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_h(t)?t:String(t)}jh(Bh,"instance",void 0);var qh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Hh(this,"aiUIContainer",null),Hh(this,"shadowRoot",null),Hh(this,"innerContainer",null),Hh(this,"quickActionsContainer",null),Hh(this,"quickActions",[]),Hh(this,"animationTimeouts",new Set),Hh(this,"inputText",""),Hh(this,"inputElement",null),Hh(this,"sendButton",null),Hh(this,"manuallyHidden",!1),Hh(this,"placeholder","Ask me anything..."),Hh(this,"onMessageSend",null),Hh(this,"isHidden",!0),Hh(this,"config",null),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.destroy=this.destroy.bind(this)}var t,n,o;return t=e,n=[{key:"setConfig",value:function(e){this.config=e,e.placeholder&&this.setPlaceholder(e.placeholder),e.quickActions&&e.quickActions.length>0&&this.setQuickActions(e.quickActions),e.enabled&&this.show()}},{key:"updateUIVisibility",value:function(){var e;null!==(e=this.config)&&void 0!==e&&e.enabled&&(Qt.getInstance().isOpened()?this.hide():this.show())}},{key:"setPlaceholder",value:function(e){this.placeholder=e,this.inputElement&&(this.inputElement.placeholder=e)}},{key:"setOnMessageSend",value:function(e){this.onMessageSend=e}},{key:"arraysEqual",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}},{key:"show",value:function(){var e;if(null!==(e=this.config)&&void 0!==e&&e.enabled&&!this.manuallyHidden&&this.aiUIContainer&&this.isHidden&&!Qt.getInstance().isOpened()&&(this.isHidden=!1,this.aiUIContainer.style.display="block",this.aiUIContainer.setAttribute("aria-hidden","false"),this.innerContainer)){this.innerContainer.classList.remove("fade-out");var t=ht.getInstance().getFlowConfig();this.innerContainer.classList.remove("gleap-ai-ui-container--bottom-right"),this.innerContainer.classList.remove("gleap-ai-ui-container--bottom-left"),"BOTTOM_RIGHT"===(null==t?void 0:t.feedbackButtonPosition)?this.innerContainer.classList.add("gleap-ai-ui-container--bottom-right"):"BOTTOM_LEFT"===(null==t?void 0:t.feedbackButtonPosition)&&this.innerContainer.classList.add("gleap-ai-ui-container--bottom-left")}}},{key:"hide",value:function(){var e=this;if(!this.isHidden&&this.aiUIContainer){this.isHidden=!0,this.innerContainer&&this.innerContainer.classList.add("fade-out");var t=setTimeout((function(){e.aiUIContainer&&(e.aiUIContainer.style.display="none",e.aiUIContainer.setAttribute("aria-hidden","true")),e.animationTimeouts.delete(t)}),300);this.animationTimeouts.add(t)}}},{key:"setQuickActions",value:function(e){Array.isArray(e)&&(this.arraysEqual(this.quickActions,e)||(this.quickActions=e,this.updateQuickActions()))}},{key:"updateQuickActions",value:function(){var e=this;this.quickActionsContainer&&(this.quickActionsContainer.innerHTML="",this.quickActions.slice(0,2).forEach((function(t,n){if("string"==typeof t&&t.trim()){var o=document.createElement("div");o.className="gleap-ai-ui-quick-action",o.textContent=t.trim(),o.setAttribute("role","button"),o.setAttribute("tabindex","0"),o.setAttribute("aria-label","Quick action: ".concat(t.trim())),o.addEventListener("click",(function(){e.sendMessage(t.trim())})),o.addEventListener("keydown",(function(n){"Enter"!==n.key&&" "!==n.key||(n.preventDefault(),e.sendMessage(t.trim()))})),e.quickActionsContainer.appendChild(o);var r=setTimeout((function(){o.parentNode&&o.classList.add("animate-in"),e.animationTimeouts.delete(r)}),150*n+500);e.animationTimeouts.add(r)}})))}},{key:"injectAIUI",value:function(){if(!this.aiUIContainer)if(document.body){var e=document.createElement("div");e.className="gleap-ai-ui-widget",e.setAttribute("role","dialog"),e.setAttribute("aria-label","AI Assistant"),e.setAttribute("aria-hidden","true"),document.body.appendChild(e),this.aiUIContainer=e,this.shadowRoot=this.aiUIContainer.attachShadow({mode:"open"}),this.addStylesToShadow(),this.createUIInShadow(),this.updateUIVisibility()}else console.error("GleapAiChatbarManager: Document body not available")}},{key:"addStylesToShadow",value:function(){var e=document.createElement("style");e.textContent='\n      .gleap-font, .gleap-font * {\n        font-style: normal;\n        font-variant-caps: normal;\n        font-variant-ligatures: normal;\n        font-variant-numeric: normal;\n        font-variant-east-asian: normal;\n        font-weight: normal;\n        font-stretch: normal;\n        font-size: 100%;\n        line-height: 1;\n        font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n      }\n\n      .gleap-ai-ui-container {\n        position: fixed;\n        bottom: 20px;\n        left: 0;\n        right: 0;\n        height: 0;\n        z-index: 999999;\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-end;\n        align-items: center;\n        opacity: 0;\n        white-space: normal;\n        transform: translateY(20px);\n        animation: fadeUpInContainer 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n      }\n      \n      .gleap-ai-ui-quick-actions {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        margin-bottom: 12px;\n        opacity: 0;\n        transform: translateY(10px);\n        animation: fadeUpIn 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.5s forwards;\n        max-width: 100%;\n      }\n      \n      .gleap-ai-ui-quick-action {\n        background: #fff;\n        color: #000;\n        padding: 8px 12px;\n        border-radius: 16px;\n        border-bottom-right-radius: 4px;\n        font-size: 13px;\n        cursor: pointer;\n        border: 1px solid rgba(30, 24, 24, 0.13);\n        transition: background-color 0.2s, transform 0.2s;\n        box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n        opacity: 0;\n        transform: translateY(15px) scale(0.95);\n        flex-shrink: 0;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      \n      .gleap-ai-ui-quick-action.animate-in {\n        animation: fadeUpInAction 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n      }\n      \n      .gleap-ai-ui-quick-action:nth-child(1).animate-in {\n        animation-delay: 0.5s;\n      }\n      \n      .gleap-ai-ui-quick-action:nth-child(2).animate-in {\n        animation-delay: 0.65s;\n      }\n      \n      .gleap-ai-ui-quick-action:hover {\n        background: #000;\n        color: #fff;\n        border: 1px solid #000000;\n        transform: translateY(-2px) scale(1.02);\n      }\n      \n      .gleap-ai-ui-input-container {\n        position: relative;\n        width: auto;\n        min-width: min(280px, calc(100vw - 40px));\n        margin: 0 auto;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        opacity: 0;\n        transform: translateY(15px);\n        animation: fadeUpIn 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.45s forwards;\n      }\n      \n      .gleap-ai-ui-input-container:focus-within,\n      .gleap-ai-ui-container.active .gleap-ai-ui-input-container {\n        min-width: 430px;\n      }\n\n      @media (max-width: 580px) {\n        .gleap-ai-ui-container {\n          bottom: 23px;\n          align-items: flex-start;\n          left: 20px;\n          right: 20px;\n        }\n\n        .gleap-ai-ui-quick-actions {\n          justify-content: flex-start;\n          gap: 6px;\n          margin-bottom: 10px;\n          width: 100%;\n        }\n\n        .gleap-ai-ui-quick-action {\n          max-width: calc(50% - 28px);\n        }\n\n        .gleap-ai-ui-container--bottom-right {\n          right: 78px;\n        }\n\n        .gleap-ai-ui-container--bottom-left {\n          left: 78px;\n        }\n\n        .gleap-ai-ui-input-container:focus-within,\n        .gleap-ai-ui-input-container {\n          min-width: auto !important;\n          width: 100% !important;\n          max-width: 100% !important;\n          margin: 0px !important;\n        }\n      }\n      \n      .animated-gradient-border-wrapper {\n        position: absolute;\n        overflow: hidden;\n        border-radius: 50px;\n        transition: all 0.2s ease-in-out;\n        left: -2px;\n        top: -2px;\n        right: -2px;\n        bottom: -2px;\n      }\n      \n      .animated-gradient-border-wrapper-glow {\n        position: absolute;\n        overflow: hidden;\n        border-radius: 50px;\n        filter: blur(15px);\n        left: -2px;\n        top: -2px;\n        right: -2px;\n        bottom: -2px;\n      }\n      \n      .group:hover .animated-gradient-border-wrapper,\n      .group:focus-within .animated-gradient-border-wrapper {\n        left: -4px;\n        top: -4px;\n        right: -4px;\n        bottom: -4px;\n      }\n      \n      .group:hover .animated-gradient-border-wrapper-glow,\n      .group:focus-within .animated-gradient-border-wrapper-glow {\n        left: -4px;\n        top: -4px;\n        right: -4px;\n        bottom: -4px;\n      }\n      \n      .animated-gradient-border-wrapper:before,\n      .animated-gradient-border-wrapper-glow:before {\n        content: "";\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 99999px;\n        height: 99999px;\n        background-repeat: no-repeat;\n        background-position: 0 0;\n        opacity: 0.4;\n        background-image: conic-gradient(\n          #0000,\n          #b6e0dc,\n          #eaef8c,\n          #fdc19e,\n          #f29be5,\n          #c4aeff,\n          #0000 95%\n        );\n        filter: blur(20px);\n        transform: translate(-50%, -50%) rotate(0deg);\n        transition: opacity 0.5s ease-in-out;\n        animation: border-spin 4s linear infinite;\n      }\n      \n      .group:hover .animated-gradient-border-wrapper-glow:before {\n        opacity: 1;\n      }\n      \n      .bg-gradient-blur {\n        position: relative;\n        background: white;\n        border-radius: 42px;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n        overflow: hidden;\n        z-index: 1;\n      }\n      \n      .gleap-ai-ui-input {\n        position: relative;\n        z-index: 1;\n        width: 100%;\n        height: 42px;\n        padding: 0px;\n        border-radius: 42px;\n      }\n\n      .gleap-ai-ui-input-content {\n        display: flex;\n        align-items: center;\n        padding: 0px;\n        height: 100%;\n      }\n      \n      .gleap-ai-ui-input input {\n        flex-grow: 1;\n        height: 100%;\n        padding-left: 16px;\n        padding-right: 8px;\n        border: none;\n        background: transparent;\n        font-size: 16px;\n        line-height: 24px;\n        font-weight: 400;\n        color: #000;\n        outline: none;\n        box-sizing: border-box;\n      }\n\n      .gleap-ai-ui-input-send-button {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 34px;\n        height: 34px;\n        border-radius: 50%;\n        background: #efefef;\n        margin-left: 0px;\n        margin-right: 4px;\n      }\n\n      .gleap-ai-ui-input-send-button svg {\n        width: 18px;\n        height: 18px;\n        flex-shrink: 0;\n        color: #666;\n        pointer-events: none;\n        z-index: 2;\n        transition: color 0.2s ease;\n      }\n\n      .gleap-ai-ui-container.active .gleap-ai-ui-input-send-button {\n        background: #000;\n        transition: background-color 0.2s ease;\n      }\n\n      .gleap-ai-ui-container.active .gleap-ai-ui-input-send-button svg {\n        color: #fff;\n      }\n      \n      .gleap-ai-ui-input input::placeholder {\n        color: rgba(0, 0, 0, 0.6);\n        transition: color 0.2s ease;\n      }\n\n      .gleap-ai-ui-container--noglow .animated-gradient-border-wrapper,\n      .gleap-ai-ui-container--noglow .animated-gradient-border-wrapper {\n        display: none !important;\n      }\n\n      .gleap-ai-ui-container--dark .bg-gradient-blur {\n        background-color: rgba(80, 80, 80, 0.68);\n        backdrop-filter: blur(24px);\n      }\n\n      .gleap-ai-ui-container--dark .gleap-ai-ui-input-send-button {\n        background-color: rgba(255, 255, 255, 0.44);\n      }\n\n      .gleap-ai-ui-container--dark .gleap-ai-ui-input-send-button svg {\n        color: rgba(0, 0, 0, 0.6);\n      }\n      \n      .gleap-ai-ui-container--dark .gleap-ai-ui-input input::placeholder {\n        color: rgba(255, 255, 255, 0.44);\n      }\n\n      .gleap-ai-ui-container--dark .gleap-ai-ui-input input {\n        color: #fff;\n      }\n\n      .gleap-ai-ui-container--dark .gleap-ai-ui-input-container:focus-within .gleap-ai-ui-input-send-button,\n      .gleap-ai-ui-container--dark.active .gleap-ai-ui-input-container .gleap-ai-ui-input-send-button {\n        background-color: #fff;\n      }\n\n      .gleap-ai-ui-container--dark .gleap-ai-ui-input-container:focus-within .gleap-ai-ui-input-send-button svg,\n      .gleap-ai-ui-container--dark.active .gleap-ai-ui-input-container .gleap-ai-ui-input-send-button svg {\n        color: #000;\n      }\n      \n      @keyframes gradient-shift {\n        0% {\n          background-position: 0% 50%;\n        }\n        50% {\n          background-position: 100% 50%;\n        }\n        100% {\n          background-position: 0% 50%;\n        }\n      }\n      \n      @keyframes border-spin {\n        0% {\n          transform: translate(-50%, -50%) rotate(0deg);\n        }\n        100% {\n          transform: translate(-50%, -50%) rotate(-360deg);\n        }\n      }\n      \n      @keyframes fadeUpIn {\n        0% {\n          opacity: 0;\n          transform: translateY(20px) scale(0.95);\n        }\n        100% {\n          opacity: 1;\n          transform: translateY(0) scale(1);\n        }\n      }\n      \n      @keyframes fadeUpInAction {\n        0% {\n          opacity: 0;\n          transform: translateY(15px) scale(0.95);\n        }\n        100% {\n          opacity: 1;\n          transform: translateY(0) scale(1);\n        }\n      }\n      \n      @keyframes fadeUpInContainer {\n        0% {\n          opacity: 0;\n          transform: translateY(20px);\n        }\n        100% {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      \n      @keyframes fadeOutDownContainer {\n        0% {\n          opacity: 1;\n          transform: translateY(0);\n        }\n        100% {\n          opacity: 0;\n          transform: translateY(20px);\n        }\n      }\n      \n      .gleap-ai-ui-container.fade-out {\n        animation: fadeOutDownContainer 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;\n      }      \n    ',this.shadowRoot.appendChild(e)}},{key:"createUIInShadow",value:function(){var e,t,n,o,r="";"light"!==(null===(e=this.config)||void 0===e?void 0:e.style)&&"dark"!==(null===(t=this.config)||void 0===t?void 0:t.style)||(r+=" gleap-ai-ui-container--noglow"),"dark"!==(null===(n=this.config)||void 0===n?void 0:n.style)&&"dark-glow"!==(null===(o=this.config)||void 0===o?void 0:o.style)||(r+=" gleap-ai-ui-container--dark"),this.innerContainer=document.createElement("div"),this.innerContainer.className="gleap-ai-ui-container"+r,this.innerContainer.innerHTML='\n      <div class="gleap-ai-ui-quick-actions"></div>\n      <div class="gleap-ai-ui-input-container">\n        <div class="relative group" style="--border-width: 2px; --border-width-hover: 4px;">\n          <div class="animated-gradient-border-wrapper"></div>\n          <div class="animated-gradient-border-wrapper animated-gradient-border-wrapper-glow"></div>\n          <div class="bg-gradient-blur">\n            <div class="gleap-ai-ui-input">\n              <div class="gleap-ai-ui-input-content">\n                <input name="AI question" type="text" placeholder="'.concat(this.placeholder,'" />\n                <div class="gleap-ai-ui-input-send-button">\n                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M342.6 81.4C330.1 68.9 309.8 68.9 297.3 81.4L137.3 241.4C124.8 253.9 124.8 274.2 137.3 286.7C149.8 299.2 170.1 299.2 182.6 286.7L288 181.3L288 552C288 569.7 302.3 584 320 584C337.7 584 352 569.7 352 552L352 181.3L457.4 286.7C469.9 299.2 490.2 299.2 502.7 286.7C515.2 274.2 515.2 253.9 502.7 241.4L342.7 81.4z"/></svg>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    '),this.shadowRoot.appendChild(this.innerContainer),this.quickActionsContainer=this.shadowRoot.querySelector(".gleap-ai-ui-quick-actions"),this.inputElement=this.shadowRoot.querySelector("input"),this.sendButton=this.shadowRoot.querySelector(".gleap-ai-ui-input-send-button"),this.setupInputListener(),this.updateQuickActions()}},{key:"setupInputListener",value:function(){var e=this;this.inputElement&&this.sendButton&&(this.inputElement.addEventListener("input",(function(t){e.inputText=t.target.value.trim(),e.updateSendButtonState()})),this.inputElement.addEventListener("keydown",(function(t){"Enter"===t.key&&e.inputText.length>0&&(t.preventDefault(),e.sendMessage(e.inputText))})),this.sendButton.addEventListener("click",(function(){e.inputText.length>0&&e.sendMessage(e.inputText)})))}},{key:"updateSendButtonState",value:function(){this.sendButton&&this.innerContainer&&(this.inputText.length>0?this.innerContainer.classList.add("active"):this.innerContainer.classList.remove("active"))}},{key:"sendMessage",value:function(e){e&&0!==e.trim().length&&(this.onMessageSend&&"function"==typeof this.onMessageSend&&this.onMessageSend(e.trim()),this.inputText="",this.inputElement&&(this.inputElement.value=""),this.updateSendButtonState())}},{key:"destroy",value:function(){this.animationTimeouts.forEach((function(e){clearTimeout(e)})),this.animationTimeouts.clear(),this.aiUIContainer&&(this.aiUIContainer.remove(),this.aiUIContainer=null),this.shadowRoot=null,this.innerContainer=null,this.quickActionsContainer=null,this.quickActions=[],this.inputElement=null,this.sendButton=null,this.inputText="",this.onMessageSend=null,e.instance=null}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&Uh(t.prototype,n),o&&Uh(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Wh(e){return Wh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(e)}function Vh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Gh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vh(Object(n),!0).forEach((function(t){Xh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yh(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Kh(o.key),o)}}function Xh(e,t,n){return(t=Kh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kh(e){var t=function(e,t){if("object"!=Wh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Wh(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wh(t)?t:String(t)}Hh(qh,"instance",void 0);var Jh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Xh(this,"bannerUrl","https://outboundmedia.gleap.io"),Xh(this,"bannerContainer",null),Xh(this,"bannerData",null),Xh(this,"disabled",!1),this.startCommunication()}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"setBannerUrl",value:function(e){this.bannerUrl=e}},{key:"startCommunication",value:function(){var e=this;window.addEventListener("message",(function(t){var n;if(null!==(n=e.bannerUrl)&&void 0!==n&&n.includes(t.origin))try{var o,r,i,a,s,l,c,u,d,p,h,f=JSON.parse(t.data);if("BANNER"!==(null==f?void 0:f.type))return;if("banner-loaded"===f.name&&e.bannerData&&e.sendMessage({name:"banner-data",data:e.bannerData}),"banner-height"===f.name&&document.documentElement.style.setProperty("--gleap-margin-top",f.data.height+"px"),"banner-data-set"===f.name&&(document.body.classList.add("gleap-b-shown"),"floating"===(null===(o=e.bannerData)||void 0===o?void 0:o.format)&&document.body.classList.add("gleap-b-f")),"banner-close"===f.name&&e.removeBannerUI(),"start-conversation"===f.name&&Zg.startBot(null===(r=f.data)||void 0===r?void 0:r.botId),"start-custom-action"===f.name&&Zg.triggerCustomAction(null===(i=f.data)||void 0===i?void 0:i.action),"start-product-tour"===f.name&&Zg.startProductTour(null===(a=f.data)||void 0===a?void 0:a.tourId,!0),"open-url"===f.name){var g=f.data,m=!!f.newTab;Qt.getInstance().urlHandler(g,m)}"show-form"===f.name&&Zg.startFeedbackFlow(null===(s=f.data)||void 0===s?void 0:s.formId),"show-survey"===f.name&&Zg.showSurvey(null===(l=f.data)||void 0===l?void 0:l.formId,null===(c=f.data)||void 0===c?void 0:c.surveyFormat),"show-news-article"===f.name&&Zg.openNewsArticle(null===(u=f.data)||void 0===u?void 0:u.articleId),"show-help-article"===f.name&&Zg.openHelpCenterArticle(null===(d=f.data)||void 0===d?void 0:d.articleId),"show-checklist"===f.name&&Zg.startChecklist(null===(p=f.data)||void 0===p?void 0:p.checklistId,!0,null===(h=f.data)||void 0===h?void 0:h.sharedKey)}catch(v){}}))}},{key:"removeBannerUI",value:function(){this.bannerContainer&&(document.body.removeChild(this.bannerContainer),this.bannerContainer=null),document.body.classList.remove("gleap-b-shown"),document.body.classList.remove("gleap-b-f")}},{key:"disable",value:function(){this.disabled=!0,this.removeBannerUI()}},{key:"injectBannerUI",value:function(e){if(!document.body)return!1;if(this.disabled)return!1;this.bannerContainer&&this.removeBannerUI(),this.bannerData=e;var t=document.createElement("div");t.className="gleap-b",t.innerHTML='<iframe src="'.concat(this.bannerUrl,'" class="gleap-b-frame" scrolling="no" title="Gleap Banner" role="dialog" frameborder="0"></iframe>'),document.body.appendChild(t),this.bannerContainer=t}},{key:"sendMessage",value:function(e){try{var t=document.querySelector(".gleap-b-frame");t&&t.contentWindow&&t.contentWindow.postMessage(JSON.stringify(Gh(Gh({},e),{},{type:"banner"})),"*")}catch(n){}}},{key:"showBanner",value:function(e){this.injectBannerUI(e)}}])&&Yh(t.prototype,n),o&&Yh(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Zh(e){return Zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(e)}function $h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Qh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$h(Object(n),!0).forEach((function(t){tf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ef(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,nf(o.key),o)}}function tf(e,t,n){return(t=nf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nf(e){var t=function(e,t){if("object"!=Zh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Zh(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zh(t)?t:String(t)}Xh(Jh,"instance",void 0);var of=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tf(this,"modalUrl","https://outboundmedia.gleap.io/modal"),tf(this,"modalContainer",null),tf(this,"modalData",null),tf(this,"modalBackdropClickListener",null),tf(this,"disabled",!1),this._listenForMessages()}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"setModalUrl",value:function(e){this.modalUrl=e}},{key:"disable",value:function(){this.disabled=!0,this.hideModal()}},{key:"_listenForMessages",value:function(){var e=this;window.addEventListener("message",(function(t){var n;if(null!==(n=e.modalUrl)&&void 0!==n&&n.includes(t.origin))try{var o,r,i,a,s,l,c,u,d,p,h=JSON.parse(t.data);if("MODAL"!==(null==h?void 0:h.type))return;if("modal-loaded"===h.name&&e.modalData){var f=ht.getInstance().getFlowConfig(),g=f.color?f.color:"#485BFF",m=f.backgroundColor?f.backgroundColor:"#FFFFFF";e._postMessage({name:"modal-data",data:Qh(Qh({},e.modalData),{},{primaryColor:g,backgroundColor:m})})}if("modal-height"===h.name){var v,y=null==h||null===(v=h.data)||void 0===v?void 0:v.height;if(y){var b=e.modalContainer.querySelector(".gleap-modal-frame");b&&(b.style.height="".concat(y,"px"))}}if(h.name,"modal-close"===h.name&&e.hideModal(),"start-conversation"===h.name&&Zg.startBot(null===(o=h.data)||void 0===o?void 0:o.botId),"start-custom-action"===h.name&&Zg.triggerCustomAction(null===(r=h.data)||void 0===r?void 0:r.action),"start-product-tour"===h.name&&Zg.startProductTour(null===(i=h.data)||void 0===i?void 0:i.tourId,!0),"open-url"===h.name){var w=h.data,k=!!h.newTab;Qt.getInstance().urlHandler(w,k)}"show-form"===h.name&&Zg.startFeedbackFlow(null===(a=h.data)||void 0===a?void 0:a.formId),"show-survey"===h.name&&Zg.showSurvey(null===(s=h.data)||void 0===s?void 0:s.formId,null===(l=h.data)||void 0===l?void 0:l.surveyFormat),"show-news-article"===h.name&&Zg.openNewsArticle(null===(c=h.data)||void 0===c?void 0:c.articleId),"show-help-article"===h.name&&Zg.openHelpCenterArticle(null===(u=h.data)||void 0===u?void 0:u.articleId),"show-checklist"===h.name&&Zg.startChecklist(null===(d=h.data)||void 0===d?void 0:d.checklistId,!0,null===(p=h.data)||void 0===p?void 0:p.sharedKey)}catch(x){}}))}},{key:"_injectModalUI",value:function(e){var t=this;if(!document.body)return!1;if(this.disabled)return!1;this.modalContainer&&this.hideModal(),this.modalData=e;var n=document.createElement("div");n.className="gleap-modal-wrapper",n.innerHTML='\n      <div class="gleap-modal-backdrop"></div>\n      <div class="gleap-modal">\n        <iframe\n          src="'.concat(this.modalUrl,'"\n          class="gleap-modal-frame"\n          scrolling="no"\n          title="Gleap Modal"\n          role="dialog"\n          frameborder="0"\n          allow="autoplay; encrypted-media; fullscreen; microphone *;"\n        ></iframe>\n      </div>\n    '),document.body.appendChild(n),this.modalContainer=n,this.modalBackdropClickListener=this.modalContainer.querySelector(".gleap-modal-backdrop").addEventListener("click",(function(){var e,n;(null===(e=null===(n=t.modalData)||void 0===n?void 0:n.showCloseButton)||void 0===e||e)&&t.hideModal()})),document.body.classList.add("gleap-modal-open")}},{key:"_postMessage",value:function(e){try{var t=this.modalContainer.querySelector(".gleap-modal-frame");null!=t&&t.contentWindow&&t.contentWindow.postMessage(JSON.stringify(Qh(Qh({},e),{},{type:"modal"})),this.modalUrl)}catch(Qg){}}},{key:"showModal",value:function(e){e&&e.config&&this._injectModalUI(e.config)}},{key:"hideModal",value:function(){this.modalContainer&&(this.modalBackdropClickListener&&this.modalContainer.querySelector(".gleap-modal-backdrop").removeEventListener("click",this.modalBackdropClickListener),document.body.removeChild(this.modalContainer),this.modalContainer=null,document.body.classList.remove("gleap-modal-open"))}}])&&ef(t.prototype,n),o&&ef(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rf(e){return rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(e)}function af(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,lf(o.key),o)}}function sf(e,t,n){return(t=lf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lf(e){var t=function(e,t){if("object"!=rf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=rf(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rf(t)?t:String(t)}tf(of,"instance",void 0);var cf=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"playSound",value:function(e){this.settings.play=e}},{key:"ping",value:function(){try{if(!this.settings.play)return;this.audio||(this.audio=new Audio("https://js.gleap.io/res/ping.mp3"));var e=this.audio.play();void 0!==e&&e.then((function(e){})).catch((function(e){}))}catch(t){}}}],(n=null)&&af(t.prototype,n),o&&af(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function uf(e){return uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(e)}function df(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,hf(o.key),o)}}function pf(e,t,n){return(t=hf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hf(e){var t=function(e,t){if("object"!=uf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=uf(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uf(t)?t:String(t)}sf(cf,"audio",void 0),sf(cf,"settings",{play:!0});var ff=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pf(this,"tags",[])}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"getTags",value:function(){return this.tags}},{key:"setTags",value:function(e){this.tags=e}}])&&df(t.prototype,n),o&&df(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gf(e){var t=e.getAttribute("id");return null!==t&&""!==t?t.match(/(?:^\d|:)/)?'[id="'.concat(t,'"]'):"#"+t:null}function mf(e){var t=function(e){if(!e.hasAttribute("class"))return[];try{return Array.prototype.slice.call(e.classList).filter((function(e){return/^[a-z_-][a-z\d_-]*$/i.test(e)?e:null}))}catch(n){var t=e.getAttribute("class");return(t=t.trim().replace(/\s+/g," ")).split(" ")}}(e).filter(Boolean);return t.map((function(e){return".".concat(e)}))}function vf(e,t,n,o,r,i,a){if(i!==a)for(var s=o;s<=r&&r-s+1>=a-i;++s)n[i]=t[s],vf(e,t,n,s+1,r,i+1,a);else e.push(n.slice(0,i).join(""))}function yf(e){return function(e){if(Array.isArray(e))return bf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return bf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bf(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function wf(e){return wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(e)}function kf(e){return"object"===("undefined"==typeof HTMLElement?"undefined":wf(HTMLElement))?e instanceof HTMLElement:!!e&&"object"===wf(e)&&1===e.nodeType&&"string"==typeof e.nodeName}function xf(e){var t,n,o=0,r=e.parentNode;if(Boolean(r)){var i=r.childNodes,a=i.length;for(t=0;t<a;t++)if(kf(n=i[t])&&(o++,n===e))return":nth-child(".concat(o,")")}return null}function Sf(e){return e.tagName.toLowerCase().replace(/:/g,"\\:")}function Cf(e,t){if(!Boolean(t))return!1;var n=e.ownerDocument.querySelectorAll(t);return 1===n.length&&n[0]===e}function If(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ef(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Tf(e,t,n){var o={Tag:Sf,NthChild:xf,Attributes:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id","class","length"];return yf(e.attributes).reduce((function(e,n){return t.indexOf(n.nodeName)>-1||e.push("[".concat(n.nodeName,'="').concat(n.value,'"]')),e}),[])}(e,n)},Class:mf,ID:gf};return t.reduce((function(t,n){return t[n]=o[n](e),t}),{})}function Lf(e,t){try{var n=e.parentNode.querySelectorAll(t);return 1===n.length&&n[0]===e}catch(o){return!1}}function Of(e,t){return t.find(Lf.bind(null,e))}function Af(e,t,n){var o=function(e,t){for(var n=[],o=e.length,r=[],i=1;i<=t;++i)vf(n,e,r,0,o-1,0,i);return n}(t,3),r=Of(e,o);return Boolean(r)||Boolean(n)&&(r=Of(e,o=o.map((function(e){return n+e}))),Boolean(r))?r:null}function Mf(e,t,n,o){var r,i=Tf(e,t,n);o&&o instanceof RegExp&&(i.ID=o.test(i.ID)?null:i.ID,i.Class=i.Class.filter((function(e){return!o.test(e)})));var a,s=If(t);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=i.ID,u=i.Tag,d=i.Class,p=i.Attributes,h=i.NthChild;switch(l){case"ID":if(Boolean(c)&&Lf(e,c))return c;break;case"Tag":if(Boolean(u)&&Lf(e,u))return u;break;case"Class":if(Boolean(d)&&d.length&&(r=Af(e,d,u)))return r;break;case"Attributes":if(Boolean(p)&&p.length&&(r=Af(e,p,u)))return r;break;case"NthChild":if(Boolean(h))return h}}}catch(Qg){s.e(Qg)}finally{s.f()}return"*"}function Rf(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.selectorTypes,r=void 0===o?["ID","Class","Tag","NthChild"]:o,i=n.attributesToIgnore,a=void 0===i?["id","class","length"]:i,s=n.excludeRegex,l=void 0===s?null:s,c=[],u=function(e){for(var t=[],n=e;kf(n);)t.push(n),n=n.parentNode;return t}(e),d=If(u);try{for(d.s();!(t=d.n()).done;){var p=Mf(t.value,r,a,l);Boolean(p)&&c.push(p)}}catch(Qg){d.e(Qg)}finally{d.f()}for(var h=[],f=0,g=c;f<g.length;f++){var m=g[f];h.unshift(m);var v=h.join(" > ");if(Cf(e,v))return v}return null}function Pf(e){return Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(e)}function Df(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nf(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ff(o.key),o)}}function jf(e,t,n){return t&&Nf(e.prototype,t),n&&Nf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ff(e){var t=function(e,t){if("object"!=Pf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Pf(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pf(t)?t:String(t)}pf(ff,"instance",void 0);var Bf=function(){function e(t){Df(this,e),this.overlay=document.createElement("div"),this.overlay.className=t.className||"_ext-element-overlay",this.overlay.style.background=t.style&&t.style.background||"rgba(250, 240, 202, 0.2)",this.overlay.style.borderColor=t.style&&t.style.borderColor||"#F95738",this.overlay.style.borderStyle=t.style&&t.style.borderStyle||"solid",this.overlay.style.borderRadius=t.style&&t.style.borderRadius||"1px",this.overlay.style.borderWidth=t.style&&t.style.borderWidth||"1px",this.overlay.style.boxSizing=t.style&&t.style.boxSizing||"border-box",this.overlay.style.cursor=t.style&&t.style.cursor||"crosshair",this.overlay.style.position=t.style&&t.style.position||"absolute",this.overlay.style.zIndex=t.style&&t.style.zIndex||"2147483647",this.overlay.style.margin=t.style&&t.style.margin||"0px",this.overlay.style.padding=t.style&&t.style.padding||"0px",this.shadowContainer=document.createElement("div"),this.shadowContainer.className="_ext-element-overlay-container",this.shadowContainer.style.position="absolute",this.shadowContainer.style.top="0px",this.shadowContainer.style.left="0px",this.shadowContainer.style.margin="0px",this.shadowContainer.style.padding="0px",this.shadowRoot=this.shadowContainer.attachShadow({mode:"open"})}return jf(e,[{key:"addToDOM",value:function(e,t){this.usingShadowDOM=t,t?(e.insertBefore(this.shadowContainer,e.firstChild),this.shadowRoot.appendChild(this.overlay)):e.appendChild(this.overlay)}},{key:"removeFromDOM",value:function(){this.setBounds({x:0,y:0,width:0,height:0}),this.overlay.remove?this.overlay.remove():this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay),this.usingShadowDOM&&(this.shadowContainer.remove?this.shadowContainer.remove():this.shadowContainer.parentNode&&this.shadowContainer.parentNode.removeChild(this.shadowContainer))}},{key:"captureCursor",value:function(){this.overlay.style.pointerEvents="auto"}},{key:"ignoreCursor",value:function(){this.overlay.style.pointerEvents="none"}},{key:"setBounds",value:function(e){var t=e.x,n=e.y,o=e.width,r=e.height;this.overlay.style.left=t+"px",this.overlay.style.top=n+"px",this.overlay.style.width=o+"px",this.overlay.style.height=r+"px"}}]),e}(),_f=function(){function e(t){Df(this,e),this.active=!1,this.overlay=new Bf(t||{}),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleClick=this.handleClick.bind(this),this.tick=this.tick.bind(this)}return jf(e,[{key:"start",value:function(e){if(this.active)return!1;this.active=!0,this.options=e,document.addEventListener("mousemove",this.handleMouseMove,!0),document.addEventListener("click",this.handleClick,!0);var t=e.parentElement||document.body,n=void 0===e.useShadowDOM||e.useShadowDOM;return this.overlay.addToDOM(t,n),this.tick(),!0}},{key:"stop",value:function(){this.active=!1,this.options=void 0,document.removeEventListener("mousemove",this.handleMouseMove,!0),document.removeEventListener("click",this.handleClick,!0),this.overlay.removeFromDOM(),this.target=void 0,this.mouseX=void 0,this.mouseY=void 0,this.tickReq&&window.cancelAnimationFrame(this.tickReq)}},{key:"handleMouseMove",value:function(e){this.mouseX=e.clientX,this.mouseY=e.clientY}},{key:"handleClick",value:function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.target&&this.options&&this.options.onClick&&this.options.onClick(this.target)}},{key:"tick",value:function(){this.updateTarget(),this.tickReq=window.requestAnimationFrame(this.tick)}},{key:"updateTarget",value:function(){if(void 0!==this.mouseX&&void 0!==this.mouseY){this.overlay.ignoreCursor();var e=document.elementFromPoint(this.mouseX,this.mouseY);if(this.overlay.captureCursor(),e&&e!==this.target){if(this.options&&this.options.elementFilter&&!this.options.elementFilter(e))return this.target=void 0,void this.overlay.setBounds({x:0,y:0,width:0,height:0});this.target=e;var t,n,o=(n=(t=e).getBoundingClientRect(),{x:window.pageXOffset+n.left,y:window.pageYOffset+n.top,width:t.offsetWidth,height:t.offsetHeight});this.overlay.setBounds(o),this.options&&this.options.onHover&&this.options.onHover(e)}}}}]),e}();const Uf=_f;function Hf(e){return Hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hf(e)}function zf(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Vf(o.key),o)}}function qf(e,t,n){return t&&zf(e.prototype,t),n&&zf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wf(e,t,n){return(t=Vf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vf(e){var t=function(e,t){if("object"!=Hf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Hf(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hf(t)?t:String(t)}const Gf=qf((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wf(this,"picker",null),Wf(this,"onElementPicked",null),Wf(this,"stopPicker",(function(){if(t.picker)return t.picker.stop(),void(t.picker=null)})),Wf(this,"startPicker",(function(){t.stopPicker();var e=t;t.picker=new Uf({style:{borderColor:"#2142E7",background:"transparent",borderWidth:"4px",borderRadius:"5px"}}),t.picker.start({useShadowDOM:!1,onClick:function(t){try{var n,o=t.getAttribute("data-gleap-tour");n=o?'[data-gleap-tour="'.concat(o,'"]'):Rf(t),e.onElementPicked&&e.onElementPicked(n)}catch(r){console.error("Error while getting unique selector",r)}},elementFilter:function(e){return!e.classList.contains("gleap-admin-collapse-ui")&&!e.closest(".gleap-admin-collapse-ui")}})})),Wf(this,"setMode",(function(e){t.mode=e,"navigate"===e&&t.stopPicker(),"picker"===e&&t.startPicker()}))}));function Yf(e){return Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(e)}function Xf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Kf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xf(Object(n),!0).forEach((function(t){Zf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jf(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,$f(o.key),o)}}function Zf(e,t,n){return(t=$f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $f(e){var t=function(e,t){if("object"!=Yf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Yf(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yf(t)?t:String(t)}var Qf=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Zf(this,"libraryInstance",null),Zf(this,"lastUrl",void 0),Zf(this,"injectedFrame",!1),Zf(this,"gleapFrameContainer",null),Zf(this,"gleapCollapseUI",null),Zf(this,"injectedCollapseUI",!1),Zf(this,"gleapFrame",null),Zf(this,"configData",null),Zf(this,"adminHelper",null),Zf(this,"status","navigate"),Zf(this,"initialized",!1),Zf(this,"toggleCollapseUI",(function(){var e="gleap-admin-collapse-ui-active",n="gleap-admin-frame-container-active",o=function(e,t){return e&&e.classList.contains(t)};(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])||o(t.gleapCollapseUI,e)&&o(t.gleapFrameContainer,n))&&(t.gleapCollapseUI&&t.gleapCollapseUI.classList.toggle(e),t.gleapFrameContainer&&t.gleapFrameContainer.classList.toggle(n))})),Zf(this,"injectCollapseUI",(function(){if(!t.injectedCollapseUI){t.injectedCollapseUI=!0;var e=document.createElement("div");e.className="gleap-admin-collapse-ui",e.innerHTML='<div class="gleap-admin-collapse-ui-icon">\n    '.concat(p("arrowdown"),"\n    </div>"),document.body.appendChild(e),t.gleapCollapseUI=e,e.addEventListener("click",(function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t.toggleCollapseUI()}))}})),Zf(this,"injectFrame",(function(){var e;if(!t.injectedFrame){t.injectedFrame=!0;var n=document.createElement("div");n.className="gleap-admin-frame-container",n.innerHTML='<iframe src="https://app.gleap.io/'.concat("tooltips"===(null==t||null===(e=t.configData)||void 0===e?void 0:e.type)?"tooltipbuilder":"producttourbuilder",'" class="gleap-admin-frame" scrolling="no" title="Gleap Admin Window" allow="autoplay; encrypted-media; fullscreen;" frameborder="0"></iframe>'),document.body.appendChild(n),t.gleapFrameContainer=n,t.gleapFrame=document.querySelector(".gleap-admin-frame")}}))}var t,n,o;return t=e,o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"logCurrentPage",value:function(){var e=window.location.href;e&&e!==this.lastUrl&&(this.lastUrl=e,this.sendMessageToTourBuilder({name:"page-changed",data:{page:e}}))}},{key:"startPageListener",value:function(){var e=this;setInterval((function(){e.logCurrentPage()}),1e3)}},{key:"initAdminHelper",value:function(){var e=this;this.initialized=!0,Tg.getInstance().disable(),Jh.getInstance().disable(),of.getInstance().disable(),Zg.close(),Zg.showFeedbackButton(!1),e.adminHelper=new Gf;try{e.adminHelper.onElementPicked=function(t){e.toggleCollapseUI(!0),e.sendMessageToTourBuilder({name:"element-picked",data:{selector:t}})}}catch(t){console.log(t)}e.injectFrame(),e.injectCollapseUI(),e.setFrameHeight("loading")}},{key:"setFrameHeight",value:function(e){if(this.gleapFrameContainer){var t="";t="picker"===e||"navigate"===e?"65px":"editor"===e?"100vh":"0px",this.gleapFrameContainer.style.height=t}}},{key:"start",value:function(){var e=this;if("undefined"!=typeof window&&!window.gleapAdminDisabled){var t=this;window.addEventListener("message",(function(n){if("https://app.gleap.io"===n.origin)try{var o=JSON.parse(n.data);if("admin"===o.type&&("load"===o.name&&(t.configData=o.data,t.initAdminHelper()),"smartlink-search-result"===o.name&&e.sendMessageToTourBuilder({name:"smartlink-search-result",data:o.data}),"translate-complete"===o.name&&e.sendMessageToTourBuilder({name:"translate-complete",data:o.data})),"tourbuilder"===o.type){var r;if("loaddata"===o.name&&e.sendMessageToTourBuilder({name:"data",data:Kf(Kf({},t.configData),{},{currentPage:window.location.href})}),"highlight-element"===o.name&&(document.querySelectorAll(".gleap-admin-highlight").forEach((function(e){e.classList.remove("gleap-admin-highlight")})),null!=o&&null!==(r=o.data)&&void 0!==r&&r.selector)){var i,a=document.querySelector(null==o||null===(i=o.data)||void 0===i?void 0:i.selector);a&&a.classList.add("gleap-admin-highlight")}if("smartlink-search"===o.name&&e.sendMessage({name:"smartlink-search",data:o.data}),"product-tour-started"===o.name&&e.sendMessage({name:"product-tour-started",data:o.data}),"translate"===o.name&&e.sendMessage({name:"translate",data:o.data}),"save"===o.name&&e.sendMessage({name:"save",data:o.data}),"update-steps"===o.name&&e.sendMessage({name:"update-steps",data:o.data}),"click"===o.name)try{document.querySelector(o.data.selector).click()}catch(s){console.log(s)}"status-changed"===o.name&&(t.status=o.data,e.setFrameHeight(t.status),t.adminHelper.stopPicker(),"picker"===t.status&&t.adminHelper.startPicker())}}catch(l){}})),this.sendMessage({name:"init"}),this.startPageListener()}}},{key:"sendMessage",value:function(e){try{window&&window.opener&&window.opener.postMessage(JSON.stringify(Kf(Kf({},e),{},{type:"admin"})),"*")}catch(t){}}},{key:"sendMessageToTourBuilder",value:function(e){try{this.gleapFrame&&this.gleapFrame.contentWindow&&this.gleapFrame.contentWindow.postMessage(JSON.stringify(Kf(Kf({},e),{},{type:"tourbuilder"})),"*")}catch(t){}}}])&&Jf(t.prototype,n),o&&Jf(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function eg(e){return eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(e)}function tg(e){return function(e){if(Array.isArray(e))return ng(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ng(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ng(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ng(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function og(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function rg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?og(Object(n),!0).forEach((function(t){ig(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):og(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ig(e,t,n){return t=function(e){var t=function(e,t){if("object"!=eg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=eg(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eg(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Zf(Qf,"instance",void 0);var ag=function(){var e={};function t(){e=rg({animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000"},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function n(t){return t?e[t]:e}function o(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function r(e){var t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return e.flatMap((function(e){var n=e.matches(t),o=Array.from(e.querySelectorAll(t));return[].concat(tg(n?[e]:[]),o)})).filter((function(e){return"none"!==getComputedStyle(e).pointerEvents&&function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(e)}))}function i(e){if(e&&!function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(e)){var t=n("smoothScroll");e.scrollIntoView({behavior:!t||a(e)?"auto":"smooth",inline:"center",block:"center"})}}function a(e){if(e&&e.parentElement){var t=e.parentElement;return t.scrollHeight>t.clientHeight}}var s={};function l(e,t){s[e]=t}function c(e){return e?s[e]:s}function u(){s={}}var d={};function p(e,t){d[e]=t}function h(e){var t;null==(t=d[e])||t.call(d)}function f(e){if(e){var t=e.getBoundingClientRect(),n={x:t.x,y:t.y,width:t.width,height:t.height};l("__activeStagePosition",n),m(n)}}function g(e){var t=function(e){var t=window.innerWidth,o=window.innerHeight,r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("gleap-tour-overlay","gleap-tour-overlay-animated"),r.setAttribute("viewBox","0 0 ".concat(t," ").concat(o)),r.setAttribute("xmlSpace","preserve"),r.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1"),r.setAttribute("preserveAspectRatio","xMinYMin slice"),r.style.fillRule="evenodd",r.style.clipRule="evenodd",r.style.strokeLinejoin="round",r.style.strokeMiterlimit="2",r.style.zIndex="10000",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%";var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",v(e)),i.style.fill=n("overlayColor")||"rgb(0,0,0)",i.style.opacity="".concat(n("overlayOpacity")),i.style.pointerEvents="auto",i.style.cursor="auto",r.appendChild(i),r}(e);document.body.appendChild(t),S(t,(function(e){"path"===e.target.tagName&&h("overlayClick")})),l("__overlaySvg",t)}function m(e){var t=c("__overlaySvg");if(t){var n=t.firstElementChild;if("path"!==(null==n?void 0:n.tagName))throw new Error("no path element found in stage svg");n.setAttribute("d",v(e))}else g(e)}function v(e){var t=window.innerWidth,o=window.innerHeight,r=n("stagePadding")||0,i=n("stageRadius")||0,a=e.width+2*r,s=e.height+2*r,l=Math.min(i,a/2,s/2),c=Math.floor(Math.max(l,0)),u=e.x-r+c,d=e.y-r,p=a-2*c,h=s-2*c;return"M".concat(t,",0L0,0L0,").concat(o,"L").concat(t,",").concat(o,"L").concat(t,",0Z\n    M").concat(u,",").concat(d," h").concat(p," a").concat(c,",").concat(c," 0 0 1 ").concat(c,",").concat(c," v").concat(h," a").concat(c,",").concat(c," 0 0 1 -").concat(c,",").concat(c," h-").concat(p," a").concat(c,",").concat(c," 0 0 1 -").concat(c,",-").concat(c," v-").concat(h," a").concat(c,",").concat(c," 0 0 1 ").concat(c,",-").concat(c," z")}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,r=e.element,a=r;if("string"==typeof a)try{a=document.querySelector(r)}catch(u){var s=r.replace(/(#[^#\s]+)/g,(function(e){return e.replace(/:/g,"\\:")}));a=document.querySelector(s)}if(r&&!a&&t>=0)setTimeout((function(){C(),y(e,t-100)}),100);else{if(!a&&("INPUT"===e.mode||"CLICK"===e.mode))return n("onElementNotFound")(e);a||(a=function(){var e=document.getElementById("gleap-tour-dummy-element");if(e)return e;var t=document.createElement("div");return t.id="gleap-tour-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}()),function(e,t){var r,a,s=400,u=Date.now(),d=c("__activeStep"),p=c("__activeElement")||e,h=!p||p===e,g="gleap-tour-dummy-element"===e.id,v="gleap-tour-dummy-element"===p.id,y=n("animate"),b=t.onHighlightStarted||n("onHighlightStarted"),w=(null==t?void 0:t.onHighlighted)||n("onHighlighted"),k=(null==d?void 0:d.onDeselected)||n("onDeselected"),x=n(),S=c();!h&&k&&k(v?void 0:p,d,{config:x,state:S});b&&b(g?void 0:e,t,{config:x,state:S});var E=!h&&y,T=!1;C(),l("previousStep",d),l("previousElement",p),l("activeStep",t),l("activeElement",e);var L=function r(){if(c("__transitionCallback")===r){var i=Date.now()-u,a=s-i<=s/2;t.popover&&a&&!T&&E&&(I(e,t),T=!0),n("animate")&&i<s?function(e,t,n,r){var i=c("__activeStagePosition"),a=i||n.getBoundingClientRect(),s=r.getBoundingClientRect();m(i={x:o(e,a.x,s.x-a.x,t),y:o(e,a.y,s.y-a.y,t),width:o(e,a.width,s.width-a.width,t),height:o(e,a.height,s.height-a.height,t)}),l("__activeStagePosition",i)}(i,s,p,e):(f(e),w&&w(g?void 0:e,t,{config:n(),state:c()}),l("__transitionCallback",void 0),l("__previousStep",d),l("__previousElement",p),l("__activeStep",t),l("__activeElement",e)),window.requestAnimationFrame(r)}};l("__transitionCallback",L),window.requestAnimationFrame(L),i(e),!E&&t.popover&&I(e,t);p.classList.remove("gleap-tour-active-element","gleap-tour-no-interaction"),p.removeAttribute("aria-haspopup"),p.removeAttribute("aria-expanded"),p.removeAttribute("aria-controls"),null!==(r=null!==(a=t.disableActiveInteraction)&&void 0!==a?a:n("disableActiveInteraction"))&&void 0!==r&&r&&e.classList.add("gleap-tour-no-interaction");e.classList.add("gleap-tour-active-element"),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls","gleap-tour-popover-content")}(a,e)}}function b(){var e=c("__activeElement"),t=c("__activeStep");e&&(f(e),function(){var e=c("__activeStagePosition"),t=c("__overlaySvg");if(e)if(t){var n=window.innerWidth,o=window.innerHeight;t.setAttribute("viewBox","0 0 ".concat(n," ").concat(o))}else console.warn("No stage svg found.")}(),O(e,t))}function w(){var e=c("__resizeTimeout");e&&window.cancelAnimationFrame(e),l("__resizeTimeout",window.requestAnimationFrame(b))}function k(e){var t;if(c("isInitialized")&&("Tab"===e.key||9===e.keyCode)){var n=c("__activeElement"),o=null==(t=c("popover"))?void 0:t.wrapper,i=r([].concat(tg(o?[o]:[]),tg(n?[n]:[]))),a=i[0],s=i[i.length-1];if(e.preventDefault(),e.shiftKey){var l=i[i.indexOf(document.activeElement)-1]||s;null==l||l.focus()}else{var u=i[i.indexOf(document.activeElement)+1]||a;null==u||u.focus()}}}function x(e){var t;(null==(t=n("allowKeyboardControl"))||t)&&("Escape"===e.key?h("escapePress"):"ArrowRight"===e.key?h("arrowRightPress"):"ArrowLeft"===e.key&&h("arrowLeftPress"))}function S(e,t,n){var o=function(t,o){var r=t.target;e.contains(r)&&(n&&!n(r)||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),null==o||o(t))},r=!0;document.addEventListener("pointerdown",o,r),document.addEventListener("mousedown",o,r),document.addEventListener("pointerup",o,r),document.addEventListener("mouseup",o,r),document.addEventListener("click",(function(e){o(e,t)}),r)}function C(){var e=c("popover");e&&(e.wrapper.style.display="none")}function I(e,t){var o,a,s=c("popover");s&&document.body.removeChild(s.wrapper),s=function(){var e=document.createElement("div");e.classList.add("gleap-tour-popover");var t=document.createElement("div");t.classList.add("gleap-tour-popover-arrow");var n=document.createElement("div");n.id="gleap-tour-popover-title",n.classList.add("gleap-tour-popover-title"),n.style.display="none",n.innerText="Popover Title";var o=document.createElement("div");o.id="gleap-tour-popover-description",o.classList.add("gleap-tour-popover-description"),o.style.display="none",o.innerText="Popover description is here";var r=document.createElement("button");r.type="button",r.classList.add("gleap-tour-popover-close-btn"),r.setAttribute("aria-label","Close"),r.innerHTML="&times;";var i=document.createElement("div");i.classList.add("gleap-tour-popover-footer");var a=document.createElement("span");a.classList.add("gleap-tour-popover-progress-text"),a.innerText="";var s=document.createElement("span");s.classList.add("gleap-tour-popover-navigation-btns");var l=document.createElement("button");l.type="button",l.classList.add("gleap-tour-popover-prev-btn"),l.innerHTML="&larr; Previous";var c=document.createElement("button");return c.type="button",c.classList.add("gleap-tour-popover-next-btn"),c.innerHTML="Next &rarr;",s.appendChild(l),s.appendChild(c),i.appendChild(a),i.appendChild(s),e.appendChild(r),e.appendChild(t),e.appendChild(n),e.appendChild(o),e.appendChild(i),{wrapper:e,arrow:t,title:n,description:o,footer:i,previousButton:l,nextButton:c,closeButton:r,footerButtons:s,progress:a}}(),document.body.appendChild(s.wrapper);var u=t.popover||{},d=u.title,p=u.description,f=u.showButtons,g=u.disableButtons,m=u.showProgress,v=u.nextBtnText,y=void 0===v?n("nextBtnText")||"Next":v,b=u.prevBtnText,w=void 0===b?n("prevBtnText")||"Previous":b,k=u.progressText,x=void 0===k?n("progressText")||"{current} of {total}":k;s.nextButton.innerHTML=y,s.previousButton.innerHTML=w,s.progress.innerHTML=x,d?(s.title.innerHTML=d,s.title.style.display="block"):s.title.style.display="none",p?(s.description.innerHTML=p,s.description.style.display="block"):s.description.style.display="none";var C=f||n("showButtons"),I=m||n("showProgress")||!1,E=(null==C?void 0:C.includes("next"))||(null==C?void 0:C.includes("previous"))||I;s.closeButton.style.display=C.includes("close")?"block":"none",E?(s.footer.style.display="flex",s.progress.style.display=I?"block":"none",s.nextButton.style.display=C.includes("next")?"block":"none",s.previousButton.style.display=C.includes("previous")?"block":"none"):s.footer.style.display="none";var T=g||n("disableButtons")||[];(null==T?void 0:T.includes("next"))&&(s.nextButton.disabled=!0,s.nextButton.classList.add("gleap-tour-popover-btn-disabled")),(null==T?void 0:T.includes("previous"))&&(s.previousButton.disabled=!0,s.previousButton.classList.add("gleap-tour-popover-btn-disabled")),(null==T?void 0:T.includes("close"))&&(s.closeButton.disabled=!0,s.closeButton.classList.add("gleap-tour-popover-btn-disabled"));var L=s.wrapper;L.style.display="block",L.style.left="",L.style.top="",L.style.bottom="",L.style.right="",L.id="gleap-tour-popover-content",L.setAttribute("role","dialog"),L.setAttribute("aria-labelledby","gleap-tour-popover-title"),L.setAttribute("aria-describedby","gleap-tour-popover-description"),s.arrow.className="gleap-tour-popover-arrow";var A=(null==(o=t.popover)?void 0:o.popoverClass)||n("popoverClass")||"";L.className="gleap-tour-popover ".concat(A).trim(),S(s.wrapper,(function(o){var r,i,a,s=o.target,l=(null==(r=t.popover)?void 0:r.onNextClick)||n("onNextClick"),u=(null==(i=t.popover)?void 0:i.onPrevClick)||n("onPrevClick"),d=(null==(a=t.popover)?void 0:a.onCloseClick)||n("onCloseClick");return s.classList.contains("gleap-tour-popover-next-btn")?l?l(e,t,{config:n(),state:c()}):h("nextClick"):s.classList.contains("gleap-tour-popover-prev-btn")?u?u(e,t,{config:n(),state:c()}):h("prevClick"):s.classList.contains("gleap-tour-popover-close-btn")?d?d(e,t,{config:n(),state:c()}):h("closeClick"):void 0}),(function(e){return!(null==s?void 0:s.description.contains(e))&&!(null==s?void 0:s.title.contains(e))&&"string"==typeof e.className&&e.className.includes("gleap-tour-popover")})),l("popover",s);var M=(null==(a=t.popover)?void 0:a.onPopoverRender)||n("onPopoverRender");M&&M(s,{config:n(),state:c()}),O(e,t),i(L);var R=e.classList.contains("gleap-tour-dummy-element"),P=r([L].concat(tg(R?[]:[e])));P.length>0&&P[0].focus()}function E(){var e=c("popover");if(null==e?void 0:e.wrapper){var t=e.wrapper.getBoundingClientRect(),o=n("stagePadding")||0,r=n("popoverOffset")||0;return{width:t.width+o+r,height:t.height+o+r,realWidth:t.width,realHeight:t.height}}}function T(e,t){var n=t.elementDimensions,o=t.popoverDimensions,r=t.popoverPadding,i=t.popoverArrowDimensions;return"start"===e?Math.max(Math.min(n.top-r,window.innerHeight-o.realHeight-i.width),i.width):"end"===e?Math.max(Math.min(n.top-(null==o?void 0:o.realHeight)+n.height+r,window.innerHeight-(null==o?void 0:o.realHeight)-i.width),i.width):"center"===e?Math.max(Math.min(n.top+n.height/2-(null==o?void 0:o.realHeight)/2,window.innerHeight-(null==o?void 0:o.realHeight)-i.width),i.width):0}function L(e,t){var n=t.elementDimensions,o=t.popoverDimensions,r=t.popoverPadding,i=t.popoverArrowDimensions;return"start"===e?Math.max(Math.min(n.left-r,window.innerWidth-o.realWidth-i.width),i.width):"end"===e?Math.max(Math.min(n.left-(null==o?void 0:o.realWidth)+n.width+r,window.innerWidth-(null==o?void 0:o.realWidth)-i.width),i.width):"center"===e?Math.max(Math.min(n.left+n.width/2-(null==o?void 0:o.realWidth)/2,window.innerWidth-(null==o?void 0:o.realWidth)-i.width),i.width):0}function O(e,t){var o=c("popover");if(o){var r=(null==t?void 0:t.popover)||{},i=r.align,a=void 0===i?"start":i,s=r.side,l=void 0===s?"left":s,u=a,d="gleap-tour-dummy-element"===e.id?"over":l,p=n("stagePadding")||0,h=E(),f=o.arrow.getBoundingClientRect(),g=e.getBoundingClientRect(),m=g.top-h.height,v=m>=0,y=window.innerHeight-(g.bottom+h.height),b=y>=0,w=g.left-h.width,k=w>=0,x=window.innerWidth-(g.right+h.width),S=x>=0,C=!(v||b||k||S),I=d;if("top"===d&&v?S=k=b=!1:"bottom"===d&&b?S=k=v=!1:"left"===d&&k?S=v=b=!1:"right"===d&&S&&(k=v=b=!1),"over"===d){var O=window.innerWidth/2-h.realWidth/2,A=window.innerHeight/2-h.realHeight/2;o.wrapper.style.left="".concat(O,"px"),o.wrapper.style.right="auto",o.wrapper.style.top="".concat(A,"px"),o.wrapper.style.bottom="auto"}else if(C){var M=window.innerWidth/2-(null==h?void 0:h.realWidth)/2;o.wrapper.style.left="".concat(M,"px"),o.wrapper.style.right="auto",o.wrapper.style.bottom="".concat(10,"px"),o.wrapper.style.top="auto"}else if(k){var R=Math.min(w,window.innerWidth-(null==h?void 0:h.realWidth)-f.width),P=T(u,{elementDimensions:g,popoverDimensions:h,popoverPadding:p,popoverArrowDimensions:f});o.wrapper.style.left="".concat(R,"px"),o.wrapper.style.top="".concat(P,"px"),o.wrapper.style.bottom="auto",o.wrapper.style.right="auto",I="left"}else if(S){var D=Math.min(x,window.innerWidth-(null==h?void 0:h.realWidth)-f.width),N=T(u,{elementDimensions:g,popoverDimensions:h,popoverPadding:p,popoverArrowDimensions:f});o.wrapper.style.right="".concat(D,"px"),o.wrapper.style.top="".concat(N,"px"),o.wrapper.style.bottom="auto",o.wrapper.style.left="auto",I="right"}else if(v){var j=Math.min(m,window.innerHeight-h.realHeight-f.width),F=L(u,{elementDimensions:g,popoverDimensions:h,popoverPadding:p,popoverArrowDimensions:f});o.wrapper.style.top="".concat(j,"px"),o.wrapper.style.left="".concat(F,"px"),o.wrapper.style.bottom="auto",o.wrapper.style.right="auto",I="top"}else if(b){var B=Math.min(y,window.innerHeight-(null==h?void 0:h.realHeight)-f.width),_=L(u,{elementDimensions:g,popoverDimensions:h,popoverPadding:p,popoverArrowDimensions:f});o.wrapper.style.left="".concat(_,"px"),o.wrapper.style.bottom="".concat(B,"px"),o.wrapper.style.top="auto",o.wrapper.style.right="auto",I="bottom"}C?o.arrow.classList.add("gleap-tour-popover-arrow-none"):function(e,t,n){var o=c("popover");if(!o)return;var r=n.getBoundingClientRect(),i=E(),a=o.arrow,s=i.width,l=window.innerWidth,u=r.width,d=r.left,p=i.height,h=window.innerHeight,f=r.top,g=r.height;a.className="gleap-tour-popover-arrow";var m=t,v=e;"top"===t?(d+u<=0?(m="right",v="end"):d+u-s<=0&&(m="top",v="start"),d>=l?(m="left",v="end"):d+s>=l&&(m="top",v="end")):"bottom"===t?(d+u<=0?(m="right",v="start"):d+u-s<=0&&(m="bottom",v="start"),d>=l?(m="left",v="start"):d+s>=l&&(m="bottom",v="end")):"left"===t?(f+g<=0?(m="bottom",v="end"):f+g-p<=0&&(m="left",v="start"),f>=h?(m="top",v="end"):f+p>=h&&(m="left",v="end")):"right"===t&&(f+g<=0?(m="bottom",v="start"):f+g-p<=0&&(m="right",v="start"),f>=h?(m="top",v="start"):f+p>=h&&(m="right",v="end"));m?(a.classList.add("gleap-tour-popover-arrow-side-".concat(m)),a.classList.add("gleap-tour-popover-arrow-align-".concat(v))):a.classList.add("gleap-tour-popover-arrow-none")}(u,I,e)}}return function(){function e(){n("allowClose")&&f()}function o(){var e=c("activeIndex"),t=n("steps")||[];if(void 0!==e){var o=e+1;t[o]?h(o):f()}}function r(){var e=c("activeIndex"),t=n("steps")||[];if(void 0!==e){var o=e-1;t[o]?h(o):f()}}function i(){var e;if(!c("__transitionCallback")){var t=c("activeIndex"),o=c("__activeStep"),i=c("__activeElement");if("CLICK"!==o.mode)if(void 0!==t&&void 0!==o)if(void 0!==c("activeIndex")){var a=(null==(e=o.popover)?void 0:e.onPrevClick)||n("onPrevClick");if(a)return a(i,o,{config:n(),state:c()});r()}}}function a(){var e;if(!c("__transitionCallback")){var t=c("activeIndex"),r=c("__activeStep"),i=c("__activeElement");if("CLICK"!==r.mode&&void 0!==t&&void 0!==r){var a=(null==(e=r.popover)?void 0:e.onNextClick)||n("onNextClick");if(a)return a(i,r,{config:n(),state:c()});o()}}}function s(){c("isInitialized")||(l("isInitialized",!0),document.body.classList.add("gleap-tour-active",n("animate")?"gleap-tour-fade":"gleap-tour-simple"),window.addEventListener("keyup",x,!1),window.addEventListener("keydown",k,!1),window.addEventListener("resize",w),window.addEventListener("scroll",w),p("overlayClick",e),p("escapePress",e),p("arrowLeftPress",i),p("arrowRightPress",a))}function h(){var e,t,o,r,i,a,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,d=n("steps");if(!d)return console.error("No steps to drive through"),void f();if(d[u]){l("__activeOnDestroyed",document.activeElement),l("activeIndex",u);var p=d[u],g=d[u+1],m=d[u-1],v=(null==(e=p.popover)?void 0:e.doneBtnText)||n("doneBtnText")||"Done",b=n("allowClose"),w=void 0!==(null==(t=p.popover)?void 0:t.showProgress)?null==(o=p.popover)?void 0:o.showProgress:n("showProgress"),k=((null==(r=p.popover)?void 0:r.progressText)||n("progressText")||"{{current}} of {{total}}").replace("{{current}}","".concat(u+1)).replace("{{total}}","".concat(d.length)),x=(null==(i=p.popover)?void 0:i.showButtons)||n("showButtons"),S=["next","previous"].concat(tg(b?["close"]:[])).filter((function(e){return!(null==x?void 0:x.length)||x.includes(e)})),C=(null==(a=p.popover)?void 0:a.onNextClick)||n("onNextClick"),I=(null==(s=p.popover)?void 0:s.onPrevClick)||n("onPrevClick"),E=(null==(c=p.popover)?void 0:c.onCloseClick)||n("onCloseClick");y(rg(rg({},p),{},{popover:rg({showButtons:S,nextBtnText:g?void 0:v,disableButtons:tg(m?[]:["previous"]),showProgress:w,progressText:k,onNextClick:C||function(){g?h(u+1):f()},onPrevClick:I||function(){h(u-1)},onCloseClick:E||function(){f()}},(null==p?void 0:p.popover)||{})}))}else f()}function f(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=c("__activeElement"),o=c("__activeStep"),r=c("__activeOnDestroyed"),i=n("onDestroyStarted");if(e&&i){i(!t||"gleap-tour-dummy-element"===(null==t?void 0:t.id)?void 0:t,o,{config:n(),state:c()})}else{var a,s=(null==o?void 0:o.onDeselected)||n("onDeselected"),l=n("onDestroyed");if(document.body.classList.remove("gleap-tour-active","gleap-tour-fade","gleap-tour-simple"),window.removeEventListener("keyup",x),window.removeEventListener("resize",w),window.removeEventListener("scroll",w),function(){var e,t=c("popover");t&&(null==(e=t.wrapper.parentElement)||e.removeChild(t.wrapper))}(),function(){var e;null==(e=document.getElementById("gleap-tour-dummy-element"))||e.remove(),document.querySelectorAll(".gleap-tour-active-element").forEach((function(e){e.classList.remove("gleap-tour-active-element","gleap-tour-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")}))}(),(a=c("__overlaySvg"))&&a.remove(),d={},u(),t&&o){var p="gleap-tour-dummy-element"===t.id;s&&s(p?void 0:t,o,{config:n(),state:c()}),l&&l(p?void 0:t,o,{config:n(),state:c()})}r&&r.focus()}}return t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{isActive:function(){return c("isInitialized")||!1},refresh:w,drive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;s(),h(e)},setConfig:t,setSteps:function(e){u(),t(rg(rg({},n()),{},{steps:e}))},getConfig:n,getState:c,getActiveIndex:function(){return c("activeIndex")},isFirstStep:function(){return 0===c("activeIndex")},isLastStep:function(){var e=n("steps")||[],t=c("activeIndex");return void 0!==t&&t===e.length-1},getActiveStep:function(){return c("activeStep")},getActiveElement:function(){return c("activeElement")},getPreviousElement:function(){return c("previousElement")},getPreviousStep:function(){return c("previousStep")},moveNext:o,movePrevious:r,moveTo:function(e){(n("steps")||[])[e]?h(e):f()},hasNextStep:function(){var e=n("steps")||[],t=c("activeIndex");return void 0!==t&&e[t+1]},hasPreviousStep:function(){var e=n("steps")||[],t=c("activeIndex");return void 0!==t&&e[t-1]},highlight:function(e){s(),y(rg(rg({},e),{},{popover:e.popover?rg({showButtons:[],showProgress:!1,progressText:""},e.popover):void 0}))},destroy:function(){f(!1)}}}}();const sg=ag;function lg(e){return lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(e)}function cg(){cg=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new A(o||[]);return r(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",h="suspendedYield",f="executing",g="completed",m={};function v(){}function y(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&o.call(x,a)&&(w=x);var S=b.prototype=v.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(r,i,a,s){var l=d(e[r],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==lg(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function E(t,n,o){var r=p;return function(i,a){if(r===f)throw new Error("Generator is already running");if(r===g){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var l=T(s,o);if(l){if(l===m)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===p)throw r=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=f;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?g:h,c.arg===m)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=g,o.method="throw",o.arg=c.arg)}}}function T(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(lg(t)+" is not iterable")}return y.prototype=b,r(S,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},C(I.prototype),c(I.prototype,s,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new I(u(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=M,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:M(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),m}},t}function ug(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,pg(o.key),o)}}function dg(e,t,n){return(t=pg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pg(e){var t=function(e,t){if("object"!=lg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=lg(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lg(t)?t:String(t)}function hg(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(o,r)}var fg="gleap-tour-data",gg="copilot-pointer-container",mg="copilot-tour-styles",vg="copilot-joined-container";function yg(){var e;return e=cg().mark((function e(){var t;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof window){e.next=2;break}return e.abrupt("return");case 2:return t=new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAABCxAgAEABAAZGF0YQAAAAA="),e.prev=3,e.next=6,t.play();case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})),yg=function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){hg(i,o,r,a,s,"next",e)}function s(e){hg(i,o,r,a,s,"throw",e)}a(void 0)}))},yg.apply(this,arguments)}var bg=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dg(this,"productTourData",void 0),dg(this,"productTourId",void 0),dg(this,"currentActiveIndex",void 0),dg(this,"lastArrowPositionX",void 0),dg(this,"lastArrowPositionY",void 0),dg(this,"onCompleteCallback",void 0),dg(this,"audioMuted",!1),dg(this,"currentAudio",void 0),dg(this,"_pointerContainer",null),dg(this,"_scrollListeners",[]),dg(this,"_currentAnchor",null),dg(this,"_currentStep",null),dg(this,"_scrollDebounceTimer",null);var t=this;"undefined"!=typeof window&&(this._scrollListeners=[],this._currentAnchor=null,this._currentStep=null,this._scrollDebounceTimer=null,window.addEventListener("resize",(function(){if(t.productTourId&&t.currentActiveIndex>=0&&t.productTourData&&t.productTourData.steps){var e=t.productTourData.steps[t.currentActiveIndex];e&&e.selector&&""!==e.selector&&t.updatePointerPosition(document.querySelector(e.selector),e)}})))}var t,n,o;return t=e,n=[{key:"disable",value:function(){this.disabled=!0,this.cleanup()}},{key:"startWithConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;"undefined"!=typeof window&&(this.productTourId||this.disabled||(this.productTourId=e,this.productTourData=t,this.currentActiveIndex=0,this.onCompleteCallback=n,this.start()))}},{key:"storeUncompletedTour",value:function(){if("undefined"!=typeof window)if(this.productTourId&&this.productTourData)try{var e=JSON.parse(JSON.stringify({tourData:this.productTourData,tourId:this.productTourId}));e.tourData.steps=e.tourData.steps.slice(this.currentActiveIndex||0,e.tourData.steps.length),localStorage.setItem(fg,JSON.stringify(e))}catch(t){}else localStorage.removeItem(fg)}},{key:"attachScrollListeners",value:function(e,t){var n=this;if("undefined"!=typeof window&&e){var o=function(e){if("undefined"!=typeof window){for(var t=[],n=e.parentElement;n;){var o=window.getComputedStyle(n);("auto"===o.overflowY||"scroll"===o.overflowY)&&n.scrollHeight>n.clientHeight&&t.push(n),n=n.parentElement}return t}}(e);o.push(window),o.forEach((function(o){var r=function(){clearTimeout(n._scrollDebounceTimer),n._scrollDebounceTimer=setTimeout((function(){n.updatePointerPosition(e,t)}),150)};o.addEventListener("scroll",r,{passive:!0}),n._scrollListeners.push({el:o,handler:r})}))}}},{key:"removeScrollListeners",value:function(){"undefined"!=typeof window&&(this._scrollListeners&&this._scrollListeners.length>0&&(this._scrollListeners.forEach((function(e){var t=e.el,n=e.handler;t.removeEventListener("scroll",n)})),this._scrollListeners=[]),this._scrollDebounceTimer&&(clearTimeout(this._scrollDebounceTimer),this._scrollDebounceTimer=null))}},{key:"updatePointerPosition",value:function(e,t){var n,o=this;if("undefined"!=typeof window)try{var r=this._pointerContainer||document.getElementById(gg);if(!r)return;if(!e)return r.style.position="fixed",r.style.left="50%",r.style.top="50%",r.style.transform="translate(-50%, -50%)",function(e){if("undefined"!=typeof window){var t=e-window.innerHeight/2;window.scrollTo({top:t,behavior:"smooth"})}}(window.innerHeight/2),this.removeScrollListeners(),this._currentAnchor=null,void(this._currentStep=null);n=e,"undefined"!=typeof window&&n&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});var i=0;!function n(){if(function(e){if("undefined"!=typeof window){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth}}(e)||i>=20){var a=e.getBoundingClientRect(),s=a.left+a.width/2,l=a.top+a.height/2+10;r.style.position="fixed",r.style.left="".concat(s,"px"),r.style.top="".concat(l,"px"),r.style.transform="translate(-50%, -50%)";var c=350;c>window.innerWidth-40&&(c=window.innerWidth-40),s+c>window.innerWidth-20?r.classList.add("copilot-pointer-container-right"):r.classList.remove("copilot-pointer-container-right"),o._currentAnchor===e&&o._currentStep===t||(o.removeScrollListeners(),o._currentAnchor=e,o._currentStep=t,o.attachScrollListeners(e,t))}else i++,setTimeout(n,100)}()}catch(a){}}},{key:"cleanup",value:function(){var e=this;"undefined"!=typeof window&&(document.body.classList.add("gl-copilot-fade-out"),this.currentAudio&&this.currentAudio.pause(),setTimeout((function(){if(e._pointerContainer)e._pointerContainer.remove(),e._pointerContainer=null;else{var t=document.getElementById(gg);t&&t.remove()}var n=document.getElementById(vg);n&&n.remove();var o=document.getElementById(mg);o&&o.remove(),document.body.classList.remove("gl-copilot-fade-out")}),800),this.productTourId=void 0,this.productTourData=void 0,this.removeScrollListeners())}},{key:"toggleAudio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.audioMuted=e,this.currentAudio&&(this.currentAudio.muted=this.audioMuted),document.querySelector(".".concat(vg,"-mute")).innerHTML=p(this.audioMuted?"unmute":"mute")}},{key:"setupCopilotTour",value:function(){var e,t,n,o,r,i,a=this;if("undefined"!=typeof window){var s,l,c=null!==(e=null===(t=ht.getInstance().flowConfig)||void 0===t?void 0:t.color)&&void 0!==e?e:"#485BFF",u=d(c),h=document.getElementById(mg);h||((h=document.createElement("style")).id=mg,h.type="text/css",h.textContent="\n        #".concat(gg," {\n          position: absolute;\n          top: 0;\n          left: 0;\n          display: flex;\n          align-items: flex-start;\n          pointer-events: none;\n          z-index: 2147483610;\n          transition: all 0.5s ease;\n        }\n        .").concat(gg,"-clickmode {\n          cursor: pointer;\n          pointer-events: all !important;\n        }\n        .").concat(gg,"-clickmode #copilot-info-bubble-content {\n          display: flex !important;\n        }\n        .").concat(gg,"-clickmode svg {\n          display: none !important;\n        }\n        #").concat(gg," svg {\n          width: 20px;\n          height: auto;\n          fill: none;\n        }\n        #copilot-info-bubble {\n          position: relative;\n        }\n        #copilot-info-bubble-content-container {\n          position: absolute;\n          top: 0px;\n          left: 0px;\n          min-width: min(300px, 80vw);\n          display: flex;\n          flex-direction: column;\n          align-items: flex-start;\n        }\n        .").concat(gg,"-right #copilot-info-bubble-content-container {\n          left: auto !important;\n          right: 0px !important;\n          align-items: flex-end;\n        }\n        .").concat(gg,"-right .copilot-info-bubble-content {\n          margin-right: 5px;\n        }\n        .").concat(gg,"-right svg {\n          transform: scaleX(-1);\n        }\n        #copilot-info-bubble-content svg {\n          width: 16px;\n          height: 16px;\n          display: inline-block !important;\n          margin-left: 5px;\n        }\n        #copilot-info-bubble-content {\n          margin-top: 18px;\n          margin-left: 5px;\n          padding: 10px 15px;\n          border-radius: 20px;\n          background-color: black;\n          color: white;\n          font-family: Arial, sans-serif;\n          font-size: 14px;\n          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n          max-width: 100%;\n          white-space: normal;\n          overflow-wrap: break-word;\n          word-break: normal;\n          hyphens: none;\n        }\n        .").concat(gg,"-right #copilot-info-bubble-content {\n          margin-top: 30px;\n          margin-left: 0px;\n          margin-right: 5px;\n        }\n        .click-wave {\n          position: absolute;\n          width: 34px;\n          height: 34px;\n          border-radius: 50%;\n          background-color: rgba(0, 0, 0, 0.5);\n          pointer-events: none;\n          z-index: 2147483611;\n          animation: click-wave-animation 0.8s ease forwards;\n        }\n        @keyframes click-wave-animation {\n          0% {\n            transform: scale(0.2);\n            opacity: 1;\n          }\n          100% {\n            transform: scale(2);\n            opacity: 0;\n          }\n        }\n        @keyframes slideInFromTop {\n          0% {\n            transform: translateY(-100%);\n            opacity: 0;\n          }\n          100% {\n            transform: translateY(0);\n            opacity: 1;\n          }\n        }\n        .").concat(vg," {\n          position: fixed;\n          top: 20px;\n          right: 20px;\n          z-index: 2147483610;\n          background: #fff;\n          padding: 6px;\n          border-radius: 10px;\n          box-shadow: 0 0 20px 0 #C294F2;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          border: 1px solid rgba(192, 146, 242, 0.5);\n          animation: slideInFromTop 0.5s ease-out forwards;\n        }\n        .").concat(vg," span {\n          font-size: 13px;\n          color: #000;\n          font-family: sans-serif;\n        }\n        .").concat(vg,"-avatar {\n          width: 24px;\n          height: 24px;\n          flex-shrink: 0;\n          border-radius: 6px;\n        }\n        .").concat(vg,"-mute {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        .").concat(vg,"-mute svg {\n          width: 20px;\n          height: auto;\n          cursor: pointer;\n          animation: pulsate 2s infinite;\n        }\n        .").concat(vg,"-mute svg:hover {\n          opacity: 0.8;\n        }\n        .").concat(vg,"-dismiss {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          padding-right: 3px;\n        }\n        .").concat(vg,"-dismiss svg {\n          width: 15px;\n          height: auto;\n          cursor: pointer;\n        }\n        .").concat(vg,"-dismiss svg:hover {\n          opacity: 0.8;\n        }\n        @keyframes pulsate {\n          0% {\n            transform: scale(1);\n            opacity: 1;\n          }\n          50% {\n            transform: scale(1.1);\n            opacity: 0.8;\n          }\n          100% {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n        @keyframes glCoFadeIn {\n          0% {\n            opacity: 0;\n          }\n          100% {\n            opacity: 1;\n          }\n        }\n        @keyframes glCoFadeOut {\n          0% {\n            opacity: 1;\n          }\n          100% {\n            opacity: 0;\n          }\n        }\n\n        .gleap-audio-unmute-modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100vw;\n          height: 100vh;\n          background-color: rgba(0, 0, 0, 0.5);\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          z-index: 2147483620;\n        }\n\n        .gleap-audio-unmute-modal {\n          background-color: #fff;\n          padding: 20px;\n          border-radius: 8px;\n          box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n          text-align: center;\n          max-width: 90%;\n          width: 400px;\n        }\n\n        .gleap-audio-unmute-modal p {\n          margin-bottom: 20px;\n          font-size: 16px;\n          line-height: 22px;\n          font-weight: normal;\n        }\n\n        .gleap-audio-unmute-button {\n          background: ").concat(c,";\n          color: ").concat(u,";\n          outline: none;\n          border: none;\n          padding: 10px 14px;\n          border-radius: 12px;\n          font-size: 14px;\n          font-weight: bold;\n          cursor: pointer;\n        }\n\n        .gleap-audio-unmute-button:hover {\n          opacity: 0.8;\n        }\n\n        .gleap-tour-continue-button {\n          color: ").concat(c,";\n          text-decoration: none;\n          cursor: pointer;\n          font-size: 14px;\n          font-weight: bold;\n          border: none;\n          background: none;\n          padding: 0;\n          margin: 0;\n          margin-left: 20px;\n        }\n\n        .gleap-tour-continue-button:hover {\n          opacity: 0.8;\n        }\n\n        body.gl-copilot-fade-out::before,\n        body.gl-copilot-fade-out::after,\n        body.gl-copilot-fade-out #").concat(vg," {\n          animation: glCoFadeOut 0.8s ease-out forwards;\n        }\n        ").concat(null===(s=null===(l=this.productTourData)||void 0===l?void 0:l.playVoice)||void 0===s||s?"":"\n          .".concat(vg,"-mute {\n            display: none;\n          }\n        "),"\n        ").concat(this.productTourData.gradient?'body::before {\n          content: "";\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100vw;\n          height: 100vh;\n          pointer-events: all;\n          z-index: 2147483609;\n          box-sizing: border-box;\n          border: 18px solid transparent;\n          filter: blur(25px);\n          border-image-slice: 1;\n          border-image-source: linear-gradient(45deg, #ED5587, #FBE6A9, #a6e3f8, #C294F2);\n          animation: glCoFadeIn 1.5s ease-out forwards;\n        }\n  \n        body::after {\n          content: "";\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100vw;\n          height: 100vh;\n          pointer-events: all;\n          z-index: 2147483609;\n          opacity: 0.5;\n          box-sizing: border-box;\n          border: 3px solid transparent;\n          border-image-slice: 1;\n          border-image-source: linear-gradient(45deg, #ED5587, #FBE6A9, #a6e3f8, #C294F2);\n          animation: glCoFadeIn 1.5s ease-out forwards;\n        }':'body::after {\n          content: "";\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100vw;\n          height: 100vh;\n          pointer-events: all;\n          z-index: 2147483609;\n          opacity: 0;\n        }',"\n      "),document.head.appendChild(h));var f=document.createElement("div");f.id=gg,f.style.opacity=0,this._pointerContainer=f;var g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("viewBox","0 0 380 476"),g.innerHTML='<path d="M352.595 268.315L352.581 268.302L352.566 268.29L78.6092 24.7278C71.6245 18.433 62.5487 15 53.2 15C32.1157 15 15 32.1157 15 53.2V424C15 444.34 31.4714 461 52 461C62.6797 461 72.8089 456.467 79.8863 448.38C79.8871 448.379 79.8879 448.378 79.8886 448.378L180.804 333.1H327.9C348.384 333.1 365 316.484 365 296C365 285.404 360.46 275.344 352.595 268.315Z" fill="black" stroke="white" stroke-width="30"/>';var m=document.createElement("div");m.id="copilot-info-bubble",m.innerHTML="<div id='copilot-info-bubble-content-container'><div id='copilot-info-bubble-content'></div></div>";var v=document.createElement("div");v.id=vg,v.classList.add(vg),v.innerHTML='\n      <img class="'.concat(vg,'-avatar" src="').concat(null===(n=this.productTourData)||void 0===n?void 0:n.kaiAvatar,'" />\n      <span>').concat(null===(o=this.productTourData)||void 0===o?void 0:o.kaiSlug,'</span>\n      <div class="').concat(vg,'-mute">\n        ').concat(p(this.audioMuted?"unmute":"mute"),"\n      </div>\n      ").concat(null!==(r=this.productTourData)&&void 0!==r&&r.allowClose?'<div class="'.concat(vg,'-dismiss">\n               ').concat(p("dismiss"),"\n             </div>"):"","\n    "),document.body.appendChild(v),document.querySelector(".".concat(vg,"-mute")).addEventListener("click",(function(){a.toggleAudio(!a.audioMuted)})),null!==(i=this.productTourData)&&void 0!==i&&i.allowClose&&document.querySelector(".".concat(vg,"-dismiss")).addEventListener("click",(function(){a.completeTour(!1)})),f.appendChild(g),f.appendChild(m),document.body.appendChild(f)}}},{key:"start",value:function(){var e=this;if("undefined"!=typeof window&&!this.disabled){var t=this.productTourData;t&&function(){return yg.apply(this,arguments)}().then((function(n){e.audioMuted=!n,e.setupCopilotTour(),e.audioMuted&&null!=t&&t.showUnmuteModal?e.showAudioUnmuteModal():setTimeout((function(){e.renderNextStep()}),1500)}))}}},{key:"showAudioUnmuteModal",value:function(){var e,t,n,o=this,r=document.createElement("div");r.classList.add("gleap-audio-unmute-modal-overlay");var i=document.createElement("div");i.classList.add("gleap-audio-unmute-modal");var a=document.createElement("p");a.textContent=null===(e=this.productTourData)||void 0===e?void 0:e.unmuteModalTitle,i.appendChild(a);var s=document.createElement("button");s.classList.add("gleap-audio-unmute-button"),s.textContent=null===(t=this.productTourData)||void 0===t?void 0:t.unmuteModalButton,s.addEventListener("click",(function(){o.toggleAudio(!1),r.parentNode&&r.parentNode.removeChild(r),setTimeout((function(){o.renderNextStep()}),1e3)})),i.appendChild(s);var l=document.createElement("button");l.classList.add("gleap-tour-continue-button"),l.textContent=null===(n=this.productTourData)||void 0===n?void 0:n.unmuteModalContinue,l.addEventListener("click",(function(){r.parentNode&&r.parentNode.removeChild(r),setTimeout((function(){o.renderNextStep()}),1e3)})),i.appendChild(l),r.appendChild(i),document.body.appendChild(r)}},{key:"completeTour",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];"undefined"!=typeof window&&(this.cleanup(),this.onCompleteCallback&&this.onCompleteCallback(e))}},{key:"renderNextStep",value:function(){var e=this;if("undefined"!=typeof window&&!this.disabled){var t=this,n=this.productTourData.steps;if(this.currentActiveIndex>=n.length)setTimeout((function(){e.completeTour()}),500);else{var o=n[this.currentActiveIndex],r=function(n){if(e._pointerContainer.style.display="flex",o.selector&&o.selector.length>0&&!n)e.completeTour(!1);else{var r=function(){if("INPUT"===o.mode&&n){var e,r=function(){document.querySelector("#".concat(gg)).classList.remove("copilot-pointer-container-clickmode"),n.classList.remove("gleap-input-highlight"),document.getElementById(gg).style.display="none",t.currentActiveIndex++,t.storeUncompletedTour(),t.renderNextStep()};if("default"===(null!==(e=o.inputType)&&void 0!==e?e:"default")){var i=function e(t){var o;if(0!==(null==t||null===(o=t.target)||void 0===o||null===(o=o.value)||void 0===o?void 0:o.length)){var i=document.getElementById("copilot-info-bubble-content");i&&(i.innerHTML="".concat(Sh.translateText("next"),' <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n  <path fill="currentColor" d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/>\n</svg>'),i.addEventListener("click",r,{once:!0}),n.classList.add("gleap-input-highlight"),document.querySelector("#".concat(gg)).classList.add("copilot-pointer-container-clickmode"),n.removeEventListener("input",e))}};n.addEventListener("input",i,{once:!1}),n.hasAttribute("contenteditable")&&n.addEventListener("keyup",i,{once:!1}),n.addEventListener("blur",(function(){n.focus()}),{once:!0}),n.focus()}else{var a,s=null!==(a=o.inputValue)&&void 0!==a?a:"",l=0;!function e(){l<s.length?(n.value+=s[l],l++,setTimeout(e,100)):setTimeout((function(){r()}),1200)}()}}else{if(t.currentActiveIndex++,t.storeUncompletedTour(),"CLICK"===o.mode&&n){var c=n.getBoundingClientRect(),u=window.scrollX||0,d=window.scrollY||0;!function(e,t){if("undefined"!=typeof window){var n=document.createElement("div");n.className="click-wave",n.style.left="".concat(e-17,"px"),n.style.top="".concat(t-17,"px"),document.body.appendChild(n),setTimeout((function(){n.remove()}),800)}}(c.left+c.width/2+u,c.top+c.height/2+d),n.click()}t.renderNextStep()}};e.updatePointerPosition(n,o);var i=null!=o&&o.message?function(e){if("undefined"!=typeof window){var t=document.createElement("div");return t.innerHTML=e,t.textContent||""}}(o.message):"";document.getElementById("copilot-info-bubble-content").textContent=i,e._pointerContainer.style.opacity=1;var a=function(e){if("undefined"!=typeof window){var t=e.split(/\s+/).filter((function(e){return e.length>0})).length;return Math.ceil(t/3.6)+1}}(i),s=function(){e.currentAudio=void 0,setTimeout((function(){r()}),1e3*a)};o.voice&&o.voice.length>0?(e.currentAudio=new Audio(o.voice),e.audioMuted&&(e.currentAudio.muted=!0),e.currentAudio.addEventListener("ended",(function(){setTimeout((function(){r()}),1e3)})),e.currentAudio.play().then((function(){})).catch((function(e){s()}))):s()}},i=o.selector?function(e){if("undefined"!=typeof window){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3)/100,n=0;return new Promise((function(o,r){var i=setInterval((function(){var a=document.querySelector(e);a?(clearInterval(i),o(a)):n>=t&&(clearInterval(i),r(new Error("Element not found for selector: ".concat(e)))),n++}),100)}))}}(o.selector):Promise.resolve(null);i.then(r).catch((function(){return r(null)}))}}}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&ug(t.prototype,n),o&&ug(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wg(e){return wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(e)}function kg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function xg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kg(Object(n),!0).forEach((function(t){Cg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sg(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ig(o.key),o)}}function Cg(e,t,n){return(t=Ig(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ig(e){var t=function(e,t){if("object"!=wg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=wg(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wg(t)?t:String(t)}dg(bg,"instance",void 0);var Eg="gleap-tour-data",Tg=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Cg(this,"productTourData",void 0),Cg(this,"productTourId",void 0),Cg(this,"unmuted",!1),Cg(this,"currentActiveIndex",void 0),Cg(this,"gleapTourObj",void 0),Cg(this,"disabled",!1);var t=this;if("undefined"!=typeof window){"undefined"!=typeof window&&window.addEventListener("beforeunload",(function(e){var n;null!=t&&t.disabled||null==t||!t.productTourId||null==t||!t.productTourData||"cobrowse"===(null==t||null===(n=t.productTourData)||void 0===n?void 0:n.tourType)||t.storeUncompletedTour()}))}}var t,n,o;return t=e,n=[{key:"disable",value:function(){this.gleapTourObj&&this.gleapTourObj.destroy(),bg.getInstance().disable(),this.gleapTourObj=void 0,this.disabled=!0}},{key:"startWithConfig",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.productTourId&&!this.disabled)if(this.productTourId=e,this.productTourData=t,this.currentActiveIndex=0,r)this.start();else{var i=this;nt.getInstance().validateProductTour(e).then((function(){return o>0?setTimeout((function(){i.start()}),o):n.start()})).catch((function(e){console.log("Product tour is not live. Cleaning up..."),console.error(e),i.onComplete(!1)}))}}},{key:"onComplete",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={tourId:this.productTourId};e?(On.notifyEvent("productTourCompleted",t),Zg.trackEvent("tour-".concat(this.productTourId,"-completed"),t)):(On.notifyEvent("productTourQuit",t),Zg.trackEvent("tour-".concat(this.productTourId,"-quit"),t)),this.gleapTourObj&&this.gleapTourObj.destroy(),this.gleapTourObj=void 0,this.productTourData=void 0,this.productTourId=void 0,this.currentActiveIndex=void 0,this.clearUncompletedTour()}},{key:"loadUncompletedTour",value:function(){try{var e=JSON.parse(localStorage.getItem(Eg));if(null!=e&&e.tourData&&null!=e&&e.tourId)return e}catch(t){}return null}},{key:"storeUncompletedTour",value:function(){if(this.productTourId&&this.productTourData)try{var e=JSON.parse(JSON.stringify({tourData:this.productTourData,tourId:this.productTourId}));e.tourData.steps=e.tourData.steps.slice(this.currentActiveIndex||0,e.tourData.steps.length),localStorage.setItem(Eg,JSON.stringify(e))}catch(t){}else this.clearUncompletedTour()}},{key:"clearUncompletedTour",value:function(){try{localStorage.removeItem(Eg)}catch(e){}}},{key:"start",value:function(){var e=this,t=this.productTourData;if(t){if("cobrowse"===t.tourType)return bg.getInstance().startWithConfig(this.productTourId,t,(function(t){e.onComplete(t)}));this.unmuted=!1;for(var n=t.steps,o=this,r=[],i=0;i<n.length;i++){var a=n[i],s="CLICK"===a.mode,l="INPUT"===a.mode,c="INTERACTION"===a.mode,u="",d=!1;if("video-pointer"===a.type)u='<div class="gleap-tour-video">\n              <video class="gleap-tour-video-obj" muted autoplay>\n                <source src="'.concat(a.videoUrl,'" type="video/mp4">\n              </video>\n              <div class="gleap-tour-video-playpause">').concat(p("unmute"),"</div>\n            </div>");else{var h="";t.sender&&t.sender.firstName&&(d=!0,h='<div class="gleap-tour-sender">\n                <div class="gleap-tour-sender-image" style="background-image: url(\''.concat(t.sender.profileImageUrl,'\');"></div>\n                <div class="gleap-tour-sender-name">').concat(t.sender.firstName,"</div>\n              </div>")),u="".concat(h,'<div class="gleap-tour-message">').concat(a.message,"</div>")}var f={disableActiveInteraction:!s&&!l&&!c,mode:a.mode,popover:xg({description:u,popoverClass:"gleap-tour-popover-".concat(a.type," ").concat(!d&&"gleap-tour-popover-no-sender"," ").concat(t.allowClose&&"gleap-tour-popover-can-close")},s?{showButtons:[]}:{})};a.selector&&a.selector.length>0&&(f.element=a.selector),r.push(f)}var g=["next","close"];t.backButton&&g.push("previous"),this.gleapTourObj=sg(Cg(Cg(Cg(Cg(Cg(Cg(Cg(Cg(Cg(Cg({showProgress:!0,allowKeyboardControl:!1,steps:r},"showProgress",n.length>1),"allowClose",t.allowClose),"nextBtnText",t.nextText),"doneBtnText",t.doneText),"prevBtnText",t.prevText),"showButtons",g),"onHighlightStarted",(function(t,n,o){var r;e.currentActiveIndex=null==o||null===(r=o.state)||void 0===r?void 0:r.activeIndex,e.storeUncompletedTour()})),"onElementNotFound",(function(t){document.removeEventListener("click",m),e.onComplete(!1)})),"onDestroyStarted",(function(){e.gleapTourObj.hasNextStep()?e.onComplete(!1):e.onComplete(!0),document.removeEventListener("click",m)})),"onPopoverRender",(function(t){if(t)for(var n=document.querySelectorAll(".gleap-tour-popover-description img, .gleap-tour-popover-description video"),r=function(){setTimeout((function(){e.gleapTourObj.refresh()}),500),setTimeout((function(){e.gleapTourObj.refresh()}),750)},i=0;i<n.length;i++){var a=n[i];"IMG"===a.tagName?(a.addEventListener("load",(function(){r()})),a.addEventListener("error",(function(){r()}))):"VIDEO"===a.tagName&&(a.addEventListener("canplaythrough",(function(){r()})),a.addEventListener("error",(function(){r()})))}var s="gleap-tour-video--playing",l=document.querySelector(".gleap-tour-video-playpause"),c=document.querySelector(".gleap-tour-video-obj");if(c){var u=c.closest(".gleap-tour-video");o.unmuted&&c&&(c.pause(),c.muted=!1,c.play(),u.classList.add(s)),c.addEventListener("ended",(function(){l.innerHTML=p("replay"),l.classList.add("gleap-tour-video-svg--fullscreen"),u.classList.remove(s)})),c.addEventListener("play",(function(){l.classList.remove("gleap-tour-video-svg--fullscreen")})),l&&l.addEventListener("click",(function(){return d()}));var d=function(){c.muted?(o.unmuted=!0,c.pause(),c.currentTime=0,c.muted=!1,c.play(),l.innerHTML=p("mute"),u.classList.add(s)):c.paused?(c.muted=!1,c.play(),l.innerHTML=p("mute"),u.classList.add(s)):(c.pause(),l.innerHTML=p("unmute"),u.classList.remove(s))}}}))),this.gleapTourObj.drive(),document.addEventListener("click",m,!0)}function m(e){try{var t=document.querySelector(".gleap-tour-popover");if(t&&!t.contains(e.target)){var r,i=o.gleapTourObj.getActiveIndex(),a=n[i],s=o.gleapTourObj.getActiveElement();if("CLICK"===(null==a?void 0:a.mode)&&(null==e?void 0:e.target)!==s&&!s.contains(null==e?void 0:e.target))return;o.currentActiveIndex=(o.currentActiveIndex||0)+1,o.storeUncompletedTour(),s&&"INPUT"===s.tagName||"INPUT"===a.mode||"INTERACTION"===a.mode||null!=e&&null!==(r=e.target)&&void 0!==r&&r.id.includes("tooltip-svg")||o.gleapTourObj.moveNext()}}catch(l){}}}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&Sg(t.prototype,n),o&&Sg(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Lg(e){return Lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(e)}function Og(e){return function(e){if(Array.isArray(e))return Ag(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ag(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ag(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Mg(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_g(o.key),o)}}function Rg(e,t,n){return t=Fg(t),function(e,t){if(t&&("object"===Lg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pg(e)}(e,Ng()?Reflect.construct(t,n||[],Fg(e).constructor):t.apply(e,n))}function Pg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dg(e){var t="function"==typeof Map?new Map:void 0;return Dg=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(Ng())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var r=new(e.bind.apply(e,o));return n&&jg(r,n.prototype),r}(e,arguments,Fg(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),jg(n,e)},Dg(e)}function Ng(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ng=function(){return!!e})()}function jg(e,t){return jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jg(e,t)}function Fg(e){return Fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fg(e)}function Bg(e,t,n){return(t=_g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _g(e){var t=function(e,t){if("object"!=Lg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Lg(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lg(t)?t:String(t)}Cg(Tg,"instance",void 0);function Ug(e){return Ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(e)}function Hg(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Vg(o.key),o)}}function zg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function qg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zg(Object(n),!0).forEach((function(t){Wg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wg(e,t,n){return(t=Vg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vg(e){var t=function(e,t){if("object"!=Ug(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Ug(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ug(t)?t:String(t)}"undefined"!=typeof window&&"undefined"!=typeof HTMLCanvasElement&&HTMLCanvasElement.prototype&&void 0===HTMLCanvasElement.prototype.__originalGetContext&&(HTMLCanvasElement.prototype.__originalGetContext=HTMLCanvasElement.prototype.getContext,HTMLCanvasElement.prototype.getContext=function(e,t){return this.__originalGetContext(e,qg(qg({},t),{},{preserveDrawingBuffer:!0}))}),"undefined"!=typeof customElements&&"undefined"!=typeof HTMLElement&&"undefined"!=typeof window&&function(){if("undefined"!=typeof customElements&&"undefined"!=typeof HTMLElement&&"undefined"!=typeof window){var e=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bg(Pg(e=Rg(this,t)),"activeStep",-1),Bg(Pg(e),"checklistData",null),Bg(Pg(e),"_isInitialLoad",!1),Bg(Pg(e),"_initialActiveSet",!1),Bg(Pg(e),"_hasLoaded",!1),Bg(Pg(e),"_isSessionReady",!1),Bg(Pg(e),"_boundHandleChecklistUpdate",e.handleChecklistUpdate.bind(Pg(e))),Bg(Pg(e),"_boundHandleSessionUpdate",e.handleSessionUpdate.bind(Pg(e))),e.attachShadow({mode:"open"});try{e._networkManager=void 0!==nt&&void 0!==j?j.getInstance():null}catch(n){e._networkManager=null}return e._boundFloatingLauncherClick=e.handleFloatingLauncherClick.bind(Pg(e)),e._boundFloatingCloseClick=e.handleFloatingCloseClick.bind(Pg(e)),e._floatingHideTimeout=null,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jg(e,t)}(t,e),n=t,o=[{key:"connectedCallback",value:function(){window.addEventListener("checkListUpdate",this._boundHandleChecklistUpdate),window.addEventListener("session-updated",this._boundHandleSessionUpdate),window.addEventListener("resize",this._boundResizeHandler=this.handleResize.bind(this)),this._checkSessionAndLoad()}},{key:"disconnectedCallback",value:function(){window.removeEventListener("checkListUpdate",this._boundHandleChecklistUpdate),window.removeEventListener("session-updated",this._boundHandleSessionUpdate),window.removeEventListener("resize",this._boundResizeHandler),this.removeFloatingClickListeners(),this._floatingHideTimeout&&(clearTimeout(this._floatingHideTimeout),this._floatingHideTimeout=null),this.checklistData=null,this.activeStep=-1,this._hasLoaded=!1,this._isSessionReady=!1,this._initialActiveSet=!1,this.renderResponse()}},{key:"handleResize",value:function(){this.updateActiveTaskMaxHeight()}},{key:"attributeChangedCallback",value:function(e,t,n){t!==n&&("checklistId"===e&&this._isSessionReady?this.loadChecklist():"checklistId"!==e&&this._hasLoaded&&this.checklistData&&this.renderChecklist(this.checklistData))}},{key:"_checkSessionAndLoad",value:function(){var e=this._getGleapSessionInstance(),t=this.getAttribute("checklistId");e.ready&&t?(this._isSessionReady=!0,this._networkManager=j.getInstance(),this.loadChecklist()):(this._isSessionReady=!1,this._hasLoaded=!1,this.checklistData=null,this.activeStep=-1,this._initialActiveSet=!1,this.renderResponse())}},{key:"handleSessionUpdate",value:function(){this._checkSessionAndLoad()}},{key:"_getGleapSessionInstance",value:function(){try{return void 0!==nt?nt.getInstance():null}catch(e){return null}}},{key:"infoEnabled",get:function(){var e=this.getAttribute("info");return null===e||"false"!==e.toLowerCase()}},{key:"progressbarEnabled",get:function(){var e=this.getAttribute("progressbar");return null===e||"false"!==e.toLowerCase()}},{key:"floatingEnabled",get:function(){return"true"===this.getAttribute("floating")}},{key:"_translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Sh.translateText(e)||t}},{key:"_translateWithVars",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Sh.translateTextWithVars(e,t)||n}},{key:"getCheckIcon",value:function(){return'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: block;">\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M20.7071 5.29289C21.0976 5.68342 21.0976 6.31658 20.7071 6.70711L9.70711 17.7071C9.31658 18.0976 8.68342 18.0976 8.29289 17.7071L3.29289 12.7071C2.90237 12.3166 2.90237 11.6834 3.29289 11.2929C3.68342 10.9024 4.31658 10.9024 4.70711 11.2929L9 15.5858L19.2929 5.29289C19.6834 4.90237 20.3166 4.90237 20.7071 5.29289Z" fill="currentColor"/>\n                  </svg>'}},{key:"loadChecklist",value:function(){if(this._isSessionReady&&this._networkManager){var e=this.getAttribute("checklistId");e?(this.activeStep=-1,this._initialActiveSet=!1,this.validateChecklist(e)):(this.renderResponse(),this.checklistData=null,this._hasLoaded=!1)}}},{key:"getQueryParams",value:function(){var e=this._getGleapSessionInstance();if(null==e||!e.session)return"";var t=e.session,n="en";try{void 0!==Sh&&(n=Sh.getInstance().getActiveLanguage()||"en")}catch(o){}return"gleapId=".concat(t.gleapId||"","&gleapHash=").concat(t.gleapHash||"","&lang=").concat(n)}},{key:"makeRequest",value:function(e,t,n,o){var r=this._getGleapSessionInstance();if(null!=r&&r.session){var i=new XMLHttpRequest;i.open(e,t);try{r.injectSession(i)}catch(a){}n&&i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=function(){4===i.readyState&&o(i)},i.onerror=function(){o(i)},i.send(n?JSON.stringify(n):null)}else o({readyState:4,status:0,responseText:"Session unavailable",_isMock:!0})}},{key:"validateChecklist",value:function(e){var t=this;if(this._isSessionReady&&this._networkManager){this.checklistData=null,this._hasLoaded=!1,this.renderResponse();var n=this.getAttribute("sharedKey");this._networkManager.validateChecklist(e,n).then((function(e){t.isConnected&&t._isSessionReady&&e&&t.fetchChecklist(e)})).catch((function(e){t.renderResponse(),t.checklistData=null,t._hasLoaded=!1}))}}},{key:"fetchChecklist",value:function(e){var t=this;this._isSessionReady&&this._networkManager&&(this._isInitialLoad=!this._hasLoaded,this._networkManager.fetchChecklist(e).then((function(e){var n;if(!t.isConnected||!t._isSessionReady||!e)return t._hasLoaded=!1,t.checklistData=null,void t._checkSessionAndLoad();if(t.checklistData=e,t._hasLoaded=!0,"done"!==e.status){if(t._isInitialLoad&&!t._initialActiveSet){var o,r=(null===(o=e.outbound)||void 0===o||null===(o=o.config)||void 0===o?void 0:o.steps)||[],i=e.completedSteps||[],a=r.findIndex((function(e){return!i.includes(e.id)}));t.activeStep=a>=0?a:-1,-1!==t.activeStep&&(t._initialActiveSet=!0)}t.renderChecklist(t.checklistData),On.notifyEvent("checklist-loaded",{checklistId:t.checklistData.id,outboundId:null===(n=t.checklistData.outbound)||void 0===n?void 0:n.id,completedSteps:t.checklistData.completedSteps,status:t.checklistData.status,data:t.checklistData})}else t.renderResponse()})).catch((function(e){t.renderResponse(),t.checklistData=null,t._hasLoaded=!1})))}},{key:"updateChecklist",value:function(e,t){var n,o,r=this._getGleapSessionInstance();if(null!=r&&r.session){var i=r.apiUrl;if(i){var a=r.session,s=null!==(n=null==a?void 0:a.gleapId)&&void 0!==n?n:"",l=null!==(o=null==a?void 0:a.gleapHash)&&void 0!==o?o:"",c="en";try{void 0!==Sh&&(c=Sh.getInstance().getActiveLanguage()||"en")}catch(d){}var u="".concat(i,"/outbound/checklists/").concat(e);t.checkedStep&&(u+="/increment/".concat(t.checkedStep)),u+="?gleapId=".concat(s,"&gleapHash=").concat(l,"&lang=").concat(c),this.makeRequest("PUT",u,t,(function(e){e._isMock||200!==e.status&&e.status}))}}}},{key:"handleChecklistUpdate",value:function(e){if(this._hasLoaded&&this.checklistData){var t=e.detail;if(t&&t.id===this.checklistData.id){var n,o=Og(this.checklistData.completedSteps||[]),r=!1,i=!1,a=this.activeStep;if(t.completedSteps&&JSON.stringify(t.completedSteps)!==JSON.stringify(o)&&(this.checklistData.completedSteps=Og(t.completedSteps),r=!0,-1!==a)){var s,l=null===(s=this.checklistData.outbound)||void 0===s||null===(s=s.config)||void 0===s||null===(s=s.steps)||void 0===s||null===(s=s[a])||void 0===s?void 0:s.id;l&&this.checklistData.completedSteps.includes(l)&&!o.includes(l)&&(i=!0)}if(t.status&&t.status!==this.checklistData.status&&(this.checklistData.status=t.status,r=!0),i){for(var c,u=(null===(c=this.checklistData.outbound)||void 0===c||null===(c=c.config)||void 0===c?void 0:c.steps)||[],d=-1,p=a+1;p<u.length;p++)if(!this.checklistData.completedSteps.includes(u[p].id)){d=p;break}this.activeStep!==d&&this.setActiveStep(d),r=!0}r&&(this.renderChecklist(this.checklistData),On.notifyEvent("checklist-update",{checklistId:this.checklistData.id,outboundId:null===(n=this.checklistData.outbound)||void 0===n?void 0:n.id,completedSteps:this.checklistData.completedSteps,status:this.checklistData.status,data:this.checklistData}))}}}},{key:"handleFloatingLauncherClick",value:function(e){if(e.stopPropagation(),"done"!==this.checklistData.status){var t=this.shadowRoot.querySelector(".checklist-tasks");t&&(t.style.display="block"===t.style.display?"none":"block")}}},{key:"handleFloatingCloseClick",value:function(e){e.stopPropagation();var t=this.shadowRoot.querySelector(".checklist-tasks");t&&(t.style.display="none")}},{key:"addFloatingClickListeners",value:function(){var e=this.shadowRoot.querySelector(".checklist-floating-launcher");e&&e.addEventListener("click",this._boundFloatingLauncherClick);var t=this.shadowRoot.querySelector(".checklist-floating-header");t&&t.addEventListener("click",this._boundFloatingCloseClick)}},{key:"removeFloatingClickListeners",value:function(){var e=this.shadowRoot.querySelector(".checklist-floating-launcher");e&&e.removeEventListener("click",this._boundFloatingLauncherClick);var t=this.shadowRoot.querySelector(".checklist-floating-header");t&&t.removeEventListener("click",this._boundFloatingCloseClick)}},{key:"renderResponse",value:function(){this.shadowRoot.innerHTML=""}},{key:"renderFloatingLauncher",value:function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"checklist-floating",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(null===(t=e.config)||void 0===t?void 0:t.steps)||[],a=(null===(n=this.checklistData)||void 0===n?void 0:n.completedSteps)||[],s=0;if(this.progressbarEnabled&&i.length>0){var l=i.length,c=a.length;s=l>0?c/l*100:0}var u,d,p=i.find((function(e){return!a.includes(e.id)})),h=i.length>0?p?p.title||this._translateWithVars("stepDefaultTitle",{index:i.indexOf(p)+1},"Step ".concat(i.indexOf(p)+1)):"":e.subject||"",f=i.length>0?p&&p.description||"":e.message||"";r&&(h=(null===(u=e.config)||void 0===u?void 0:u.successTitle)||"",f=(null===(d=e.config)||void 0===d?void 0:d.successMessage)||"",s=100);var g=2*Math.PI*7,m=g-s/100*g,v="checklist-floating-header"===o,y=v?'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n               <line x1="18" y1="6" x2="6" y2="18"></line>\n               <line x1="6" y1="6" x2="18" y2="18"></line>\n             </svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n               <polyline points="6 9 12 15 18 9"></polyline>\n             </svg>';return'\n          <div part="'.concat(o,'" class="').concat(v?"checklist-floating-header":"checklist-floating-launcher"," ").concat(r?"checklist-floating-launcher--done":"",'">\n            <div class="floating-header">\n              <div class="floating-circular-progress">\n                <svg viewBox="0 0 20 20">\n                  <circle class="track" cx="10" cy="10" r="7"></circle>\n                  <circle class="progress" cx="10" cy="10" r="7" stroke-dasharray="').concat(g.toFixed(2),'" stroke-dashoffset="').concat(m.toFixed(2),'"></circle>\n                </svg>\n              </div>\n              <div class="floating-title">').concat(h,"</div>\n              ").concat(r?"":'<span class="floating-icon">'.concat(y,"</span>"),'\n            </div>\n            <div class="floating-subtitle">').concat(f,"</div>\n          </div>\n        ")}},{key:"renderInfoSection",value:function(e){var t;if(!this.infoEnabled||!e)return"";var n=e.subject||this._translate("checklistDefaultTitle","Checklist"),o=e.message||"",r="";return null!==(t=e.sender)&&void 0!==t&&t.profileImageUrl&&(r='\n            <div part="sender" class="checklists-sender">\n              <img part="sender-image" src="'.concat(e.sender.profileImageUrl,'" alt="').concat(e.sender.firstName||"Sender",'\'s profile picture" style="object-fit: cover;" />\n              <span part="sender-name">').concat(e.sender.firstName||"","</span>\n            </div>")),'\n          <div part="info" class="checklists-info">\n            '.concat(n?'<div part="info-title" class="checklists-title">'.concat(n,"</div>"):"","\n            ").concat(o?'<div part="info-description" class="checklists-description">'.concat(o,"</div>"):"","\n            ").concat(r,"\n          </div>")}},{key:"renderProgressSection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!this.progressbarEnabled||!e.length)return"";var n=e.length,o=t.length,r=n>0?o/n*100:0,i=0;e.forEach((function(e){!t.includes(e.id)&&e.duration>0&&(i+=e.duration)}));var a=this._translateWithVars("taskProgress",{a:o,b:n},"".concat(o," of ").concat(n," done")),s=i>0?this._translateWithVars("aboutMinutes",{a:i},"About ".concat(i," min left")):"";return'\n          <div part="progress-labels" class="checklist-progress-labels">\n            <div part="progress-label-primary" class="checklist-progress-label">'.concat(a,"</div>\n            ").concat(s?'<div part="progress-label-secondary" class="checklist-progress-label">'.concat(s,"</div>"):"",'\n          </div>\n          <div part="progress-bar" class="checklist-progress-bar">\n            <div part="progress-bar-progress" class="checklist-progress-bar-progress" style="width: ').concat(r,'%;"></div>\n          </div>')}},{key:"renderTasks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t&&0!==t.length?t.map((function(t,o){var r=n.includes(t.id),i=e.activeStep===o,a=r?'<span part="task-badge" class="checklist-task-header--badge checklist-task-header--badge-done">'.concat(e.getCheckIcon(),"</span>"):'<span part="task-badge" class="checklist-task-header--badge">'.concat(o+1,"</span>"),s=t.title||e._translateWithVars("stepDefaultTitle",{index:o+1},"Step ".concat(o+1)),l=t.description||"",c=t.actionTitle||e._translate("actionDefaultTitle","Action"),u=t.action&&"none"!==t.action?'<div part="task-action" class="checklist-task-body-action" data-action-index="'.concat(o,'">\n                      <button type="button" class="action-button form-send-button">').concat(c,"</button>\n                   </div>"):"",d=e._translate("markAsDone","Mark as done"),p=t.allowMarkDone&&!r?'<div part="task-mark-done" class="checklist-task-body-markdone" data-markdone-index="'.concat(o,'">\n                      ').concat(e.getCheckIcon(),'\n                      <div class="checklist-task-body-markdone-label">').concat(d,"</div>\n                   </div>"):"",h=["checklist-task",r?"checklist-task--done":"",i?"checklist-task--active":""].filter(Boolean).join(" ");return'\n              <div part="task" class="'.concat(h,'" data-task-index="').concat(o,'">\n                <div part="task-header" class="checklist-task-header" role="button" aria-expanded="').concat(i,'" aria-controls="task-body-').concat(o,'">\n                  ').concat(a,'\n                  <div part="task-header-title" class="checklist-task-header--title">').concat(s,'</div>\n                  <span part="task-header-chevron" class="checklist-task-header--chevron">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                      <polyline points="6 9 12 15 18 9"></polyline>\n                    </svg>\n                  </span>\n                </div>\n                <div part="task-body" class="checklist-task-body" id="task-body-').concat(o,'">\n                  <div part="task-body-inner" class="checklist-task-body-inner">\n                    ').concat(l?'<div part="task-body-content" class="checklist-task-body-content">'.concat(l,"</div>"):"","\n                    ").concat(u,"\n                    ").concat(p,"\n                  </div>\n                </div>\n              </div>")})).join(""):"<p>".concat(this._translate("noStepsDefined","No steps defined."),"</p>")}},{key:"renderChecklist",value:function(e){var t;if(this._hasLoaded&&e&&e.outbound){var n=e.outbound,o=(null===(t=n.config)||void 0===t?void 0:t.steps)||[],r=e.completedSteps||[],i="";if("done"===e.status||o.length>0&&r.length>=o.length){var a,s,l=(null===(a=n.config)||void 0===a?void 0:a.successTitle)||"",c=(null===(s=n.config)||void 0===s?void 0:s.successMessage)||"";i=this.floatingEnabled?this.renderFloatingLauncher(n,"checklist-floating-launcher",!0):'\n              <div part="content" class="checklists-content checklists-content--done">\n                <div part="success-icon" class="checklists-success-icon">\n                  <span part="success-icon-circle" class="checklists-success-icon--circle">'.concat(this.getCheckIcon(),'</span>\n                </div>\n                <div part="success-title" class="checklists-title">').concat(l,'</div>\n                <div part="success-description" class="checklists-description">').concat(c,"</div>\n              </div>"),-1!==this.activeStep&&(this.activeStep=-1)}else i='\n            <div part="content" class="checklists-content">\n              '.concat(this.floatingEnabled?"":this.renderInfoSection(n),"\n              ").concat(this.floatingEnabled?"":this.renderProgressSection(o,r),"\n              ").concat(this.floatingEnabled?this.renderFloatingLauncher(n):"",'\n              <div part="tasks" class="checklist-tasks">\n                ').concat(this.floatingEnabled?this.renderFloatingLauncher(n,"checklist-floating-header"):"","\n                ").concat(this.renderTasks(o,r),"\n              </div>\n            </div>");var u=ht.getInstance().getFlowConfig(),d=u.color?u.color:"#485BFF",p="\n          <style>\n            :host {\n              display: block;\n              --color-bg: #ffffff;\n              --color-font-title: #1f2937;\n              --color-font-text: #4b5563;\n              --color-font-light: #6b7280;\n              --color-primary: ".concat(d,";\n              --color-primary-light: ").concat(d,'22;\n              --color-primary-contrast: #ffffff;\n              --color-border: #e5e7eb;\n              --color-gray-light: #f3f4f6;\n              --color-gray-lighter: #f9fafb;\n              --color-gray-dark: #6b7280;\n              --color-success: #10b981;\n              --color-success-light: #ffffff;\n              --radius-sm: 4px;\n              --radius-lg: 12px;\n              --radius-full: 9999px;\n              --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n              --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -2px rgba(0, 0, 0, 0.08);\n              --shadow-lg: rgba(0, 0, 0, 0.2) 0px 7px 29px 0px;\n              --animation-duration: 0.2s;\n              --animation-timing: ease-in-out;\n              font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n              box-sizing: border-box;\n            }\n            :host([dark]) {\n              --color-bg: #1f2937;\n              --color-font-title: #f9fafb;\n              --color-font-text: #d1d5db;\n              --color-font-light: #9ca3af;\n              --color-primary: ').concat(d,";\n              --color-primary-light: ").concat(d,'22;\n              --color-primary-contrast: #ffffff;\n              --color-border: #374151;\n              --color-gray-light: #374151;\n              --color-gray-lighter: #111827;\n              --color-gray-dark: #9ca3af;\n              --color-success: #34d399;\n              --color-success-light: #1f2937;\n            }\n            *, *:before, *:after { box-sizing: inherit; }\n            .checklists-content { color: var(--color-font-text); }\n            .checklists-content--done { text-align: center; }\n            .checklists-info { margin-bottom: 24px; text-align: center; }\n            .checklists-title { font-size: 1.25rem; font-weight: 600; margin-bottom: 8px; color: var(--color-font-title); }\n            .checklists-description { font-size: 0.9rem; margin-bottom: 16px; color: var(--color-font-text); line-height: 1.5; }\n            .checklists-sender { display: flex; align-items: center; justify-content: center; gap: 8px; }\n            .checklists-sender img { width: 28px; height: 28px; border-radius: var(--radius-full); object-fit: cover; }\n            .checklists-sender span { font-size: 0.875rem; color: var(--color-font-light); font-weight: 500; }\n            .checklists-success-icon { margin-bottom: 16px; line-height: 0; }\n            .checklists-success-icon--circle { display: inline-flex; align-items: center; justify-content: center; width: 44px; height: 44px; border-radius: var(--radius-full); background-color: var(--color-success); color: var(--color-success-light); font-size: 22px; }\n            .checklist-progress-labels { display: flex; justify-content: space-between; margin-bottom: 8px; }\n            .checklist-progress-label { font-size: 0.75rem; color: var(--color-font-light); font-weight: 500; }\n            .checklist-progress-bar { width: 100%; height: 6px; background-color: var(--color-gray-light); border-radius: var(--radius-full); overflow: hidden; margin-bottom: 20px; }\n            .checklist-progress-bar-progress { height: 100%; background-color: var(--color-primary); transition: width var(--animation-duration) var(--animation-timing); border-radius: var(--radius-full); }\n            .checklist-tasks { display: flex; flex-direction: column; gap: 12px; }\n            .checklist-task { border: 1px solid var(--color-border); border-radius: var(--radius-lg); background-color: var(--color-bg); box-shadow: var(--shadow-sm); overflow: hidden; transition: background-color var(--animation-duration) var(--animation-timing), border-color var(--animation-duration) var(--animation-timing); }\n            .checklist-task-header { display: flex; align-items: center; padding: 15px 20px; cursor: pointer; gap: 12px; position: relative; }\n            .checklist-task-header:hover { background: var(--color-gray-lighter); }\n            .checklist-task-header:hover .checklist-task-header--chevron {\n              color: var(--color-font-title);\n            }\n            .checklist-task-header--badge { display: flex; align-items: center; justify-content: center; width: 28px; height: 28px; border-radius: var(--radius-full); background-color: var(--color-primary-light); color: var(--color-primary); font-size: 0.875rem; font-weight: 600; flex-shrink: 0; transition: background-color var(--animation-duration) var(--animation-timing), color var(--animation-duration) var(--animation-timing); line-height: 1; }\n            .checklist-task-header--badge svg { width: 16px; height: 16px; }\n            .checklist-task-header--title { flex-grow: 1; font-size: 0.9rem; font-weight: 500; color: var(--color-font-title); transition: font-weight var(--animation-duration) var(--animation-timing), color var(--animation-duration) var(--animation-timing), text-decoration var(--animation-duration) var(--animation-timing); }\n            .checklist-task-header--chevron { color: var(--color-font-light); transition: transform var(--animation-duration) var(--animation-timing); flex-shrink: 0; margin-left: auto; }\n            .checklist-task-header--chevron svg { display: block; width: 18px; height: 18px; }\n            .checklist-task-body {\n              overflow: hidden;\n              transition: max-height var(--animation-duration) var(--animation-timing), opacity var(--animation-duration) var(--animation-timing);\n              max-height: 0;\n              opacity: 0;\n            }\n            .checklist-task--active .checklist-task-body {\n              max-height: var(--task-body-active-height, 200px);\n              opacity: 1;\n            }\n            .checklist-task-body-inner { padding: 4px 16px 20px 60px; font-size: 0.875rem; color: var(--color-font-text); line-height: 1.5; }\n            .checklist-task-body-content { margin-bottom: 16px; }\n            .checklist-task-body-content p:first-child { margin-top: 0; }\n            .checklist-task-body-content p:last-child { margin-bottom: 0; }\n            .checklist-task-body-action { margin-top: 16px; }\n            .action-button { display: inline-flex; align-items: center; justify-content: center; background-color: var(--color-primary); color: var(--color-primary-contrast); padding: 10px 18px; font-size: 0.875rem; font-weight: 500; border-radius: var(--radius-lg); border: none; text-align: center; cursor: pointer; transition: background-color var(--animation-duration) var(--animation-timing), box-shadow var(--animation-duration) var(--animation-timing); box-shadow: var(--shadow-sm); }\n            .action-button:hover { background-color: color-mix(in srgb, var(--color-primary) 90%, black); box-shadow: var(--shadow-md); }\n            .action-button:focus { outline: 2px solid color-mix(in srgb, var(--color-primary) 50%, transparent); outline-offset: 2px; }\n            .checklist-task-body-markdone { margin-top: 20px; border-top: 1px solid var(--color-border); padding: 16px 0 0px 0; display: flex; align-items: center; cursor: pointer; color: var(--color-primary); transition: color var(--animation-duration) var(--animation-timing); }\n            .checklist-task-body-markdone:hover { color: color-mix(in srgb, var(--color-primary) 80%, black); }\n            .checklist-task-body-markdone svg { width: 18px; height: 18px; margin-right: 6px; flex-shrink: 0; font-size: 18px; }\n            .checklist-task-body-markdone-label { font-size: 0.875rem; font-weight: 500; line-height: 1; }\n            .checklist-task--active .checklist-task-header--title { font-weight: 600; }\n            .checklist-task--active .checklist-task-header--chevron { transform: rotate(180deg); }\n            .checklist-task--active .checklist-task-header:hover { background: linear-gradient(180deg, var(--color-gray-lighter), transparent); }\n            .checklist-task--done { background-color: var(--color-gray-lighter); border-color: var(--color-gray-light); box-shadow: none; }\n            .checklist-task--done .checklist-task-header--badge { background-color: var(--color-success); color: var(--color-success-light); }\n            .checklist-task--done .checklist-task-header--title { color: var(--color-font-light); }\n            .checklist-task--done .checklist-task-body-inner { color: var(--color-font-light); }\n            .checklist-task--done .checklist-task-header--title {\n              text-decoration: line-through;\n            }\n  \n            /* -------------------------\n               Floating style addition\n               Only applies if floating="true"\n               ------------------------- */\n            :host([floating="true"]) .checklists-content {\n              position: relative;\n            }\n            :host([floating="true"]) .checklist-tasks {\n              position: absolute;\n              bottom: 0;\n              left: 0;\n              z-index: 1000;\n              max-height: 90vh;\n              display: none;\n              padding: 0px;\n              min-width: min(380px, 90vw);\n              background-color: var(--color-bg);\n              border-radius: var(--radius-lg);\n              box-shadow: var(--shadow-lg);\n              overflow: hidden;\n            }\n            :host([floating="true"]) .checklist-task {\n              border-radius: 0px;\n              border: none;\n              box-shadow: none;\n              border-bottom: 1px solid var(--color-border);\n            }\n            :host([floating="true"]) .checklist-task:last-child {\n              border-bottom: none;\n            }\n            :host([floating="true"]) .checklist-task--done {\n              background-color: transparent;\n            }\n            :host([floating="true"]) .checklist-task-header:hover {\n              background: linear-gradient(180deg, var(--color-gray-lighter), transparent);\n            }\n  \n            /* -------------------------\n               Floating Launcher Styles\n               ------------------------- */\n            .checklist-floating-launcher {\n              padding: 12px;\n              background-color: var(--color-bg);\n              border: 1px solid var(--color-border);\n              border-radius: var(--radius-lg);\n              box-shadow: var(--shadow-md);\n              transition: transform 0.3s ease;\n              cursor: pointer;\n            }\n            .checklist-floating-launcher--done {\n              cursor: default !important;\n            }\n            .checklist-floating-header {\n              padding: 20px;\n              padding-bottom: 16px;\n              border-bottom: 1px solid var(--color-border);\n              cursor: pointer;\n            }\n            .checklist-floating-header:hover .floating-icon,\n            .checklist-floating-launcher:hover .floating-icon {\n              color: var(--color-font-title);\n            }\n            .floating-header {\n              display: flex;\n              align-items: center;\n              justify-content: flex-start;\n            }\n            .floating-title {\n              font-size: 0.875rem;\n              font-weight: 600;\n              color: var(--color-font-title);\n              max-width: calc(100% - 32px);\n              display: -webkit-box;\n              -webkit-line-clamp: 1;\n              -webkit-box-orient: vertical;\n              overflow: hidden;\n            }\n            .floating-subtitle {\n              font-size: 0.875rem;\n              color: var(--color-font-text);\n              margin-top: 8px;\n              max-width: 100%;\n              display: -webkit-box;\n              -webkit-line-clamp: 1;\n              -webkit-box-orient: vertical;\n              overflow: hidden;\n            }\n            .floating-circular-progress {\n              width: 26px;\n              height: 26px;\n              margin-right: 6px;\n            }\n            .floating-circular-progress svg {\n              width: 100%;\n              height: 100%;\n              transform: rotate(-90deg);\n            }\n            .floating-circular-progress .track {\n              fill: none;\n              stroke: var(--color-gray-light);\n              stroke-width: 3;\n            }\n            .floating-circular-progress .progress {\n              fill: none;\n              stroke: var(--color-primary);\n              stroke-width: 3;\n              stroke-linecap: round;\n              transition: stroke-dashoffset var(--animation-duration) var(--animation-timing);\n            }\n            .checklist-floating-launcher--done .floating-circular-progress .progress {\n              stroke: var(--color-success);\n            }\n            .floating-icon {\n              margin-left: auto;\n              color: var(--color-font-light);\n            }\n          </style>\n        ');this.shadowRoot.innerHTML=p+i,this.addTaskEventListeners(),this.floatingEnabled&&this.addFloatingClickListeners(),-1!==this.activeStep&&this.toggleTask(this.activeStep,!0)}else this._checkSessionAndLoad()}},{key:"updateActiveTaskMaxHeight",value:function(){if(-1!==this.activeStep){var e=this.shadowRoot.querySelector('.checklist-task[data-task-index="'.concat(this.activeStep,'"] .checklist-task-body-inner')),t=this.shadowRoot.querySelector('.checklist-task[data-task-index="'.concat(this.activeStep,'"] .checklist-task-body'));if(e&&t){var n=e.offsetHeight;t.style.setProperty("--task-body-active-height","".concat(n,"px"))}}}},{key:"addTaskEventListeners",value:function(){var e=this;this.shadowRoot.querySelectorAll(".checklist-task").forEach((function(t){var n=t.querySelector(".checklist-task-header"),o=parseInt(t.getAttribute("data-task-index"),10);n&&n.addEventListener("click",(function(){var t=e.activeStep===o?-1:o;e.setActiveStep(t)}));var r=t.querySelector(".checklist-task-body-markdone");r&&r.addEventListener("click",(function(t){var n;if(t.stopPropagation(),null!==(n=e.checklistData)&&void 0!==n&&null!==(n=n.outbound)&&void 0!==n&&null!==(n=n.config)&&void 0!==n&&n.steps){var r=e.checklistData.outbound.config.steps[o];if(r){var i=e.activeStep;if(e.checklistData.completedSteps||(e.checklistData.completedSteps=[]),!e.checklistData.completedSteps.includes(r.id)){var a;e.checklistData.completedSteps.push(r.id),On.notifyEvent("checklist-step-completed",{checklistId:e.checklistData.id,outboundId:null===(a=e.checklistData.outbound)||void 0===a?void 0:a.id,stepId:r.id,stepIndex:o,step:r,completedSteps:e.checklistData.completedSteps,status:e.checklistData.status,data:e.checklistData});var s=e.checklistData.outbound.config.steps,l=-1;if(i===o){for(var c=o+1;c<s.length;c++)if(!e.checklistData.completedSteps.includes(s[c].id)){l=c;break}e.setActiveStep(l)}setTimeout((function(){var t=!1;if(e.floatingEnabled){var n=e.shadowRoot.querySelector(".checklist-tasks");t=n&&"block"===n.style.display}if(e.renderChecklist(e.checklistData),e.floatingEnabled&&t){var o=e.shadowRoot.querySelector(".checklist-tasks");o&&(o.style.display="block")}}),300);var u,d={checkedStep:r.id};s.length>0&&e.checklistData.completedSteps.length>=s.length&&(e.checklistData.status="done",d.status="done",On.notifyEvent("checklist-completed",{checklistId:e.checklistData.id,outboundId:null===(u=e.checklistData.outbound)||void 0===u?void 0:u.id,completedSteps:e.checklistData.completedSteps,status:e.checklistData.status,data:e.checklistData})),e.updateChecklist(e.checklistData.id,d)}}}}));var i=t.querySelector(".checklist-task-body-action .action-button");i&&i.addEventListener("click",(function(t){var n;if(t.stopPropagation(),null!==(n=e.checklistData)&&void 0!==n&&null!==(n=n.outbound)&&void 0!==n&&null!==(n=n.config)&&void 0!==n&&n.steps&&void 0!==Zg){var r=e.checklistData.outbound.config.steps[o];if(r&&r.action&&"none"!==r.action)try{"BOT"===r.action?Zg.startBot(r.botId):"CUSTOM_ACTION"===r.action?Zg.triggerCustomAction(r.actionBody):"REDIRECT_URL"===r.action?(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),Zg.openURL(r.actionBody,!!r.actionOpenInNewTab)):"FEEDBACK_FLOW"===r.action?Zg.startFeedbackFlow(r.formId):"NEWS_ARTICLE"===r.action?Zg.openNewsArticle(r.articleId):"HELP_ARTICLE"===r.action?Zg.openHelpCenterArticle(r.articleId):"CHECKLIST"===r.action?Zg.startChecklist(r.outboundId,!0,null==r?void 0:r.sharedKey):"PRODUCT_TOUR"===r.action&&Zg.startProductTour(r.productTourId,!0)}catch(i){}}}))}))}},{key:"setActiveStep",value:function(e){var t=this,n=this.activeStep;this.activeStep=e;var o=[];-1!==n&&n!==this.activeStep&&o.push({index:n,open:!1}),-1!==this.activeStep&&this.activeStep!==n&&o.push({index:this.activeStep,open:!0}),o.forEach((function(e){var n=e.index,o=e.open;t.toggleTask(n,o)}))}},{key:"toggleTask",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.shadowRoot.querySelector('.checklist-task[data-task-index="'.concat(e,'"]'));if(n){var o=n.querySelector(".checklist-task-header");if(o){var r=n.classList.contains("checklist-task--active"),i=null!==t?t:!r;if(i&&!r){n.classList.add("checklist-task--active"),o.setAttribute("aria-expanded","true");var a=n.querySelector(".checklist-task-body-inner");if(a){var s=a.offsetHeight,l=n.querySelector(".checklist-task-body");l&&l.style.setProperty("--task-body-active-height","".concat(s,"px"))}}else!i&&r&&(n.classList.remove("checklist-task--active"),o.setAttribute("aria-expanded","false"))}}}}],r=[{key:"observedAttributes",get:function(){return["checklistId","info","progressbar","dark","floating","sharedKey"]}}],o&&Mg(n.prototype,o),r&&Mg(n,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(Dg(HTMLElement));"undefined"==typeof customElements||customElements.get("gleap-checklist")||customElements.define("gleap-checklist",e)}}();var Gg=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wg(this,"initialized",!1),Wg(this,"offlineMode",!1),Wg(this,"disablePageTracking",!1),Wg(this,"disableInAppNotifications",!1),Wg(this,"globalData",{screenRecordingData:null,webReplay:null,snapshotPosition:{x:0,y:0}}),"undefined"!=typeof window&&(rn.getInstance(),pn.getInstance().start(),bn.getInstance().start(),Qf.getInstance().start(),qh.getInstance().setOnMessageSend((function(t){e.askAI(t,!0)})))}var t,n,o;return t=e,n=[{key:"isLiveMode",value:function(){if(!0===this.offlineMode)return!1;var e=window.location.hostname;return!(["localhost","127.0.0.1","0.0.0.0","","::1"].includes(e)||e.startsWith("192.168.")||e.startsWith("10.0.")||e.endsWith(".local")||!e.includes("."))}},{key:"softReInitialize",value:function(){Qt.getInstance().destroy(),ht.getInstance().start().then((function(){a.getInstance().refresh(),Bh.getInstance().injectNotificationUI(),qh.getInstance().injectAIUI()})).catch((function(e){console.warn("Failed to initialize Gleap.")}))}},{key:"performActions",value:function(t){for(var n=0;n<t.length;n++){var o=t[n];if(o&&o.actionType){var r;if(o.pageFilter&&window&&window.location&&!ze(window.location.href,o.pageFilter,o.pageFilterType))continue;"notification"===o.actionType?"widget"===(null==o||null===(r=o.data)||void 0===r||null===(r=r.checklist)||void 0===r?void 0:r.popupType)?e.openChecklist(o.data.checklist.id,!0):this.disableInAppNotifications||e.showNotification(o):"banner"===o.actionType?e.showBanner(o):"modal"===o.actionType?e.showModal(o):"tour"===o.actionType?e.startProductTourWithConfig(o.outbound,o.data,!1):e.showSurvey(o.actionType,o.format)}}}},{key:"setGlobalDataItem",value:function(e,t){this.globalData[e]=t}},{key:"getGlobalDataItem",value:function(e){return this.globalData[e]}},{key:"takeCurrentReplay",value:function(){var e=oh.getInstance().getReplayData();this.setGlobalDataItem("webReplay",e)}}],o=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"setEnvironment",value:function(e){rn.getInstance().environment=e}},{key:"setTags",value:function(e){ff.getInstance().setTags(e)}},{key:"setUrlHandler",value:function(e){Qt.getInstance().setUrlHandler(e)}},{key:"setOfflineMode",value:function(e){this.getInstance().offlineMode=e}},{key:"setDisableInAppNotifications",value:function(e){this.getInstance().disableInAppNotifications=e}},{key:"setDisablePageTracking",value:function(e){this.getInstance().disablePageTracking=e}},{key:"disableConsoleLogOverwrite",value:function(){pn.getInstance().stop()}},{key:"setAiTools",value:function(e){ht.getInstance().setAiTools(e),Qt.getInstance().sendConfigUpdate()}},{key:"attachNetworkLogs",value:function(e){y.getInstance().externalRequests=S(e)}},{key:"log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INFO";pn.getInstance().addLog(e,t)}},{key:"initialize",value:function(t){var n=this.getInstance();if(n.initialized)console.warn("Gleap already initialized.");else{n.initialized=!0;try{!function(){try{if("visualViewport"in window&&/iPad|iPhone|iPod/.test(navigator.userAgent)){var e=function(){try{var e=document.querySelector(".gleap-frame-container-inner iframe");if(!e)return;window.visualViewport.height<t?e.style.setProperty("max-height",window.visualViewport.height+"px","important"):e.style.removeProperty("max-height")}catch(n){}},t=window.innerHeight;window.visualViewport.addEventListener("resize",e),window.addEventListener("orientationchange",(function(){try{t=window.innerHeight,e()}catch(n){}})),e()}}catch(n){}}()}catch(r){}var o=nt.getInstance();o.sdkKey=t,o.setOnSessionReady((function(){setTimeout((function(){ht.getInstance().start().then((function(){st.getInstance().start(),L((function(){a.getInstance().injectFeedbackButton(),Bh.getInstance().injectNotificationUI(),qh.getInstance().injectAIUI(),e.checkForUncompletedTour(),e.checkForUrlParams(),On.notifyEvent("initialized")}))})).catch((function(e){console.warn("Failed to initialize Gleap.")}))}),0)})),o.startSession()}}},{key:"openURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Qt.getInstance().urlHandler(e,t)}},{key:"checkForUrlParams",value:function(){if("undefined"!=typeof window&&window.location.search)try{var t=new URLSearchParams(window.location.search),n=t.get("gleap_widget");n&&n.length>0&&e.open();var o=t.get("gleap_conversation");o&&o.length>0&&("true"===o?e.startConversation(!0):e.startBot(o,!0));var r=t.get("gleap_feedback");r&&r.length>0&&e.startFeedbackFlow(r);var i=t.get("gleap_survey"),a=t.get("gleap_survey_format");i&&i.length>0&&e.showSurvey(i,"survey_full"===a?"survey_full":"survey");var s=t.get("gleap_tour");if(s&&s.length>0){var l=parseInt(t.get("gleap_tour_delay"));isNaN(l)&&(l=2),setTimeout((function(){e.startProductTour(s)}),1e3*l)}}catch(c){}}},{key:"destroy",value:function(){oh.getInstance().stop(),st.getInstance().stop(),Qt.getInstance().destroy(),a.getInstance().destroy(),Bh.getInstance().clearAllNotifications(!0),qh.getInstance().destroy(),nt.getInstance().clearSession(0,!1),Jh.getInstance().removeBannerUI(),this.instance=null}},{key:"closeBanner",value:function(){Jh.getInstance().removeBannerUI()}},{key:"closeModal",value:function(){of.getInstance().hideModal()}},{key:"showAiChatbar",value:function(){qh.getInstance().manuallyHidden=!1,qh.getInstance().show()}},{key:"hideAiChatbar",value:function(){qh.getInstance().manuallyHidden=!0,qh.getInstance().hide()}},{key:"setAiChatbarQuickActions",value:function(e){qh.getInstance().setQuickActions(e)}},{key:"setAiChatbarPlaceholder",value:function(e){qh.getInstance().setPlaceholder(e)}},{key:"setUseCookies",value:function(e){nt.getInstance().useCookies=e}},{key:"identify",value:function(e,t,n){return nt.getInstance().identifySession(e,S(t),n)}},{key:"updateContact",value:function(e){return nt.getInstance().updateSession(S(e))}},{key:"clearIdentity",value:function(){nt.getInstance().clearSession()}},{key:"getIdentity",value:function(){return nt.getInstance().getSession()}},{key:"isUserIdentified",value:function(){var e=nt.getInstance().session;return!!(e&&e.userId&&e.userId.length>0)}},{key:"isOpened",value:function(){return Qt.getInstance().isOpened()}},{key:"hide",value:function(){Qt.getInstance().hideWidget()}},{key:"setMaxNetworkRequests",value:function(e){y.getInstance().setMaxRequests(e)}},{key:"startNetworkLogger",value:function(){y.getInstance().start()}},{key:"setNetworkLogsBlacklist",value:function(e){y.getInstance().setBlacklist(e)}},{key:"setNetworkLogPropsToIgnore",value:function(e){y.getInstance().setFilters(e)}},{key:"setReplayOptions",value:function(e){oh.getInstance().setOptions(e)}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Qt.getInstance().hideWidget(e)}},{key:"open",value:function(){Qt.getInstance().setAppMode("widget"),Qt.getInstance().showWidget()}},{key:"trackEvent",value:function(e,t){st.getInstance().logEvent(e,t)}},{key:"logEvent",value:function(e,t){st.getInstance().logEvent(e,t)}},{key:"preFillForm",value:function(e){var t=S(e);Ph.getInstance().formPreFill=t,Qt.getInstance().sendMessage({name:"prefill-form-data",data:t},!0)}},{key:"on",value:function(e,t){On.on(e,t)}},{key:"enableShortcuts",value:function(e){e?Lh.getInstance().start():Lh.getInstance().stop()}},{key:"showFeedbackButton",value:function(e){a.getInstance().toggleFeedbackButton(e)}},{key:"setAppVersionCode",value:function(e){rn.setAppVersionCode(e)}},{key:"setAppBuildNumber",value:function(e){rn.setAppBuildNumber(e)}},{key:"setWSApiUrl",value:function(e){nt.getInstance().wsApiUrl=e}},{key:"setApiUrl",value:function(e){nt.getInstance().apiUrl=e}},{key:"setBannerUrl",value:function(e){Jh.getInstance().setBannerUrl(e)}},{key:"setModalUrl",value:function(e){of.getInstance().setModalUrl(e)}},{key:"setFrameUrl",value:function(e){Qt.getInstance().frameUrl=e}},{key:"setTicketAttribute",value:function(e,t){Cn.getInstance().setTicketAttribute(e,t)}},{key:"unsetTicketAttribute",value:function(e){Cn.getInstance().unsetTicketAttribute(e)}},{key:"clearTicketAttributes",value:function(){Cn.getInstance().clearTicketAttributes()}},{key:"attachCustomData",value:function(e){Cn.getInstance().attachCustomData(e)}},{key:"setCustomData",value:function(e,t){Cn.getInstance().setCustomData(e,t)}},{key:"removeCustomData",value:function(e){Cn.getInstance().removeCustomData(e)}},{key:"clearCustomData",value:function(){Cn.getInstance().clearCustomData()}},{key:"playSound",value:function(e){cf.playSound(e)}},{key:"showTabNotificationBadge",value:function(e){var t=Bh.getInstance();t.showNotificationBadge=e,t.updateTabBarNotificationCount()}},{key:"setLanguage",value:function(t){Sh.getInstance().setOverrideLanguage(t),e.getInstance().initialized&&setTimeout((function(){e.getInstance().softReInitialize(),e.updateContact({lang:t})}),1e3)}},{key:"registerCustomAction",value:function(e){jn.registerCustomAction(e)}},{key:"triggerCustomAction",value:function(e){jn.triggerCustomAction(e)}},{key:"setStyles",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#ffffff",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:20,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:a.FEEDBACK_BUTTON_BOTTOM_LEFT;L((function(){!function(e,t,n,o,r,i,s,l){var c=d(e),p=d(n),h=d(r),f=d(t),g="#ffffff"===h,m=u(t,"#ffffff"===f?-35:-15),v=u(r,g?100:-120),y=u(r,g?30:-12),b=u(r,g?80:-30),w=(o=parseInt(o,10),Math.round(1.05*o)),k=Math.round(.8*o),x=Math.round(.6*o),S=Math.round(.4*o),C=Math.round(.25*o),I=57+s;l===a.FEEDBACK_BUTTON_CLASSIC_BOTTOM?I=s+15:(l&&l.includes("CLASSIC")||l===a.FEEDBACK_BUTTON_NONE)&&(I=s);var E='\n    .gleap-font, .gleap-font * {\n      font-style: normal;\n      font-variant-caps: normal;\n      font-variant-ligatures: normal;\n      font-variant-numeric: normal;\n      font-variant-east-asian: normal;\n      font-weight: normal;\n      font-stretch: normal;\n      font-size: 100%;\n      line-height: 1;\n      font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    }\n    .gleap-ai-ui-widget {\n      display: none;\n    }\n    .gleap-input-highlight {\n      box-shadow: 0 0 0 3px '.concat(e," !important;\n    }\n    .gleap-frame-container {\n      right: ").concat(i,"px;\n      bottom: ").concat(61+s,"px;\n      width: calc(100% - 40px);\n      max-width: 410px;\n      position: fixed;\n      z-index: ").concat(2147483631,";\n      visibility: visible;\n      box-shadow: 0px 5px 30px rgba(0, 0, 0, 0.16);\n      border-radius: ").concat(k,"px;\n      overflow: hidden;\n      animation-duration: .3s;\n      animation-fill-mode: both;\n      animation-name: gleapFadeInUp;\n      user-select: none;\n      pointer-events: none;\n      transition: max-width 0.3s ease-out;\n    }\n\n    .gleap-admin-highlight {\n      box-shadow: 0px 0px 0px 4px red;\n    }\n\n    :root {\n      --gleap-margin-top: 50px;\n    }\n\n    .gleap-tooltip-anchor {\n      position: relative;\n      display: inline-block;\n      float: left;\n      max-width: 0px;\n      width: 17px;\n    }\n\n    .gleap-tooltip-hotspot {\n      position: absolute;\n      display: block;\n      width: 17px;\n      height: 17px;\n      cursor: pointer;\n      top: 0px;\n      left: 0px;\n    }\n\n    @keyframes gleap-pulse {\n      0% {\n        transform: scale(0);\n        opacity: 0.25;\n      }\n      45% {\n        transform: scale(2.5);\n        opacity: 0;\n      }\n      100% {\n        transform: scale(0);\n        opacity: 0;\n      }\n    }\n\n    .gleap-tooltip-hotspot-animation {\n      position: absolute;\n      border-radius: 17px;\n      opacity: 0.25;\n      display: block;\n      width: 17px;\n      height: 17px;\n      cursor: pointer;\n      top: 0px;\n      left: 0px;\n      animation: gleap-pulse 5s infinite;\n    }\n\n    .gleap-tooltip-hotspot svg {\n      width: 17px;\n      height: 17px;\n      object-fit: contain;\n      display: block;\n    }\n\n    .gleap-tooltip-inner {\n      position: relative;\n      overflow: visible;\n      font-size: 14px;\n      font-weight: normal;\n      color: #000;\n      line-height: 1.3;\n    }\n\n    .gleap-tooltip {\n      position: absolute;\n      background-color: #fff;\n      color: #000;\n      font-size: 15px;\n      line-height: 18px;\n      padding: 16px;\n      padding-top: 8px;\n      padding-bottom: 8px;\n      border-radius: 4px;\n      max-width: min(350px, 80vw);\n      box-shadow: 0px 5px 30px rgba(0, 0, 0, 0.2);\n      opacity: 0;\n      visibility: hidden;\n      transition: opacity 0.2s, visibility 0.2s;\n      z-index: ").concat(2147483700,";\n    }\n\n    .gleap-tooltip a {\n      color: ").concat(e,";\n      text-decoration: underline;\n      display: inline !important;\n      margin: 0px !important;\n      padding: 0px !important;\n      word-break: break-word;\n    }\n\n    .gleap-tooltip ul {\n      padding-left: 16px;\n    }\n\n    .gleap-tooltip b {\n      font-weight: 600;\n    }\n\n    .gleap-tooltip h2 {\n      font-size: 18px;\n      line-height: 20px;\n      font-weight: 600;\n      margin-top: 8px;\n      margin-bottom: 8px;\n    }\n\n    .gleap-tooltip h3 {\n      font-size: 16px;\n      line-height: 18px;\n      font-weight: 600;\n      margin-top: 8px;\n      margin-bottom: 8px;\n    }\n\n    .gleap-tooltip p {\n      padding: 0px;\n      margin-top: 8px;\n      margin-bottom: 8px;\n    }\n\n    .gleap-tooltip img {\n      max-width: 100%;\n      max-height: 300px;\n      width: 100%;\n      height: auto;\n      object-fit: cover;\n      margin-top: 8px;\n      margin-bottom: 8px;\n      border-radius: 4px;\n    }\n\n    .gleap-tooltip iframe,\n    .gleap-tooltip video {\n      max-width: 100%;\n      width: 100%;\n      height: auto;\n      min-height: 200px;\n      display: block;\n      border: none;\n      outline: none;\n      padding: 0px;\n      margin-top: 8px;\n      margin-bottom: 8px;\n      border-radius: 4px;\n    }\n\n    .gleap-tooltip-arrow {\n      position: absolute;\n      width: 20px;\n      height: 20px;\n    }\n\n    .gleap-tooltip-arrow svg {\n      width: 20px;\n      height: 20px;\n      object-fit: contain;\n    }\n\n    .gleap-b-frame {\n      width: 100%;\n      height: 100%;\n      border: none;\n      pointer-events: auto;\n      padding: 0px;\n      margin: 0px;\n    }\n\n    .gleap-b-shown {\n      transition: margin 0.3s ease-out;\n      margin-top: var(--gleap-margin-top);\n      position: relative;\n      z-index: 10000;\n    }\n\n    .gleap-b-f {\n      margin-top: 0px;\n    }\n\n    .gleap-b {\n      display: none;\n      position: absolute;\n      top: calc(-1 * var(--gleap-margin-top));\n      left: 0px;\n      width: 100vw;\n      height: var(--gleap-margin-top);\n      z-index: ").concat(2147483699,";\n    }\n\n    @keyframes gleapSlideIn {\n      from {\n          top: calc(-1 * var(--gleap-margin-top));\n      }\n      to {\n          top: 10px;\n      }\n    }\n\n    .gleap-b-f .gleap-b {\n      position: fixed;\n      top: 10px;\n      animation: gleapSlideIn .25s ease-out forwards;\n      max-width: 800px;\n      width: calc(100% - 20px);\n      left: 50%;\n      z-index: ").concat(2147483699,";\n      transform: translateX(-50%);\n      border-radius: ").concat(S,"px;\n      overflow: hidden;\n      box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.15), 0px 5px 5px rgba(0, 0, 0, 0.05);\n    }\n\n    .gleap-b-shown .gleap-b {\n      display: block;\n    }\n\n    .gleap-image-view {\n      position: fixed;\n      top: 0px;\n      left: 0px;\n      width: 100vw;\n      height: 100vh;\n      z-index: ").concat(2147483699,";\n      background-color: ").concat(h,"cc;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .gleap-image-view-image {\n      width: 90%;\n      height: auto;\n      max-width: 90%;\n      max-height: 90%;\n      object-fit: contain;\n    }\n\n    .gleap-image-view-close {\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      width: 32px;\n      height: 32px;\n      opacity: 0.8;\n      z-index: ").concat(2147483740,";\n      box-shadow: 0px 5px 18px rgba(0, 0, 0, 0.16);\n      cursor: pointer;\n    }\n\n    .gleap-image-view-close:hover {\n      opacity: 1;\n    }\n\n    .gleap-image-view-close svg path {\n      fill: ").concat(r,";\n    }\n\n    [dir=rtl].gleap-frame-container {\n      right: auto;\n      left: ").concat(i,"px;\n      bottom: ").concat(61+s,'px;\n    }\n\n    .gleap-frame-container--loading iframe {\n      opacity: 0;\n    }\n\n    .gleap-frame-container--loading::before {\n      content: " ";\n      position: fixed;\n      top: 0px;\n      left: 0px;\n      right: 0px;\n      height: 100%;\n      max-height: 380px;\n      background: linear-gradient(\n        130deg,\n        ').concat(m," 0%,\n        ").concat(t,' 100%\n      );\n    }\n    \n    .gleap-frame-container--loading::after {\n      content: " ";\n      position: fixed;\n      top: 0px;\n      left: 0px;\n      right: 0px;\n      height: 100%;\n      height: 100%;\n      max-height: 380px;\n      background: linear-gradient(\n        180deg,\n        transparent 60%,\n        ').concat(r,"1A 70%,\n        ").concat(r," 100%\n      );\n    }\n\n    .gleap-frame-container--loading-nogradient::before {\n      max-height: 340px;\n      background: ").concat(t," !important;\n    }\n\n    .gleap-frame-container--loading-nofade::after {\n      display: none !important;\n    }\n\n    .gleap-frame-container--survey {\n      bottom: ").concat(s,"px !important;\n    }\n\n    .gleap-frame-container--extended {\n      max-width: 690px !important;\n    }\n\n    .gleap-frame-container--survey-full {\n      position: fixed;\n      top: 0 !important;\n      left: 0 !important;\n      bottom: 0 !important;\n      right: 0 !important;\n      width: 100vw !important;\n      max-width: 100vw !important;\n      height: 100vh;\n      height: 100dvh !important;\n      background-color: rgba(0, 0, 0, 0.5);\n      backdrop-filter: blur(6px);\n      display: flex !important;\n      justify-content: center !important;\n      align-items: center !important;\n      max-height: 100vh;\n      max-height: 100dvh !important;\n      border-radius: 0 !important;\n      animation-name: none !important;\n    }\n\n    .gleap-frame-container--survey-full .gleap-frame-container-inner {\n      max-width: 640px !important;\n      width: calc(100% - 24px);\n      border-radius: ").concat(k,"px;\n      overflow: hidden;\n    }\n\n    .gleap-frame-container--classic {\n      right: ").concat(i,"px;\n      bottom: ").concat(s,"px;\n    }\n\n    [dir=rtl].gleap-frame-container--classic {\n      right: auto;\n      left: ").concat(i,"px;\n      bottom: ").concat(s,"px;\n    }\n\n    .gleap-frame-container--no-button {\n      bottom: ").concat(s,"px;\n    }\n\n    [dir=rtl].gleap-frame-container--classic-left {\n      bottom: ").concat(s,"px;\n    }\n\n    .gleap-frame-container--classic-left {\n      right: auto;\n      left: ").concat(i,"px;\n      bottom: ").concat(s,"px;\n    }\n\n    [dir=rtl].gleap-frame-container--classic-left {\n      left: auto;\n      right: ").concat(i,"px;\n      bottom: ").concat(s,"px;\n    }\n\n    .gleap-frame-container--modern-left {\n      right: auto;\n      left: ").concat(i,"px;\n      bottom: ").concat(61+s,"px;\n    }\n\n    [dir=rtl].gleap-frame-container--modern-left {\n      left: auto;\n      right: ").concat(i,"px;\n      bottom: ").concat(61+s,"px;\n    }\n\n    .gleap-frame-container--animate {\n      pointer-events: auto !important;\n    }\n\n    @keyframes gleapFadeInUp {\n      from {\n          opacity: 0;\n          transform: translate3d(0, 100%, 0);\n      }\n      to {\n          opacity: 1;\n          transform: translate3d(0, 0, 0);\n      }\n    }\n\n    @keyframes gleapFadeInUpMobile {\n      from {\n          opacity: 0;\n          transform: translate3d(0, 10%, 0);\n      }\n      to {\n          opacity: 1;\n          transform: translate3d(0, 0, 0);\n      }\n    }\n\n    .gleap-notification-container {\n      position: fixed;\n      bottom: ").concat(I,"px;\n      right: ").concat(i,"px;\n      z-index: ").concat(2147483630,";\n      display: flex;\n      flex-direction: column;\n      align-items: flex-end;\n      width: 100%;\n      max-width: min(340px, 80vw);\n    }\n\n    .gleap-notification-container--left {\n      left: ").concat(4+i,"px;\n      right: initial !important;\n    }\n\n    [dir=rtl].gleap-notification-container {\n      left: ").concat(4+i,"px;\n      right: initial !important;\n    }\n\n    [dir=rtl].gleap-notification-container--left {\n      left: initial !important;\n      right: ").concat(i,"px !important;\n      align-items: flex-start !important;\n    }\n\n    .gleap-notification-container--no-button {\n      bottom: ").concat(s,"px;\n    }\n\n    .gleap-notification-item {\n      animation-duration: 0.7s;\n      animation-fill-mode: both;\n      animation-name: bbFadeInOpacity;\n    }\n\n    .gleap-notification-close {\n      border-radius: 100%;\n      width: 28px;\n      height: 28px;\n      background-color: ").concat(v,";\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      margin-bottom: 8px;\n      cursor: pointer;\n      visibility: hidden;\n      pointer-events: none;\n    }\n\n    .gleap-notification-container:hover .gleap-notification-close {\n      visibility: visible;\n      pointer-events: auto;\n      animation-duration: 0.7s;\n      animation-fill-mode: both;\n      animation-name: bbFadeInOpacity;\n    }\n\n    @media only screen and (max-width: 450px) {\n      .gleap-notification-close {\n        visibility: visible;\n        pointer-events: auto;\n        animation-duration: 0.7s;\n        animation-fill-mode: both;\n        animation-name: bbFadeInOpacity;\n      }\n    }\n\n    .gleap-notification-close svg {\n      width: 45%;\n      height: 45%;\n      object-fit: contain;\n      fill: ").concat(r,";\n    }\n\n    .gleap-notification-item-checklist-container {\n      display: flex;\n      animation: fadeIn;\n      animation-duration: .45s;\n      background-color: ").concat(r,";\n      border-radius: ").concat(v,";\n      box-sizing: border-box;\n      cursor: pointer;\n      flex-direction: column;\n      overflow: hidden;\n      box-shadow: 0px 5px 30px rgba(0, 0, 0, 0.2);\n      border-radius: ").concat(x,"px;\n      margin-bottom: 12px;\n    }\n\n    .gleap-notification-item-checklist-content {\n      align-items: flex-start;\n      display: flex;\n      flex-direction: column;\n      padding: 15px;\n      width: 100%;\n      width: min(310px, 70vw);\n      max-width: min(310px, 70vw);\n    }\n\n    .gleap-notification-item-checklist-content-title {\n      color: ").concat(h,";\n      font-size: 15px;\n      font-weight: 500;\n      line-height: 21px;\n      margin-bottom: 10px;\n      max-width: 100%;\n      -webkit-line-clamp: 3;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n    }\n\n    .gleap-notification-item-checklist-content-progress {\n      width: 100%;\n      height: 8px;\n      border-radius: 8px;\n      background-color: ").concat(y,";\n    }\n\n    .gleap-notification-item-checklist-content-progress-inner {\n      height: 100%;\n      border-radius: 8px;\n      background-color: ").concat(e,";\n    }\n\n    .gleap-notification-item-checklist-content-next {\n      color: ").concat(v,";\n      font-size: 15px;\n      font-weight: normal;\n      line-height: 21px;\n      margin-top: 10px;\n      max-width: 100%;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      display: flex;\n      align-items: center;\n    }\n\n    .gleap-notification-item-checklist-content-next svg {\n      height: 18px;\n      margin-right: 5px;\n      width: auto;\n    }\n\n    .gleap-notification-item-checklist-content-next b {\n      font-size: 15px;\n      font-weight: normal;\n      color: ").concat(h,";\n    }\n\n    .gleap-notification-item-news {\n      width: 100%;\n    }\n\n    .gleap-news-pagination {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-top: 10px;\n      width: 100%;\n    }\n\n    .gleap-news-page-indicator {\n      font-size: 12px;\n      color: ").concat(v,";\n    }\n\n    .gleap-news-next-button {\n      background-color: ").concat(e,";\n      color: ").concat(c,";\n      border-radius: ").concat(C,"px;\n      box-sizing: border-box;\n      padding: 5px 10px;\n      font-size: 14px;\n      font-weight: bold;\n      line-height: 21px;\n      border: none;\n      text-align: center;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      box-shadow: none !important;\n      outline: none !important;^\n    }\n\n    .gleap-notification-item-news-content {\n      align-items: flex-start;\n      display: flex;\n      flex-direction: column;\n      padding: 15px;\n    }\n\n    .gleap-notification-item-news-preview {\n      color: ").concat(v,";\n      font-size: 14px;\n      line-height: 21px;\n      font-weight: 400;\n      overflow-wrap: break-word;\n      word-break: break-word;\n      display: block;\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n    }\n\n    .gleap-notification-item-news-sender {\n      display: flex;\n      align-items: center;\n      color: ").concat(v,";\n      font-size: 15px;\n      line-height: 21px;\n      font-weight: 400;\n    }\n    \n    .gleap-notification-item-news-content-title {\n      color: ").concat(h,";\n      font-size: 15px;\n      font-weight: 500;\n      line-height: 21px;\n      margin-bottom: 6px;\n      max-width: 100%;\n      -webkit-line-clamp: 3;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      cursor: pointer;\n    }\n\n    .gleap-notification-item-news-sender img {\n      border-radius: 100%;\n      height: 20px;\n      margin-right: 8px;\n      object-fit: cover;\n      width: 20px;\n    }\n\n    [dir=rtl] .gleap-notification-item-news-sender img {\n      margin-left: 8px;\n      margin-right: 0px !important;\n    }\n\n    .gleap-notification-item-news-container {\n      display: flex;\n      animation: fadeIn;\n      animation-duration: .45s;\n      background-color: ").concat(r,";\n      border-radius: ").concat(v,";\n      box-sizing: border-box;\n      flex-direction: column;\n      overflow: hidden;\n      box-shadow: 0px 5px 30px rgba(0, 0, 0, 0.2);\n      border-radius: ").concat(x,"px;\n      margin-bottom: 12px;\n    }\n\n    .gleap-notification-item-news-image {\n      background-color: ").concat(v,";\n      height: 170px;\n      max-height: 170px;\n      object-fit: cover;\n      width: 100%;\n      cursor: pointer;\n    }\n      \n    .gleap-notification-item-news-content-title:hover {\n      color: ").concat(e,";\n    }\n\n    .gleap-notification-item {\n      display: flex;\n      align-items: flex-end;\n      cursor: pointer;\n    }\n\n    .gleap-notification-item img {\n      width: 32px;\n      height: 32px;\n      min-width: 32px;\n      border-radius: 100%;\n      object-fit: cover;\n      margin-right: 8px;\n      margin-bottom: 12px;\n      cursor: pointer;\n    }\n\n    [dir=rtl] .gleap-notification-item img {\n      margin-left: 8px;\n      margin-right: 0px !important;\n    }\n\n    .gleap-notification-item-container {\n      box-shadow: 0px 5px 30px rgba(0, 0, 0, 0.2);\n      border-radius: ").concat(x,"px;\n      border-bottom-left-radius: 0px;\n      padding: 20px;\n      background-color: ").concat(r,";\n      margin-bottom: 12px;\n      cursor: pointer;\n      font-size: 15px;\n      line-height: 21px;\n      color: ").concat(h,';\n      position: relative;\n    }\n\n    .gleap-notification-item-container::after {\n      content: " ";\n      position: absolute;\n      bottom: 0px;\n      width: 0px;\n      height: 0px;\n      left: -6px;\n      border-style: solid;\n      border-width: 0px 0px 10px 6px;\n      border-color: transparent transparent ').concat(r,";\n    }\n\n    .gleap-notification-item-sender {\n      color: ").concat(v,";\n      line-height: 20px;\n    }\n\n    .gleap-notification-item-content {\n      line-height: 20px;\n      color: ").concat(h,";\n      margin-top: 4px;\n      min-width: min(200px, 50vw);\n      word-wrap: break-word;\n      word-break: break-word;\n    }\n\n    .gleap-frame-container-inner {\n      position: relative;\n      width: 100%;\n      height: calc(100vh - ").concat(84+s,"px);\n      max-height: ").concat(700,'px;\n    }\n\n    .gleap-frame-container--survey .gleap-frame-container-inner {\n      height: calc(100vh - 40px);\n    }\n    \n    .gleap-frame-container-inner:before {\n      content: " ";\n      position: absolute;\n      width: 100%;\n      height: calc(100% - ').concat(k,"px);\n      top: ").concat(k,"px;\n      background-color: ").concat(r,";\n      z-index: -1;\n    }\n    \n    .gleap-frame-container iframe {\n      height: 100% !important;\n      width: 100% !important;\n      max-width: 100% !important;\n      display: block !important;\n      pointer-events: auto !important;\n    }\n    \n    .gleap-frame-container--hidden {\n      display: none !important;\n      pointer-events: none;\n      animation: none !important;\n    }\n    \n    .bb-feedback-button {\n      margin: 0px;\n      position: fixed;\n      bottom: ").concat(s,"px;\n      right: ").concat(i,"px;\n      border-radius: 30px;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      background-color: transparent;\n      color: #000000;\n      z-index: ").concat(2147483630,";\n      box-sizing: border-box;\n      display: flex;\n      align-items: center;\n      padding: 0px;\n    }\n\n    [dir=rtl].bb-feedback-button {\n      bottom: ").concat(s,"px;\n      right: auto;\n      left: ").concat(i,"px;\n    }\n    \n    .bb-feedback-button--bottomleft {\n      bottom: ").concat(s,"px;\n      right: auto;\n      left: ").concat(i,"px;\n    }\n\n    [dir=rtl].bb-feedback-button--bottomleft {\n      bottom: ").concat(s,"px;\n      right: ").concat(i,'px;\n      left: auto;\n    }\n    \n    .bb-feedback-button--disabled {\n      display: none !important;\n    }\n\n    .bb-feedback-button--hidden {\n      display: none !important;\n    }\n    \n    .bb-feedback-button-text {\n      padding: 8px 12px;\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      justify-content: center;\n      background-color: #fff;\n      border-radius: 8px;\n      box-shadow: 0px 0px 14px 0px rgba(0, 0, 0, 0.15);\n      position: relative;\n      z-index: 99;\n    }\n    \n    .bb-feedback-button-text:before {\n      content: "";\n      position: absolute;\n      box-shadow: rgba(0, 0, 0, 0.04) 6px 6px 5px;\n      transform: rotate(315deg);\n      bottom: 16px;\n      right: -4px;\n      border-width: 10px;\n      border-style: solid;\n      border-color: transparent #fff #fff transparent;\n    }\n    \n    .bb-feedback-button--bottomleft .bb-feedback-button-text:before {\n      display: none;\n    }\n    \n    .bb-feedback-button-text:after {\n      content: "";\n      position: absolute;\n      bottom: 12px;\n      right: 0px;\n      background-color: #fff;\n      width: 5px;\n      height: 30px;\n    }\n    \n    .bb-feedback-button-text-title {\n      font-family: sans-serif;\n      font-size: 14px;\n      color: #666;\n      line-height: 18px;\n      max-width: 220px;\n    }\n    \n    .bb-feedback-button-text-title b {\n      color: #000000;\n      font-weight: 600;\n    }\n\n    .bb-notification-bubble {\n      position: absolute;\n      top: -5px;\n      right: -5px;\n      min-width: 12px;\n      padding: 0px 4px;\n      height: 20px;\n      min-width: 20px;\n      border-radius: 20px;\n      background-color: red;\n      color: #fff;\n      font-size: 11px;\n      font-family: sans-serif;\n      text-align: center;\n      line-height: 20px;\n    }\n\n    .bb-notification-bubble--hidden {\n      display: none;\n    }\n    \n    .bb-feedback-button-icon {\n      width: 48px;\n      height: 48px;\n      border-radius: 48px;\n      background-color: #485bff;\n      transition: box-shadow, transform 0.2s ease-in-out;\n      box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.15), 0px 0px 20px rgba(0, 0, 0, 0.1);\n      position: relative;\n    }\n    \n    .bb-feedback-button-classic {\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      top: 50%;\n      right: 0px;\n      position: fixed;\n      transform: rotate(-90deg) translate(50%, -50%);\n      transform-origin: 100% 50%;\n      padding: 9px 20px;\n      text-align: center;\n      background-color: #485bff;\n      border-top-left-radius: 8px;\n      border-top-right-radius: 8px;\n      font-family: sans-serif;\n      font-size: 16px;\n      color: #fff;\n      box-shadow: 0px 0px 14px 0px rgba(0, 0, 0, 0.25);\n    }\n\n    [dir=rtl].bb-feedback-button .bb-feedback-button-classic {\n      top: 50%;\n      left: 0px;\n      right: auto;\n      transform: rotate(90deg) translate(-50%, -100%);\n      transform-origin: 0% 0%;\n    }\n    \n    .bb-feedback-button-classic--left {\n      top: 50%;\n      left: 0px;\n      right: auto;\n      transform: rotate(90deg) translate(-50%, -100%);\n      transform-origin: 0% 0%;\n    }\n\n    [dir=rtl].bb-feedback-button .bb-feedback-button-classic--left {\n      top: 50%;\n      right: 0px;\n      left: auto;\n      transform: rotate(-90deg) translate(50%, -50%);\n      transform-origin: 100% 50%;\n    }\n    \n    .bb-feedback-button-classic--bottom {\n      top: auto;\n      bottom: 0px;\n      transform: none;\n      right: ').concat(i,"px;\n      left: auto;\n    }\n    \n    [dir=rtl].bb-feedback-button .bb-feedback-button-classic--bottom {\n      top: auto;\n      bottom: 0px;\n      transform: none;\n      left: ").concat(i,"px;\n      right: auto;\n    }\n\n    .bb-feedback-button--classic-button-style {\n      animation-duration: 0.2s;\n      animation-fill-mode: both;\n      animation-name: bbFadeInOpacity;\n    }\n    \n    .bb-feedback-button--open.bb-feedback-button--classic-button-style {\n      animation-duration: 0.2s;\n      animation-fill-mode: both;\n      animation-name: bbFadeOutRight;\n    }\n    \n    .bb-feedback-button .bb-logo-logo {\n      position: absolute;\n      width: 30px;\n      height: 30px;\n      top: 9px;\n      left: 9px;\n      object-fit: contain;\n      animation-duration: 0.3s;\n      animation-fill-mode: both;\n      animation-name: bbZoomIn;\n    }\n    \n    .bb-feedback-button .bb-logo-arrowdown {\n      position: absolute;\n      width: 14px;\n      height: 14px;\n      top: 17px;\n      left: 17px;\n      object-fit: contain;\n      animation-duration: 0.3s;\n      animation-fill-mode: both;\n    }\n    \n    .bb-feedback-button .bb-logo-arrowdown {\n      animation-name: bbZoomOut;\n    }\n    \n    .bb-feedback-button--open .bb-logo-arrowdown {\n      animation-name: bbZoomIn;\n    }\n    \n    .bb-feedback-button--open .bb-logo-logo {\n      animation-name: bbZoomOut;\n    }\n    \n    .bb-feedback-button-icon:hover {\n      box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.25), 0px 0px 20px rgba(0, 0, 0, 0.2);\n      transform: scale(1.1);\n    }\n    \n    .bb-feedback-button--open .bb-feedback-button-text {\n      animation-name: bbFadeOutDown;\n    }\n    \n    .bb-feedback-button--open .bb-feedback-button-icon {\n      display: flex;\n    }\n    \n    .bb-capture-svg {\n      position: fixed;\n      z-index: ").concat(2147483614,";\n      top: 0px;\n      left: 0px;\n      right: 0px;\n      width: 100%;\n      height: 100%;\n      padding: 0px;\n      margin: 0px;\n      cursor: crosshair;\n    }\n\n    .bb-capture-svg--preview {\n      cursor: auto !important;\n    }\n    \n    .bb-rec-on-circle {\n      animation-name: bbRecIconFade;\n      animation-duration: 2s;\n      animation-iteration-count: infinite;\n      animation-direction: alternate;\n    }\n    \n    .bb-rec-on-cont {\n      animation-name: bbRecIconContFade;\n      animation-duration: 2s;\n      animation-iteration-count: infinite;\n      animation-direction: alternate;\n    }\n    \n    .bb-capture-editor-drag-info {\n      position: fixed;\n      top: -200px;\n      left: 0px;\n      z-index: ").concat(2147483616,";\n      transition: opacity 0.3s ease-in-out;\n    }\n    \n    .bb-capture-editor-drag-info svg {\n      width: 24px;\n      height: 24px;\n    }\n    \n    .bb-capture-editor-borderlayer {\n      position: fixed;\n      top: 0px;\n      left: 0px;\n      width: 100vw;\n      height: 100vh;\n      border: 4px solid ").concat(e,";\n      cursor: crosshair;\n      z-index: ").concat(2147483610,";\n      box-sizing: border-box;\n      pointer-events: none;\n    }\n    \n    .bb-capture-editor-notrecording .bb-capture-editor-borderlayer {\n      background-color: rgba(0, 0, 0, 0.8);\n    }\n\n    .bb-capture-editor-recording .bb-capture-editor-borderlayer {\n      border: 4px solid #eb144c !important;\n    }\n    \n    .bb-capture-editor-recording .bb-capture-dismiss {\n      display: none;\n    }\n    \n    .bb-capture-editor-item-inactive {\n      opacity: 0.3;\n      cursor: not-allowed !important;\n    }\n    \n    .bb-capture-editor-notrecording .bb-capture-toolbar-drawingitem {\n      opacity: 0.3;\n      cursor: not-allowed !important;\n    }\n    \n    .bb-capture-editor-notrecording .bb-capture-editor-drag-info {\n      display: none;\n    }\n    \n    .bb-capture-editor-notrecording .bb-capture-svg {\n      pointer-events: none !important;\n    }\n    \n    .bb-capture-toolbar {\n      position: fixed;\n      top: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      z-index: ").concat(2147483618,";\n      background-color: #fff;\n      padding: 5px;\n      display: flex;\n      align-items: center;\n      border-radius: 8px;\n      box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.15), 0px 0px 20px rgba(0, 0, 0, 0.1);\n      transition: opacity 0.3s ease-in-out;\n    }\n    \n    .bb-capture-dismiss {\n      position: fixed;\n      top: 0px;\n      right: 0px;\n      z-index: ").concat(2147483618,";\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      width: 36px;\n      height: 36px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: ").concat(e,";\n      border-bottom-left-radius: ").concat(C,"px;\n    }\n\n    [dir=rtl] .bb-capture-dismiss {\n      top: 0px;\n      left: 0px;\n      right: auto;\n      border-bottom-left-radius: 0px !important;\n      border-bottom-right-radius: ").concat(C,"px;\n    }\n    \n    .bb-capture-dismiss svg path {\n      fill: ").concat(c,';\n    }\n    \n    .bb-capture-dismiss svg {\n      width: 20px;\n      height: 20px;\n      object-fit: contain;\n    }\n    \n    .bb-capture-button-next {\n      font-family: sans-serif;\n      box-sizing: border-box;\n      font-weight: 600;\n      text-align: center;\n      width: auto;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      margin: 0px;\n      line-height: 36px;\n      padding: 0px 12px;\n      font-size: 15px;\n      margin-left: 12px;\n    }\n\n    [dir=rtl].bb-capture-editor .bb-capture-button-next {\n      margin-left: auto;\n      margin-right: 12px;\n    }\n    \n    .bb-capture-toolbar-item-spacer {\n      width: 1px;\n      height: 38px;\n      min-width: 1px;\n      margin: 0px 5px;\n    }\n    \n    .bb-capture-toolbar-item {\n      width: 42px;\n      height: 38px;\n      min-width: 42px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      position: relative;\n      margin-right: 5px;\n    }\n\n    .drag-handle-item {\n      cursor: grab !important;\n      width: 34px;\n      min-width: 34px;\n    }\n\n    .drag-handle-item svg {\n      width: 18px !important;\n      height: 18px !important;\n    }\n    \n    .bb-capture-toolbar-item svg {\n      width: 23px;\n      height: 23px;\n      object-fit: contain;\n    }\n    \n    .bb-capture-toolbar-item-selectedcolor {\n      border-radius: 100%;\n      width: 20px;\n      height: 20px;\n      background-color: #db4035;\n    }\n    \n    .bb-capture-toolbar-item[data-type="undo"] svg {\n      width: 18px;\n      height: 18px;\n    }\n    \n    .bb-capture-toolbar-item[data-active="true"] {\n      position: relative;\n    }\n    \n    .bb-capture-preview {\n      display: none;\n      background-color: rgba(0, 0, 0, 0.6);\n      position: fixed;\n      top: 0px;\n      left: 0px;\n      width: 100vw;\n      height: 100vh;\n      justify-content: center;\n      align-items: center;\n      z-index: ').concat(2147483620,";\n    }\n    \n    .bb-capture-preview-inner {\n      background-color: #fff;\n      padding: 0px;\n      box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.15), 0px 0px 20px rgba(0, 0, 0, 0.1);\n      border-radius: 8px;\n      flex-direction: column;\n      max-width: 640px;\n      width: 100%;\n      margin: 20px;\n    }\n    \n    .bb-capture-preview-inner video {\n      border-radius: 8px 8px 0px 0px;\n      display: block;\n      border: 0px;\n      outline: none;\n      width: 100%;\n      max-height: 60vh;\n    }\n    \n    .bb-capture-preview-buttons {\n      display: flex;\n      justify-content: space-between;\n      padding: 14px;\n    }\n    \n    .bb-capture-preview-retrybutton {\n      font-family: sans-serif;\n      border-radius: 21px;\n      box-sizing: border-box;\n      padding: 12px 26px;\n      font-size: 16px;\n      line-height: 19px;\n      font-weight: 600;\n      text-align: center;\n      margin-top: 0px;\n      margin-bottom: 0px;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n    }\n    \n    .bb-capture-preview-sendbutton {\n      font-family: sans-serif;\n      border-radius: 21px;\n      box-sizing: border-box;\n      padding: 12px 26px;\n      font-size: 16px;\n      line-height: 19px;\n      font-weight: 600;\n      text-align: center;\n      margin-top: 0px;\n      margin-bottom: 0px;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n    }\n    \n    .bb-capture-preview-retrybutton:hover,\n    .bb-capture-preview-sendbutton:hover {\n      opacity: 0.9;\n    }\n    \n    .bb-capture-toolbar-item-recording {\n      margin-right: 0px;\n    }\n    \n    .bb-capture-toolbar-item-recording svg {\n      width: 33px;\n      height: 33px;\n    }\n    \n    .bb-capture-toolbar-item-colorpicker {\n      position: fixed;\n      top: 70px;\n      left: 50%;\n      transform: translateX(-50%);\n      z-index: ").concat(2147483618,';\n      background-color: #fff;\n      display: none;\n      padding: 10px;\n      box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.15), 0px 0px 20px rgba(0, 0, 0, 0.1);\n      border-radius: 8px;\n    }\n    \n    .bb-capture-toolbar-item-color {\n      width: 20px;\n      height: 20px;\n      border-radius: 100%;\n      margin-right: 12px;\n      box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.15);\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n    }\n    \n    .bb-capture-toolbar-item-color:hover {\n      box-shadow: 0px 0px 6px rgba(0, 0, 0, 0.25);\n    }\n    \n    .bb-capture-toolbar-item-color:last-of-type {\n      margin-right: 0px;\n    }\n    \n    [dir=rtl].bb-capture-editor .bb-capture-toolbar-item-color {\n      margin-right: auto;\n      margin-left: 12px;\n    }\n    \n    [dir=rtl].bb-capture-editor .bb-capture-toolbar-item-color:last-of-type {\n      margin-right: auto;\n      margin-left: 0px;\n    }\n    \n    .bb-capture-toolbar-item-recording[data-active="true"] svg:first-of-type {\n      display: none;\n    }\n    \n    .bb-capture-toolbar-item-recording[data-active="true"] svg:nth-of-type(2) {\n      display: block;\n    }\n    \n    .bb-capture-toolbar-item-recording[data-active="false"] svg:first-of-type {\n      display: block;\n    }\n    \n    .bb-capture-toolbar-item-recording[data-active="false"] svg:nth-of-type(2) {\n      display: none;\n    }\n    \n    .bb-capture-toolbar-item--active {\n      background-color: #eee;\n    }\n    \n    .bb-capture-toolbar-item:hover svg {\n      opacity: 1;\n    }\n    \n    .bb-capture-toolbar-item--active {\n      background-color: #f8f8f8;\n    }\n    \n    .bb-capture-toolbar-item--active svg {\n      opacity: 1;\n    }\n    \n    .bb-capture-toolbar-item--inactivecross::before {\n      content: "";\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      height: 3px;\n      width: 26px;\n      margin: auto;\n      border-radius: 4px;\n      background-color: #e80000;\n      transform: rotate(45deg);\n    }\n    \n    .bb-capture-toolbar-item--inactivecross svg {\n      fill: #eee;\n    }\n    \n    .bb-capture-toolbar-item-timer {\n      text-align: left;\n      line-height: 32px;\n      font-size: 14px;\n      font-family: sans-serif;\n      margin: 5px;\n      min-width: 40px;\n      display: none;\n    }\n    \n    .bb-capture-toolbar-item .bb-tooltip {\n      background-color: #555;\n      color: #fff;\n      visibility: hidden;\n      font-size: 14px;\n      font-family: sans-serif;\n      text-align: center;\n      padding: 5px 10px;\n      position: absolute;\n      z-index: 1;\n      top: 45px;\n      left: 0px;\n      transform: translateX(calc(-50% + 21px));\n      opacity: 0;\n      transition: opacity 0.3s;\n      white-space: nowrap;\n    }\n    \n    .bb-capture-toolbar-item .bb-tooltip::after {\n      content: "";\n      position: absolute;\n      bottom: 100%;\n      left: 50%;\n      margin-left: -5px;\n      border-width: 5px;\n      border-style: solid;\n      transform: rotate(180deg);\n      border-color: #555 transparent transparent transparent;\n    }\n    \n    .bb-capture-toolbar-item:hover .bb-tooltip {\n      visibility: visible;\n      opacity: 1;\n    }\n    \n    .bb-capture-options {\n      display: none;\n    }\n    \n    .bb-capture-options--active {\n      display: flex;\n    }\n\n    @keyframes bbFadeOutRight {\n      from {\n        opacity: 1;\n      }\n    \n      to {\n        opacity: 0;\n      }\n    }\n    \n    @keyframes bbFadeOutDown {\n      from {\n        opacity: 1;\n      }\n    \n      to {\n        opacity: 0;\n        transform: translate3d(0, 100%, 0);\n      }\n    }\n    \n    @keyframes bbFadeInOpacity {\n      from {\n        opacity: 0;\n      }\n    \n      to {\n        opacity: 1;\n      }\n    }\n    \n    @keyframes bbZoomOut {\n      from {\n        opacity: 1;\n      }\n    \n      50% {\n        opacity: 0;\n        transform: scale3d(0.3, 0.3, 0.3);\n      }\n    \n      to {\n        opacity: 0;\n      }\n    }\n    \n    @keyframes bbZoomIn {\n      from {\n        opacity: 0;\n        transform: scale3d(0.3, 0.3, 0.3);\n      }\n    \n      50% {\n        opacity: 1;\n      }\n    }\n    \n    @keyframes bbRecIconContFade {\n      0% {\n        fill: #b10802;\n      }\n      50% {\n        fill: #ff0000;\n      }\n      100% {\n        fill: #b10802;\n      }\n    }  \n    .bb-capture-preview-retrybutton {\n      color: ').concat(h,";\n      border-radius: ").concat(w,"px;\n      background-color: ").concat(y,";\n    }\n    .bb-capture-preview-retrybutton:hover {\n      background-color: ").concat(b,";\n    }\n    @keyframes bb-suc-fill {\n      100% {\n        box-shadow: inset 0px 0px 0px 30px ").concat(e,";\n      }\n    }\n    .bb-capture-toolbar-item-spacer {\n      background-color: ").concat(y,";\n    }\n    .bb-tooltip {\n      border-radius: ").concat(S,"px;\n    }\n    @keyframes bbRecIconFade {\n      0% {\n        fill: transparent;\n      }\n      50% {\n        fill: ").concat(b,";\n      }\n      100% {\n        fill: transparent;\n      }\n    }\n    .bb-capture-preview-sendbutton {\n      color: ").concat(c,";\n      background-color: ").concat(e,";\n      border-radius: ").concat(w,"px;\n    }\n    .bb-capture-button-next {\n      color: ").concat(c,";\n      background-color: ").concat(e,";\n      border-radius: ").concat(C,"px;\n    }\n    .bb-capture-preview-inner {\n      background-color: ").concat(r,";\n      border-radius: ").concat(S,"px;\n    }\n    .bb-capture-toolbar-item-timer {\n      color: ").concat(v,";\n    }\n    .bb-svg-path {\n      fill: ").concat(h,";\n    }\n    .bb-capture-toolbar-item {\n      border-radius: ").concat(S,"px;\n    }\n    .bb-capture-toolbar {\n      background-color: ").concat(r,";\n      border-radius: ").concat(S,"px;\n    }\n    .bb-capture-toolbar-item-colorpicker {\n      background-color: ").concat(r,";\n    }\n    .bb-capture-toolbar-item--active {\n      background-color: ").concat(y,";\n    }\n    .bb-feedback-button-classic {\n      border-top-left-radius: ").concat(S,"px;\n      border-top-right-radius: ").concat(S,"px;\n    }\n    .bb-logo-logo--default path {\n      fill: ").concat(p,";\n    }\n    .bb-logo-arrowdown {\n      fill: ").concat(p,";\n    }\n    .bb-feedback-button-icon {\n        background-color: ").concat(n,";\n    }\n    .bb-feedback-button-classic {\n      background-color: ").concat(n,";\n      color: ").concat(p,";\n    }\n\n    @media only screen and (max-width: 450px) {\n      [dir=rtl].gleap-frame-container,\n      .gleap-frame-container {\n        left: 0px;\n        right: 0px;\n        width: 100vw;\n        max-width: 100vw;\n        min-height: 100vh;\n        max-height: 100vh;\n        min-height: 100dvh !important;\n        max-height: 100dvh !important;\n        top: 0px;\n        bottom: 0px;\n        border-radius: 0px;\n        animation-name: gleapFadeInUpMobile;\n      }\n\n      .gleap-frame-container-inner {\n        width: 100vw;\n        height: 100%;\n      }\n\n      .gleap-frame-container:not(.gleap-frame-container--survey):not(.gleap-frame-container--survey-full) .gleap-frame-container-inner {\n        max-height: calc(var(--glvh, 1vh) * 100) !important;\n      }\n\n      .gleap-frame-container--survey {\n        height: auto !important;\n        top: initial !important;\n        bottom: 0px !important;\n        min-height: initial !important;\n      }\n\n      .gleap-frame-container--survey .gleap-frame-container-inner {\n        height: 100vh !important;\n      }\n\n      .bb-tooltip {\n        display: none !important;\n      }\n    \n      .bb-capture-toolbar-item-colorpicker {\n        top: 75px;\n      }\n    \n      .bb-capture-button-next {\n        margin-left: auto;\n      }\n    \n      .bb-capture-dismiss {\n        display: none;\n      }\n    \n      .bb-capture-toolbar {\n        top: 15px;\n        right: 15px;\n        left: 15px;\n        width: auto;\n        transform: none;\n      }\n\n      .bb-capture-editor-drag-info {\n        display: none;\n      }\n    \n      .bb-capture-editor-borderlayer {\n        border-width: 4px;\n      }\n    }\n    \n    @media print {\n      .bb-feedback-button {\n        display: none !important;\n      }\n      \n      .gleap-frame-container {\n        display: none !important;\n      }\n    }\n\n    .gleap-tour-sender {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      margin-bottom: 10px;\n    }\n\n    .gleap-tour-sender-image {\n      width: 32px;\n      height: 32px;\n      border-radius: 32px;\n      margin-right: 10px;\n      background-size: cover;\n      background-repeat: no-repeat;\n    }\n\n    .gleap-tour-popover.gleap-tour-popover-post {\n      min-width: 550px;\n      max-width: 550px;\n    }\n\n    @media only screen and (max-width: 450px) {\n      .gleap-tour-popover.gleap-tour-popover-post {\n        min-width: calc(100vw - 40px);\n        max-width: calc(100vw - 40px);\n      }\n    }\n\n    .gleap-tour-message,\n    .gleap-tour-message p,\n    .gleap-tour-message ul {\n      color: ").concat(h,";\n    }\n\n    .gleap-tour-message h2 {\n      font-weight: 600;\n      font-size: 22px;\n    }\n\n    .gleap-tour-message h3 {\n      font-weight: 600;\n      font-size: 18px;\n    }\n\n    .gleap-tour-message p {\n      line-height: 1.3;\n      margin-bottom: 10px !important;\n      margin-top: 10px !important;\n    }\n\n    .gleap-tour-message ul {\n      line-height: 1.3;\n      padding-left: 20px;\n      margin-top: 10px !important;\n      margin-bottom: 10px !important;\n    }\n\n    .gleap-tour-message {\n      max-height: calc(80vh - 100px) !important;\n      overflow-y: auto;\n      min-width: 270px;\n    }\n\n    .gleap-tour-message::-webkit-scrollbar {\n      width: 5px;\n    }\n\n    .gleap-tour-message::-webkit-scrollbar-track {\n      border-radius: 0px;\n    }\n    \n    .gleap-tour-message::-webkit-scrollbar-thumb {\n      background: ").concat(b,"; \n      border-radius: 5px;\n    }\n\n    .gleap-tour-message::-webkit-scrollbar-thumb:hover {\n      background: ").concat(v,";\n    }\n\n    @media only screen and (max-width: 450px) {\n      .gleap-tour-message {\n        min-width: auto !important;\n      }\n    }\n\n    .gleap-tour-message iframe {\n      width: 100%;\n      height: 300px;\n      margin-top: 10px;\n      margin-bottom: 10px;\n      border: none;\n      outline: none;\n      display: block;\n    }\n\n    .gleap-tour-sender-name {\n      font-size: 15px;\n    }\n\n    .gleap-tour-video {\n      width: 100%;\n      max-width: 100%;\n    }\n\n    .gleap-tour-video-svg--fullscreen {\n      width: 100% !important;\n      height: 100% !important;\n      top: 0px !important;\n      left: 0px !important;\n      right: 0px !important;\n      bottom: 0px !important;\n    }\n\n    .gleap-tour-video--playing .gleap-tour-video-playpause {\n      opacity: 0;\n    }\n    \n    .gleap-tour-video--playing:hover .gleap-tour-video-playpause {\n      opacity: 1;\n    }\n\n    .gleap-tour-popover-video-pointer {\n      padding: 0px !important;\n      border-radius: 8px;\n      position: relative;\n      background-color: transparent !important;\n    }\n\n    .gleap-tour-popover-video-pointer .gleap-tour-popover-footer {\n      position: absolute;\n      top: 0px;\n      left: 20px;\n      right: 20px;\n      opacity: 0;\n      transition: opacity 200ms ease-in-out;\n    }\n\n    .gleap-tour-popover-video-pointer .gleap-tour-popover-footer button {\n      padding: 5px 12px;\n    }\n\n    .gleap-tour-popover-video-pointer.gleap-tour-popover-can-close .gleap-tour-popover-footer {\n      right: 40px !important;\n    }\n\n    .gleap-tour-popover-video-pointer:hover .gleap-tour-popover-footer {\n      opacity: 1;\n    }\n\n    .gleap-tour-popover-pointer.gleap-tour-popover-no-sender .gleap-tour-message {\n      padding-right: 20px;\n    }\n\n    .gleap-tour-video video {\n      width: 100%;\n      max-width: 100%;\n      height: auto;\n      border: none;\n      outline: none;\n      display: block;\n      border-radius: 8px;\n    }\n\n    .gleap-admin-collapse-ui {\n      z-index: ").concat(2147483635,";\n      cursor: pointer;\n      position: fixed;\n      bottom: 75px;\n      right: 20px;\n      width: 32px;\n      height: 32px;\n      border-radius: 100%;\n      background-color: #fff;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      box-shadow: rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px;\n    }\n\n    .gleap-admin-collapse-ui svg {\n      width: 20px;\n      height: 14px;\n      fill: #000 !important;\n    }\n\n    .gleap-admin-collapse-ui-active {\n      bottom: 20px !important;\n    }\n\n    .gleap-admin-collapse-ui-active svg {\n      transform: rotate(180deg);\n    }\n\n    .gleap-admin-frame-container-active {\n      display: none !important;\n    }\n\n    .gleap-admin-frame-container {\n      position: fixed;\n      bottom: 0px;\n      left: 0px;\n      right: 0px;\n      width: 100vw;\n      z-index: ").concat(2147483640,";\n    }\n\n    .gleap-admin-frame {\n      width: 100%;\n      height: 100% !important;\n      border: none;\n      outline: none;\n      display: block;\n    }\n    \n    .gleap-tour-message .linktype-link {\n      display: inline-block !important;\n      background-color: transparent !important;\n      color: ").concat(n," !important;\n    }\n\n    .gleap-tooltip .linktype-button,\n    .gleap-tour-message .linktype-button {\n      display: inline-block !important;\n      border-radius: 5px;\n      box-sizing: border-box;\n      padding: 10px 20px !important;\n      text-decoration: none !important;\n      background-color: ").concat(n," !important;\n      color: ").concat(p," !important;\n    }\n\n    .gleap-tour-message img {\n      width: 100%;\n      max-width: 100%;\n      min-height: 260px;\n      height: auto;\n      margin-top: 10px;\n      margin-bottom: 10px;\n      object-fit: cover;\n    }\n\n    .gleap-tour-active .gleap-tour-overlay {\n      pointer-events: none;\n    }\n    \n    .gleap-tour-active * {\n      pointer-events: none;\n    }\n    \n    .gleap-tour-active .gleap-tour-active-element,\n    .gleap-tour-active .gleap-tour-active-element *,\n    .gleap-tour-popover,\n    .gleap-tour-popover * {\n      pointer-events: auto;\n    }\n    \n    @keyframes animate-fade-in {\n      0% {\n        opacity: 0;\n      }\n    \n      to {\n        opacity: 1;\n      }\n    }\n    \n    .gleap-tour-fade .gleap-tour-overlay {\n      animation: animate-fade-in 200ms ease-in-out;\n    }\n    \n    .gleap-tour-fade .gleap-tour-popover {\n      animation: animate-fade-in 200ms;\n    }\n\n    .gleap-tour-video-playpause {\n      position: absolute;\n      bottom: 8px;\n      left: 8px;\n      width: 32px;\n      height: 32px;\n      padding: 4px;\n      background-color: rgba(0,0,0,0.5);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      border-radius: 8px;\n      transition: opacity 200ms ease-in-out;\n    }\n\n    .gleap-tour-popover-video-pointer .gleap-tour-popover-arrow {\n      display: none !important;\n    }\n\n    .gleap-tour-video-playpause svg {\n      width: 34px;\n      height: auto;\n      fill: #fff;\n    }\n    \n    /* Popover styles */\n    .gleap-tour-popover {\n      all: unset;\n      box-sizing: border-box;\n      color: #2d2d2d;\n      margin: 0;\n      padding: 15px;\n      border-radius: ").concat(S,'px;\n      min-width: 250px;\n      max-width: 300px;\n      box-shadow: 0 1px 10px #0006;\n      z-index: 1000000000;\n      position: fixed;\n      top: 0;\n      right: 0;\n      background-color: #fff;\n    }\n    \n    .gleap-tour-popover * {\n      font-family: "Helvetica Neue", Inter, ui-sans-serif, "Apple Color Emoji", Helvetica, Arial, sans-serif;\n    }\n    \n    .gleap-tour-popover-title {\n      font: 19px / normal sans-serif;\n      font-weight: 700;\n      display: block;\n      position: relative;\n      line-height: 1.5;\n      zoom: 1;\n      margin: 0;\n    }\n    \n    .gleap-tour-popover-close-btn {\n      all: unset;\n      position: absolute;\n      top: 5px;\n      right: 5px;\n      width: 32px;\n      height: 32px;\n      cursor: pointer;\n      font-size: 30px;\n      font-weight: 500;\n      line-height: 32px;\n      color: #d2d2d2;\n      z-index: 1;\n      text-align: center;\n      transition: color;\n      transition-duration: 200ms;\n    }\n    \n    .gleap-tour-popover-close-btn:hover,\n    .gleap-tour-popover-close-btn:focus {\n      color: #2d2d2d;\n    }\n    \n    .gleap-tour-popover-title[style*="block"] + .gleap-tour-popover-description {\n      margin-top: 5px;\n    }\n    \n    .gleap-tour-popover-description {\n      margin-bottom: 0;\n      font: 15px / normal sans-serif;\n      line-height: 1.5;\n      font-weight: 400;\n      zoom: 1;\n    }\n    \n    .gleap-tour-popover-footer {\n      margin-top: 15px;\n      text-align: right;\n      zoom: 1;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n    }\n    \n    .gleap-tour-popover-progress-text {\n      font-size: 13px;\n      font-weight: 400;\n      color: #727272;\n      zoom: 1;\n    }\n    \n    .gleap-tour-popover-footer button {\n      background-color: ').concat(e,";\n      color: ").concat(c,";\n      border-radius: ").concat(C,"px;\n      box-sizing: border-box;\n      padding: 10px 20px;\n      font-size: 14px;\n      font-weight: bold;\n      line-height: 21px;\n      border: none;\n      text-align: center;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      box-shadow: none !important;\n      outline: none !important;\n    }\n\n    .gleap-tour-popover-prev-btn {\n      color: ").concat(h," !important;\n      background-color: ").concat(y," !important;\n      margin-right: 3px;\n    }\n\n    .gleap-tour-popover-prev-btn:hover {\n      background-color: ").concat(e,"22 !important;\n      color: ").concat(e,' !important;\n    }\n    \n    .gleap-tour-popover-footer .gleap-tour-popover-btn-disabled {\n      opacity: 0.5;\n      pointer-events: none;\n    }\n    \n    .gleap-tour-no-interaction, .gleap-tour-no-interaction * {\n      pointer-events: none !important;\n    }\n    \n    .gleap-tour-popover-navigation-btns {\n      display: flex;\n      flex-grow: 1;\n      justify-content: flex-end;\n    }\n    \n    .gleap-tour-popover-navigation-btns button + button {\n      margin-left: 4px;\n    }\n    \n    .gleap-tour-popover-arrow {\n      content: "";\n      position: absolute;\n      border: 5px solid #fff;\n    }\n    \n    .gleap-tour-popover-arrow-side-over {\n      display: none;\n    }\n    \n    /** Popover Arrow Sides **/\n    .gleap-tour-popover-arrow-side-left {\n      left: 100%;\n      border-right-color: transparent;\n      border-bottom-color: transparent;\n      border-top-color: transparent;\n    }\n    \n    .gleap-tour-popover-arrow-side-right {\n      right: 100%;\n      border-left-color: transparent;\n      border-bottom-color: transparent;\n      border-top-color: transparent;\n    }\n    \n    .gleap-tour-popover-arrow-side-top {\n      top: 100%;\n      border-right-color: transparent;\n      border-bottom-color: transparent;\n      border-left-color: transparent;\n    }\n    \n    .gleap-tour-popover-arrow-side-bottom {\n      bottom: 100%;\n      border-left-color: transparent;\n      border-top-color: transparent;\n      border-right-color: transparent;\n    }\n    \n    .gleap-tour-popover-arrow-side-center {\n      display: none;\n    }\n    \n    /* Left/Start + Right/Start */\n    .gleap-tour-popover-arrow-side-left.gleap-tour-popover-arrow-align-start,\n    .gleap-tour-popover-arrow-side-right.gleap-tour-popover-arrow-align-start {\n      top: 15px;\n    }\n    \n    /* Top/Start + Bottom/Start */\n    .gleap-tour-popover-arrow-side-top.gleap-tour-popover-arrow-align-start,\n    .gleap-tour-popover-arrow-side-bottom.gleap-tour-popover-arrow-align-start {\n      left: 15px;\n    }\n    \n    /* End/Left + End/Right */\n    .gleap-tour-popover-arrow-align-end.gleap-tour-popover-arrow-side-left,\n    .gleap-tour-popover-arrow-align-end.gleap-tour-popover-arrow-side-right {\n      bottom: 15px;\n    }\n    \n    /* Top/End + Bottom/End */\n    .gleap-tour-popover-arrow-side-top.gleap-tour-popover-arrow-align-end,\n    .gleap-tour-popover-arrow-side-bottom.gleap-tour-popover-arrow-align-end {\n      right: 15px;\n    }\n    \n    /* Left/Center + Right/Center */\n    .gleap-tour-popover-arrow-side-left.gleap-tour-popover-arrow-align-center,\n    .gleap-tour-popover-arrow-side-right.gleap-tour-popover-arrow-align-center {\n      top: 50%;\n      margin-top: -5px;\n    }\n    \n    /* Top/Center + Bottom/Center */\n    .gleap-tour-popover-arrow-side-top.gleap-tour-popover-arrow-align-center,\n    .gleap-tour-popover-arrow-side-bottom.gleap-tour-popover-arrow-align-center {\n      left: 50%;\n      margin-left: -5px;\n    }\n    \n    /* No arrow */\n    .gleap-tour-popover-arrow-none {\n      display: none;\n    }    \n\n    /* Modal styles */\n    .gleap-modal-wrapper {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: ').concat(2147483640,";\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .gleap-modal-backdrop {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.5);\n      z-index: ").concat(2147483641,";\n    }\n\n    .gleap-modal {\n      position: relative;\n      width: 90%;\n      max-width: 600px;\n      max-height: 90vh;\n      z-index: ").concat(2147483700,";\n      background-color: ").concat(r,";\n      border-radius: ").concat(k,"px;\n      overflow: hidden;\n      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n      animation-duration: 0.3s;\n      animation-fill-mode: both;\n      animation-name: gleapFadeInUp;\n    }\n\n    .gleap-modal-frame {\n      width: 100%;\n      border: none;\n      display: block;\n      outline: none;\n    }\n\n    body.gleap-modal-open {\n      overflow: hidden;\n    }\n\n    @keyframes gleapFadeInUp {\n      from {\n        opacity: 0;\n        transform: translate3d(0, 20px, 0);\n      }\n      to {\n        opacity: 1;\n        transform: translate3d(0, 0, 0);\n      }\n    }\n    "),T=document.querySelector(".gleap-styles");T&&T.remove();var L=document.createElement("style");L.innerHTML=E,L.className="gleap-styles",document.body.appendChild(L)}(e,t,n,r,o,i,s,l)}))}},{key:"sendSilentCrashReport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MEDIUM",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{screenshot:!0,replays:!0,attachments:!0};return e.sendSilentCrashReportWithFormData({description:t},n,o)}},{key:"sendSilentCrashReportWithFormData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MEDIUM",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{screenshot:!0,replays:!0,attachments:!0};if(!this.silentCrashReportSent){this.silentCrashReportSent=!0,setTimeout((function(){t.silentCrashReportSent=!1}),1e4);var r=o?S(o):{},i=nt.getInstance();if(i.ready){var a=e||{};i.session.email&&(a.reportedBy=i.session.email),new Gt("CRASH",n,a,!0,r).sendFeedback().then((function(){})).catch((function(e){}))}}}},{key:"showSurvey",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"survey";e.startFeedbackFlowWithOptions(t,{hideBackButton:!0,format:n},!0)}},{key:"startClassicForm",value:function(t,n){e.startFeedbackFlowWithOptions(t,{hideBackButton:!n})}},{key:"startFeedbackFlow",value:function(t,n){e.startFeedbackFlowWithOptions(t,{hideBackButton:!n})}},{key:"startFeedbackFlowWithOptions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n.autostartDrawing,i=n.hideBackButton,a=n.format;if(nt.getInstance().ready){e.getInstance().setGlobalDataItem("snapshotPosition",{x:window.scrollX,y:window.scrollY});var s="start-feedbackflow";o&&(s="start-survey"),Qt.getInstance().setAppMode(o?a:"widget"),Qt.getInstance().sendMessage({name:s,data:{flow:t,hideBackButton:i,format:a}},!0),r?Qt.getInstance().showDrawingScreen("screenshot"):Qt.getInstance().showWidget()}}},{key:"openConversations",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-conversations",data:{hideBackButton:!e}},!0),Qt.getInstance().showWidget()}},{key:"openConversation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-conversation",data:{shareToken:e,hideBackButton:!t}},!0),Qt.getInstance().showWidget())}},{key:"startConversation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.startBot("",t)}},{key:"startBot",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"start-bot",data:{botId:e||"",hideBackButton:!t}},!0),Qt.getInstance().showWidget()}},{key:"askAI",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"ask-ai",data:{question:e,hideBackButton:!t}},!0),Qt.getInstance().showWidget()}},{key:"openHelpCenterCollection",value:function(e){e&&(Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-help-collection",data:{collectionId:e}},!0),Qt.getInstance().showWidget())}},{key:"openHelpCenterArticle",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-help-article",data:{articleId:e,hideBackButton:!t}},!0),Qt.getInstance().showWidget())}},{key:"openHelpCenter",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-helpcenter",data:{hideBackButton:!e}},!0),Qt.getInstance().showWidget()}},{key:"searchHelpCenter",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-helpcenter-search",data:{term:e,hideBackButton:!t}},!0),Qt.getInstance().showWidget())}},{key:"openNewsArticle",value:function(e){e&&(Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-news-article",data:{id:e}},!0),Qt.getInstance().showWidget())}},{key:"openChecklists",value:function(){Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-checklists",data:{}},!0),Qt.getInstance().showWidget()}},{key:"startChecklist",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return!!e&&(Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"start-checklist",data:qg({outboundId:e,hideBackButton:!t},n?{sharedKey:n}:{})},!0),Qt.getInstance().showWidget(),!0)}},{key:"openChecklist",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-checklist",data:{id:e,hideBackButton:!t}},!0),Qt.getInstance().showWidget())}},{key:"getChecklistData",value:function(e,t){if(!e)return Promise.reject(new Error("outboundId is required"));var n=j.getInstance();return n.validateChecklist(e,t).then((function(e){return n.fetchChecklist(e)}))}},{key:"openNews",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-news",data:{hideBackButton:!e}},!0),Qt.getInstance().showWidget()}},{key:"openFeatureRequests",value:function(){Qt.getInstance().setAppMode("widget"),Qt.getInstance().sendMessage({name:"open-feature-requests",data:{}},!0),Qt.getInstance().showWidget()}},{key:"startProductTour",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;nt.getInstance().startProductTourConfig(e).then((function(o){var r;!t||null==o||!o.startURL||null!==(r=window)&&void 0!==r&&null!==(r=r.location)&&void 0!==r&&null!==(r=r.href)&&void 0!==r&&r.includes(null==o?void 0:o.baseURL)?n.startProductTourWithConfig(e,o,!0):window.location.href="".concat(o.startURL,"?gleap_tour=").concat(e,"&gleap_tour_delay=1")})).catch((function(e){}))}},{key:"checkForUncompletedTour",value:function(){var e=Tg.getInstance().loadUncompletedTour();e&&Tg.getInstance().startWithConfig(e.tourId,e.tourData,500)}},{key:"startProductTourWithConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Tg.getInstance().startWithConfig(e,t,0,n)}},{key:"showBanner",value:function(e){try{Jh.getInstance().showBanner(e)}catch(t){}}},{key:"showModal",value:function(e){try{of.getInstance().showModal(e)}catch(t){}}},{key:"showNotification",value:function(e){Bh.getInstance().showNotification(e)}}],n&&Hg(t.prototype,n),o&&Hg(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();if(Wg(Gg,"invoked",!0),Wg(Gg,"silentCrashReportSent",!1),Wg(Gg,"instance",void 0),"undefined"!=typeof window){var Yg=window.GleapActions;if(Yg&&Yg.length>0)for(var Xg=0;Xg<Yg.length;Xg++){var Kg=Yg[Xg];Kg&&Kg.e&&Gg[Kg.e]&&Gg[Kg.e].apply(Gg,Kg.a)}}var Jg=function(e){try{var t=e.split("/"),n=t[2];if("article"===n){var o=t[3];Gg.openHelpCenterArticle(o,!0)}if("collection"===n){var r=t[3];Gg.openHelpCenterCollection(r,!0)}if("flow"===n){var i=t[3];Gg.startFeedbackFlow(i,!0)}if("survey"===n){var a=t[3];Gg.showSurvey(a)}if("bot"===n){var s=t[3];Gg.startBot(s,!0)}if("news"===n){var l=t[3];Gg.openNewsArticle(l,!0)}if("checklist"===n){var c=t[3];Gg.startChecklist(c,!0,t[4])}if("tour"===n){var u=t[3];Gg.startProductTour(u)}}catch(d){console.error("Failed to handle Gleap link: ",e)}};const Zg=Gg,$g=Gg})(),Gleap=t.default})();
//# sourceMappingURL=index.js.map